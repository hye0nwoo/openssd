cscope 15 /home/vldbhw/openssd_20151230               0000374893
	@ftl_greedy/ftl.c

28 
	~"jasmöe.h
"

30 
	#NUM_BMAP_BLOCK
 50

	)

35 
	#VC_MAX
 0xCDCD

36 
	#MISCBLK_VBN
 0x1

37 
	#MAPBLKS_PER_BANK
 (((
PAGE_MAP_BYTES
 / 
NUM_BANKS
Ë+ 
BYTES_PER_PAGE
 - 1Ë/ BYTES_PER_PAGE)

	)

38 
	#META_BLKS_PER_BANK
 (1 + 1 + 
MAPBLKS_PER_BANK
)

39 

	)

41 
	#NUM_MISC_META_SECT
 (((
misc_mëad©a
Ë+ 
BYTES_PER_SECTOR
 - 1)/ BYTES_PER_SECTOR)

	)

42 
	#NUM_VCOUNT_SECT
 ((
VBLKS_PER_BANK
 * (
UINT16
Ë+ 
BYTES_PER_SECTOR
 - 1Ë/ BYTES_PER_SECTOR)

	)

47 
	s_·l_°©i°ics


49 
UINT32
 
	mgc_˙t
;

50 
UINT32
 
	m∑ge_wcou¡
;

51 }
	t·l_°©i°ics
;

53 
	s_misc_mëad©a


55 
UINT32
 
	mcur_wrôe_v≤
;

56 
UINT32
 
	mcur_miscblk_v≤
;

57 
UINT32
 
	mcur_m≠blk_v≤
[
MAPBLKS_PER_BANK
];

58 
UINT32
 
	mgc_vblock
;

59 
UINT32
 
	m‰ì_blk_˙t
;

60 
UINT32
 
	mÕn_li°_of_cur_vblock
[
PAGES_PER_BLK
];

63 
UINT32
 
	mcur_wrôe_vbn
;

64 
UINT32
 
	mcur_miscblk_vbn
;

65 
UINT32
 
	mcur_m≠blk_vbn
[
MAPBLKS_PER_BANK
];

66 
UINT32
 
	mgc_vblock_block
;

67 
UINT32
 
	m‰ì_blk_˙t_block
;

68 
UINT32
 
	mblock_bôm≠
[
NUM_BMAP_BLOCK
][
PAGES_PER_BLK
/8];

69 
UINT32
 
	mÕn_li°_of_cur_vblock_block
[
PAGES_PER_BLK
];

70 }
	tmisc_mëad©a
;

75 
misc_mëad©a
 
	gg_misc_mëa
[
NUM_BANKS
];

76 
·l_°©i°ics
 
	gg_·l_°©i°ics
[
NUM_BANKS
];

77 
UINT32
 
	gg_bad_blk_cou¡
[
NUM_BANKS
];

79 
UINT32
 
	gœ°_bm≠_block
[
NUM_BANKS
];

82 
UINT32
 
	gg_·l_ªad_buf_id
;

83 
UINT32
 
	gg_·l_wrôe_buf_id
;

87 
UINT32
 
	gblock_b™k
 = 0;

102 
	#is_fuŒ_Æl_blks
(
b™k
Ë(
g_misc_mëa
[b™k].
‰ì_blk_˙t
 =1)

	)

103 
	#öc_fuŒ_blk_˙t
(
b™k
Ë(
g_misc_mëa
[b™k].
‰ì_blk_˙t
--)

	)

104 
	#dec_fuŒ_blk_˙t
(
b™k
Ë(
g_misc_mëa
[b™k].
‰ì_blk_˙t
++)

	)

105 
	#öc_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
Ë(
g_misc_mëa
[b™k].
cur_m≠blk_v≤
[m≠blk_lbn]++)

	)

106 
	#öc_miscblk_v≤
(
b™k
Ë(
g_misc_mëa
[b™k].
cur_miscblk_v≤
++)

	)

109 
	#gë_num_b™k
(
Õn
Ë(÷≤Ë% 
NUM_BANKS
)

	)

110 
	#gë_bad_blk_˙t
(
b™k
Ë(
g_bad_blk_cou¡
[b™k])

	)

111 
	#gë_cur_wrôe_v≤
(
b™k
Ë(
g_misc_mëa
[b™k].
cur_wrôe_v≤
)

	)

112 
	#£t_√w_wrôe_v≤
(
b™k
, 
v≤
Ë(
g_misc_mëa
[b™k].
cur_wrôe_v≤
 = v≤)

	)

113 
	#gë_gc_vblock
(
b™k
Ë(
g_misc_mëa
[b™k].
gc_vblock
)

	)

114 
	#£t_gc_vblock
(
b™k
, 
vblock
Ë(
g_misc_mëa
[b™k].
gc_vblock
 = vblock)

	)

115 
	#£t_Õn
(
b™k
, 
∑ge_num
, 
Õn
Ë(
g_misc_mëa
[b™k].
Õn_li°_of_cur_vblock
[∑ge_num] =Ü≤)

	)

116 
	#gë_Õn
(
b™k
, 
∑ge_num
Ë(
g_misc_mëa
[b™k].
Õn_li°_of_cur_vblock
[∑ge_num])

	)

117 
	#gë_miscblk_v≤
(
b™k
Ë(
g_misc_mëa
[b™k].
cur_miscblk_v≤
)

	)

118 
	#£t_miscblk_v≤
(
b™k
, 
v≤
Ë(
g_misc_mëa
[b™k].
cur_miscblk_v≤
 = v≤)

	)

119 
	#gë_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
Ë(
g_misc_mëa
[b™k].
cur_m≠blk_v≤
[m≠blk_lbn])

	)

120 
	#£t_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
, 
v≤
Ë(
g_misc_mëa
[b™k].
cur_m≠blk_v≤
[m≠blk_lbn] = v≤)

	)

121 
	#CHECK_LPAGE
(
Õn
Ë
	`ASSERT
(÷≤Ë< 
NUM_LPAGES
)

	)

122 
	#CHECK_VPAGE
(
v≤
Ë
	`ASSERT
((v≤Ë< (
VBLKS_PER_BANK
 * 
PAGES_PER_BLK
))

	)

125 
	#is_fuŒ_Æl_blks_block
(
b™k
Ë(
g_misc_mëa
[b™k].
‰ì_blk_˙t_block
 =1)

	)

126 
	#öc_fuŒ_blk_˙t_block
(
b™k
Ë(
g_misc_mëa
[b™k].
‰ì_blk_˙t_block
--)

	)

127 
	#dec_fuŒ_blk_˙t_block
(
b™k
Ë(
g_misc_mëa
[b™k].
‰ì_blk_˙t_block
++)

	)

128 
	#öc_m≠blk_vbn
(
b™k
, 
m≠blk_lbn
Ë(
g_misc_mëa
[b™k].
cur_m≠blk_vbn
[m≠blk_lbn]++)

	)

129 
	#öc_miscblk_vbn
(
b™k
Ë(
g_misc_mëa
[b™k].
cur_miscblk_vbn
++)

	)

131 
	#£t_lbn
(
b™k
, 
∑ge_num
, 
Õn
Ë(
g_misc_mëa
[b™k].
Õn_li°_of_cur_vblock_block
[∑ge_num] =Ü≤)

	)

132 
	#gë_lbn
(
b™k
, 
∑ge_num
Ë(
g_misc_mëa
[b™k].
Õn_li°_of_cur_vblock_block
[∑ge_num])

	)

134 
	#gë_cur_wrôe_vbn
(
b™k
Ë(
g_misc_mëa
[b™k].
cur_wrôe_vbn
)

	)

135 
	#£t_√w_wrôe_vbn
(
b™k
, 
vbn
Ë(
g_misc_mëa
[b™k].
cur_wrôe_vbn
 = vbn)

	)

137 
	#gë_gc_vblock_block
(
b™k
Ë(
g_misc_mëa
[b™k].
gc_vblock_block
)

	)

138 
	#£t_gc_vblock_block
(
b™k
, 
vblock
Ë(
g_misc_mëa
[b™k].
gc_vblock_block
 = vblock)

	)

140 
	#CHECK_LBLOCK
(
lbn
Ë
	`ASSERT
(÷bnË< 
NUM_BMAP_BLOCK
 * 
NUM_BANKS
)

	)

141 
	#CHECK_VBLOCK
(
vbn
Ë
	`ASSERT
((vbnË< 
NUM_BMAP_BLOCK
)

	)

143 
	#wrôe_block_b™k
(
b™k
Ëb™k++%8

	)

149 
f‹m©
();

150 
wrôe_f‹m©_m¨k
();

151 
ßnôy_check
();

152 
lﬂd_pm≠_èbÀ
();

153 
lﬂd_misc_mëad©a
();

154 
öô_mëad©a_§am
();

155 
lﬂd_mëad©a
();

156 
loggög_pm≠_èbÀ
();

157 
loggög_misc_mëad©a
();

158 
wrôe_∑ge
(
UINT32
 c⁄° 
Õn
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
);

159 
£t_v≤
(
UINT32
 c⁄° 
Õn
, UINT32 c⁄° 
v≤
);

160 
g¨bage_cﬁÀ˘i⁄
(
UINT32
 c⁄° 
b™k
);

161 
£t_vcou¡
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
vcou¡
);

162 
BOOL32
 
is_bad_block
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
);

163 
BOOL32
 
check_f‹m©_m¨k
();

164 
UINT32
 
gë_vcou¡
(UINT32 c⁄° 
b™k
, UINT32 c⁄° 
vblock
);

165 
UINT32
 
gë_v≤
(UINT32 c⁄° 
Õn
);

166 
UINT32
 
gë_vt_vblock
(UINT32 c⁄° 
b™k
);

167 
UINT32
 
assign_√w_wrôe_v≤
(UINT32 c⁄° 
b™k
);

170 
UINT32
 
assign_√w_wrôe_vbn
(UINT32 c⁄° 
b™k
, UINT32 c⁄° 
Õn
);

171 
·l_ªad_block
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
);

172 
·l_wrôe_block
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
);

173 
wrôe_∑ge_block
(
UINT32
 c⁄° 
Õn
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
);

174 
UINT32
 
gë_vbn
(UINT32 c⁄° 
lbn
);

175 
£t_vbn
(
UINT32
 c⁄° 
lbn
, UINT32 c⁄° 
vbn
);

176 
UINT32
 
gë_vcou¡_block
(UINT32 c⁄° 
b™k
, UINT32 c⁄° 
vblock
);

177 
£t_vcou¡_block
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
vcou¡
);

178 
g¨bage_cﬁÀ˘i⁄_block
(
UINT32
 c⁄° 
b™k
);

179 
UINT32
 
gë_vt_vblock_block
(UINT32 c⁄° 
b™k
);

181 
	$ßnôy_check
()

183 
UINT32
 
døm_ªquúemít
 = 
RD_BUF_BYTES
 + 
WR_BUF_BYTES
 + 
COPY_BUF_BYTES
 + 
FTL_BUF_BYTES


184 + 
HIL_BUF_BYTES
 + 
TEMP_BUF_BYTES
 + 
BAD_BLK_BMP_BYTES
 + 
PAGE_MAP_BYTES
 + 
VCOUNT_BYTES
;

186 i‡((
døm_ªquúemít
 > 
DRAM_SIZE
) ||

187 ((
misc_mëad©a
Ë> 
BYTES_PER_PAGE
))

189 
	`Àd_blök
();

192 
	}
}

193 
	$buûd_bad_blk_li°
()

195 
UINT32
 
b™k
, 
num_íåõs
, 
ªsu…
, 
vblk_off£t
;

196 
sˇn_li°_t
* 
sˇn_li°
 = (sˇn_li°_t*Ë
TEMP_BUF_ADDR
;

198 
	`mem_£t_døm
(
BAD_BLK_BMP_ADDR
, 
NULL
, 
BAD_BLK_BMP_BYTES
);

200 
	`dißbÀ_úq
();

202 
	`Êash_˛ór_úq
();

204 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

206 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

207 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

208 
	`SETREG
(
FCP_OPTION
, 
FO_E
);

209 
	`SETREG
(
FCP_DMA_ADDR
, (
UINT32
Ë
sˇn_li°
);

210 
	`SETREG
(
FCP_DMA_CNT
, 
SCAN_LIST_SIZE
);

211 
	`SETREG
(
FCP_COL
, 0);

212 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
SCAN_LIST_PAGE_OFFSET
);

213 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
SCAN_LIST_PAGE_OFFSET
);

215 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

216 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

217 
	`BSP_FSM
(
b™k
Ë!
BANK_IDLE
);

219 
num_íåõs
 = 
NULL
;

220 
ªsu…
 = 
OK
;

222 i‡(
	`BSP_INTR
(
b™k
Ë& 
FIRQ_DATA_CORRUPT
)

224 
ªsu…
 = 
FAIL
;

228 
UINT32
 
i
;

230 
num_íåõs
 = 
	`ªad_døm_16
(&(
sˇn_li°
->num_entries));

232 i‡(
num_íåõs
 > 
SCAN_LIST_ITEMS
)

234 
ªsu…
 = 
FAIL
;

238 
i
 = 0; i < 
num_íåõs
; i++)

240 
UINT16
 
íåy
 = 
	`ªad_døm_16
(
sˇn_li°
->
li°
 + 
i
);

241 
UINT16
 
pblk_off£t
 = 
íåy
 & 0x7FFF;

243 i‡(
pblk_off£t
 =0 ||Öblk_off£à>
PBLKS_PER_BANK
)

245 #i‡
OPTION_REDUCED_CAPACITY
 =
FALSE


246 
ªsu…
 = 
FAIL
;

251 
	`wrôe_døm_16
(
sˇn_li°
->
li°
 + 
i
, 
pblk_off£t
);

257 i‡(
ªsu…
 =
FAIL
)

259 
num_íåõs
 = 0;

263 
	`wrôe_døm_16
(&(
sˇn_li°
->
num_íåõs
), 0);

266 
g_bad_blk_cou¡
[
b™k
] = 0;

268 
vblk_off£t
 = 1; vblk_off£à< 
VBLKS_PER_BANK
; vblk_offset++)

270 
BOOL32
 
bad
 = 
FALSE
;

272 #i‡
OPTION_2_PLANE


274 
UINT32
 
pblk_off£t
;

276 
pblk_off£t
 = 
vblk_off£t
 * 
NUM_PLANES
;

279 i‡(
	`mem_£¨ch_equ_døm
(
sˇn_li°
, (
UINT16
), 
num_íåõs
 + 1, 
pblk_off£t
) <Çum_entries + 1)

281 
bad
 = 
TRUE
;

284 
pblk_off£t
 = 
vblk_off£t
 * 
NUM_PLANES
 + 1;

287 i‡(
	`mem_£¨ch_equ_døm
(
sˇn_li°
, (
UINT16
), 
num_íåõs
 + 1, 
pblk_off£t
) <Çum_entries + 1)

289 
bad
 = 
TRUE
;

295 i‡(
	`mem_£¨ch_equ_døm
(
sˇn_li°
, (
UINT16
), 
num_íåõs
 + 1, 
vblk_off£t
) <Çum_entries + 1)

297 
bad
 = 
TRUE
;

302 i‡(
bad
)

304 
g_bad_blk_cou¡
[
b™k
]++;

305 
	`£t_bô_døm
(
BAD_BLK_BMP_ADDR
 + 
b™k
*(
VBLKS_PER_BANK
/8 + 1), 
vblk_off£t
);

309 
	}
}

311 
	$·l_›í
()

319 
	`Àd
(0);

320 
	`ßnôy_check
();

325 
	`buûd_bad_blk_li°
();

332 i‡(
TRUE
)

334 
	`u¨t_¥öt
("do format");

335 
	`f‹m©
();

336 
	`u¨t_¥öt
("end format");

341 
	`lﬂd_mëad©a
();

343 
g_·l_ªad_buf_id
 = 0;

344 
g_·l_wrôe_buf_id
 = 0;

347 
	`Êash_˛ór_úq
();

349 
	`SETREG
(
INTR_MASK
, 
FIRQ_DATA_CORRUPT
 | 
FIRQ_BADBLK_L
 | 
FIRQ_BADBLK_H
);

350 
	`SETREG
(
FCONF_PAUSE
, 
FIRQ_DATA_CORRUPT
 | 
FIRQ_BADBLK_L
 | 
FIRQ_BADBLK_H
);

352 
	`íabÀ_úq
();

353 
	}
}

354 
	$·l_Êush
()

357 
	`loggög_pm≠_èbÀ
();

358 
	`loggög_misc_mëad©a
();

360 
	}
}

362 
	$·l_ã°_wrôe
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
)

364 
	`ASSERT
(
lba
 + 
num_£˘‹s
 <
NUM_LSECTORS
);

365 
	`ASSERT
(
num_£˘‹s
 > 0);

367 
	`·l_wrôe
(
lba
, 
num_£˘‹s
);

368 
	}
}

369 
	$·l_ªad
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
)

371 
UINT32
 
ªmaö_£˘s
, 
num_£˘‹s_to_ªad
;

372 
UINT32
 
Õn
, 
£˘_off£t
;

373 
UINT32
 
b™k
, 
v≤
;

375 
Õn
 = 
lba
 / 
SECTORS_PER_PAGE
;

376 
£˘_off£t
 = 
lba
 % 
SECTORS_PER_PAGE
;

377 
ªmaö_£˘s
 = 
num_£˘‹s
;

379 
ªmaö_£˘s
 != 0)

381 i‡((
£˘_off£t
 + 
ªmaö_£˘s
Ë< 
SECTORS_PER_PAGE
)

383 
num_£˘‹s_to_ªad
 = 
ªmaö_£˘s
;

387 
num_£˘‹s_to_ªad
 = 
SECTORS_PER_PAGE
 - 
£˘_off£t
;

389 
b™k
 = 
	`gë_num_b™k
(
Õn
);

390 
v≤
 = 
	`gë_v≤
(
Õn
);

391 
	`CHECK_VPAGE
(
v≤
);

393 i‡(
v≤
 !
NULL
)

395 
	`«nd_∑ge_±ªad_to_ho°
(
b™k
,

396 
v≤
 / 
PAGES_PER_BLK
,

397 
v≤
 % 
PAGES_PER_BLK
,

398 
£˘_off£t
,

399 
num_£˘‹s_to_ªad
);

404 
UINT32
 
√xt_ªad_buf_id
 = (
g_·l_ªad_buf_id
 + 1Ë% 
NUM_RD_BUFFERS
;

406 #i‡
OPTION_FTL_TEST
 == 0

407 
√xt_ªad_buf_id
 =
	`GETREG
(
SATA_RBUF_PTR
));

414 
	`mem_£t_døm
(
	`RD_BUF_PTR
(
g_·l_ªad_buf_id
Ë+ 
£˘_off£t
*
BYTES_PER_SECTOR
,

415 0xFFFFFFFF, 
num_£˘‹s_to_ªad
*
BYTES_PER_SECTOR
);

417 
	`Êash_föish
();

419 
	`SETREG
(
BM_STACK_RDSET
, 
√xt_ªad_buf_id
);

420 
	`SETREG
(
BM_STACK_RESET
, 0x02);

422 
g_·l_ªad_buf_id
 = 
√xt_ªad_buf_id
;

424 
£˘_off£t
 = 0;

425 
ªmaö_£˘s
 -
num_£˘‹s_to_ªad
;

426 
Õn
++;

428 
	}
}

429 
	$·l_wrôe
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
)

431 
UINT32
 
ªmaö_£˘s
, 
num_£˘‹s_to_wrôe
;

432 
UINT32
 
Õn
, 
£˘_off£t
;

434 
Õn
 = 
lba
 / 
SECTORS_PER_PAGE
;

435 
£˘_off£t
 = 
lba
 % 
SECTORS_PER_PAGE
;

436 
ªmaö_£˘s
 = 
num_£˘‹s
;

438 
ªmaö_£˘s
 != 0)

440 i‡((
£˘_off£t
 + 
ªmaö_£˘s
Ë< 
SECTORS_PER_PAGE
)

442 
num_£˘‹s_to_wrôe
 = 
ªmaö_£˘s
;

446 
num_£˘‹s_to_wrôe
 = 
SECTORS_PER_PAGE
 - 
£˘_off£t
;

449 
	`wrôe_∑ge
(
Õn
, 
£˘_off£t
, 
num_£˘‹s_to_wrôe
);

451 
£˘_off£t
 = 0;

452 
ªmaö_£˘s
 -
num_£˘‹s_to_wrôe
;

453 
Õn
++;

455 
	}
}

456 
	$wrôe_∑ge
(
UINT32
 c⁄° 
Õn
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
)

458 
	`CHECK_LPAGE
(
Õn
);

459 
	`ASSERT
(
£˘_off£t
 < 
SECTORS_PER_PAGE
);

460 
	`ASSERT
(
num_£˘‹s
 > 0 &&Çum_£˘‹†<
SECTORS_PER_PAGE
);

462 
UINT32
 
b™k
, 
ﬁd_v≤
, 
√w_v≤
;

463 
UINT32
 
vblock
, 
∑ge_num
, 
∑ge_off£t
, 
cﬁumn_˙t
;

465 
b™k
 = 
	`gë_num_b™k
(
Õn
);

466 
∑ge_off£t
 = 
£˘_off£t
;

467 
cﬁumn_˙t
 = 
num_£˘‹s
;

469 
√w_v≤
 = 
	`assign_√w_wrôe_v≤
(
b™k
);

470 
ﬁd_v≤
 = 
	`gë_v≤
(
Õn
);

472 
	`CHECK_VPAGE
 (
ﬁd_v≤
);

473 
	`CHECK_VPAGE
 (
√w_v≤
);

474 
	`ASSERT
(
ﬁd_v≤
 !
√w_v≤
);

476 
g_·l_°©i°ics
[
b™k
].
∑ge_wcou¡
++;

479 i‡(
ﬁd_v≤
 !
NULL
)

481 
vblock
 = 
ﬁd_v≤
 / 
PAGES_PER_BLK
;

482 
∑ge_num
 = 
ﬁd_v≤
 % 
PAGES_PER_BLK
;

490 i‡(
num_£˘‹s
 !
SECTORS_PER_PAGE
)

495 i‡((
num_£˘‹s
 <8Ë&& (
∑ge_off£t
 != 0))

498 
	`«nd_∑ge_ªad
(
b™k
,

499 
vblock
,

500 
∑ge_num
,

501 
	`FTL_BUF
(
b™k
));

503 i‡(
∑ge_off£t
 != 0)

505 
	`mem_c›y
(
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
),

506 
	`FTL_BUF
(
b™k
),

507 
∑ge_off£t
 * 
BYTES_PER_SECTOR
);

510 i‡((
∑ge_off£t
 + 
cﬁumn_˙t
Ë< 
SECTORS_PER_PAGE
)

512 
UINT32
 c⁄° 
rhﬁe_ba£
 = (
∑ge_off£t
 + 
cﬁumn_˙t
Ë* 
BYTES_PER_SECTOR
;

514 
	`mem_c›y
(
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
Ë+ 
rhﬁe_ba£
,

515 
	`FTL_BUF
(
b™k
Ë+ 
rhﬁe_ba£
,

516 
BYTES_PER_PAGE
 - 
rhﬁe_ba£
);

523 i‡(
∑ge_off£t
 != 0)

525 
	`«nd_∑ge_±ªad
(
b™k
,

526 
vblock
,

527 
∑ge_num
,

529 
∑ge_off£t
,

530 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
),

531 
RETURN_ON_ISSUE
);

534 i‡((
∑ge_off£t
 + 
cﬁumn_˙t
Ë< 
SECTORS_PER_PAGE
)

536 
	`«nd_∑ge_±ªad
(
b™k
,

537 
vblock
,

538 
∑ge_num
,

539 
∑ge_off£t
 + 
cﬁumn_˙t
,

540 
SECTORS_PER_PAGE
 - (
∑ge_off£t
 + 
cﬁumn_˙t
),

541 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
),

542 
RETURN_ON_ISSUE
);

547 
∑ge_off£t
 = 0;

548 
cﬁumn_˙t
 = 
SECTORS_PER_PAGE
;

550 
	`£t_vcou¡
(
b™k
, 
vblock
, 
	`gë_vcou¡
(bank, vblock) - 1);

552 
vblock
 = 
√w_v≤
 / 
PAGES_PER_BLK
;

553 
∑ge_num
 = 
√w_v≤
 % 
PAGES_PER_BLK
;

554 
	`ASSERT
(
	`gë_vcou¡
(
b™k
,
vblock
Ë< (
PAGES_PER_BLK
 - 1));

558 
	`«nd_∑ge_±¥ogøm_‰om_ho°
(
b™k
,

559 
vblock
,

560 
∑ge_num
,

561 
∑ge_off£t
,

562 
cﬁumn_˙t
);

564 
	`£t_Õn
(
b™k
, 
∑ge_num
, 
Õn
);

565 
	`£t_v≤
(
Õn
, 
√w_v≤
);

566 
	`£t_vcou¡
(
b™k
, 
vblock
, 
	`gë_vcou¡
(bank, vblock) + 1);

567 
	}
}

569 
UINT32
 
	$gë_v≤
(
UINT32
 c⁄° 
Õn
)

571 
	`CHECK_LPAGE
(
Õn
);

572  
	`ªad_døm_32
(
PAGE_MAP_ADDR
 + 
Õn
 * (
UINT32
));

573 
	}
}

575 
	$£t_v≤
(
UINT32
 c⁄° 
Õn
, UINT32 c⁄° 
v≤
)

577 
	`CHECK_LPAGE
(
Õn
);

578 
	`ASSERT
(
v≤
 >(
META_BLKS_PER_BANK
 * 
PAGES_PER_BLK
Ë&& v≤ < (
VBLKS_PER_BANK
 * PAGES_PER_BLK));

580 
	`wrôe_døm_32
(
PAGE_MAP_ADDR
 + 
Õn
 * (
UINT32
), 
v≤
);

581 
	}
}

583 
UINT32
 
	$gë_vcou¡
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
)

585 
UINT32
 
vcou¡
;

587 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

588 
	`ASSERT
((
vblock
 >
META_BLKS_PER_BANK
Ë&& (vblock < 
VBLKS_PER_BANK
));

590 
vcou¡
 = 
	`ªad_døm_16
(
VCOUNT_ADDR
 + (((
b™k
 * 
VBLKS_PER_BANK
Ë+ 
vblock
Ë* (
UINT16
)));

591 
	`ASSERT
((
vcou¡
 < 
PAGES_PER_BLK
Ë|| (vcou¡ =
VC_MAX
));

593  
vcou¡
;

594 
	}
}

596 
	$£t_vcou¡
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
vcou¡
)

598 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

599 
	`ASSERT
((
vblock
 >
META_BLKS_PER_BANK
Ë&& (vblock < 
VBLKS_PER_BANK
));

600 
	`ASSERT
((
vcou¡
 < 
PAGES_PER_BLK
Ë|| (vcou¡ =
VC_MAX
));

602 
	`wrôe_døm_16
(
VCOUNT_ADDR
 + (((
b™k
 * 
VBLKS_PER_BANK
Ë+ 
vblock
Ë* (
UINT16
)), 
vcou¡
);

603 
	}
}

604 
UINT32
 
	$assign_√w_wrôe_v≤
(
UINT32
 c⁄° 
b™k
)

606 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

608 
UINT32
 
wrôe_v≤
;

609 
UINT32
 
vblock
;

611 
wrôe_v≤
 = 
	`gë_cur_wrôe_v≤
(
b™k
);

612 
vblock
 = 
wrôe_v≤
 / 
PAGES_PER_BLK
;

616 i‡((
wrôe_v≤
 % 
PAGES_PER_BLK
) == (PAGES_PER_BLK - 2))

621 
	`mem_c›y
(
	`FTL_BUF
(
b™k
), 
g_misc_mëa
[b™k].
Õn_li°_of_cur_vblock
, (
UINT32
Ë* 
PAGES_PER_BLK
);

623 
	`«nd_∑ge_±¥ogøm
(
b™k
, 
vblock
, 
PAGES_PER_BLK
 - 1, 0,

624 (((
UINT32
Ë* 
PAGES_PER_BLK
 + 
BYTES_PER_SECTOR
 - 1 ) / BYTES_PER_SECTOR), 
	`FTL_BUF
(
b™k
));

626 
	`mem_£t_§am
(
g_misc_mëa
[
b™k
].
Õn_li°_of_cur_vblock
, 0x00000000, (
UINT32
Ë* 
PAGES_PER_BLK
);

628 
	`öc_fuŒ_blk_˙t
(
b™k
);

631 i‡(
	`is_fuŒ_Æl_blks
(
b™k
))

633 
	`g¨bage_cﬁÀ˘i⁄
(
b™k
);

634  
	`gë_cur_wrôe_v≤
(
b™k
);

638 
vblock
++;

640 
	`ASSERT
(
vblock
 !
VBLKS_PER_BANK
);

641 }
	`gë_vcou¡
(
b™k
, 
vblock
Ë=
VC_MAX
);

644 i‡(
vblock
 !(
wrôe_v≤
 / 
PAGES_PER_BLK
))

646 
wrôe_v≤
 = 
vblock
 * 
PAGES_PER_BLK
;

650 
wrôe_v≤
++;

652 
	`£t_√w_wrôe_v≤
(
b™k
, 
wrôe_v≤
);

654  
wrôe_v≤
;

655 
	}
}

656 
BOOL32
 
	$is_bad_block
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblk_off£t
)

658 i‡(
	`t°_bô_døm
(
BAD_BLK_BMP_ADDR
 + 
b™k
*(
VBLKS_PER_BANK
/8 + 1), 
vblk_off£t
Ë=
FALSE
)

660  
FALSE
;

662  
TRUE
;

663 
	}
}

668 
	$g¨bage_cﬁÀ˘i⁄
(
UINT32
 c⁄° 
b™k
)

670 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

671 
g_·l_°©i°ics
[
b™k
].
gc_˙t
++;

673 
UINT32
 
§c_Õn
;

674 
UINT32
 
vt_vblock
;

675 
UINT32
 
‰ì_v≤
;

676 
UINT32
 
vcou¡
;

677 
UINT32
 
§c_∑ge
;

678 
UINT32
 
gc_vblock
;

680 
g_·l_°©i°ics
[
b™k
].
gc_˙t
++;

682 
vt_vblock
 = 
	`gë_vt_vblock
(
b™k
);

683 
vcou¡
 = 
	`gë_vcou¡
(
b™k
, 
vt_vblock
);

684 
gc_vblock
 = 
	`gë_gc_vblock
(
b™k
);

685 
‰ì_v≤
 = 
gc_vblock
 * 
PAGES_PER_BLK
;

689 
	`ASSERT
(
vt_vblock
 !
gc_vblock
);

690 
	`ASSERT
(
vt_vblock
 >
META_BLKS_PER_BANK
 && vt_vblock < 
VBLKS_PER_BANK
);

691 
	`ASSERT
(
vcou¡
 < (
PAGES_PER_BLK
 - 1));

692 
	`ASSERT
(
	`gë_vcou¡
(
b™k
, 
gc_vblock
Ë=
VC_MAX
);

693 
	`ASSERT
(!
	`is_bad_block
(
b™k
, 
gc_vblock
));

697 
	`«nd_∑ge_±ªad
(
b™k
, 
vt_vblock
, 
PAGES_PER_BLK
 - 1, 0,

698 (((
UINT32
Ë* 
PAGES_PER_BLK
 + 
BYTES_PER_SECTOR
 - 1 ) / BYTES_PER_SECTOR), 
	`FTL_BUF
(
b™k
), 
RETURN_WHEN_DONE
);

699 
	`mem_c›y
(
g_misc_mëa
[
b™k
].
Õn_li°_of_cur_vblock
, 
	`FTL_BUF
(b™k), (
UINT32
Ë* 
PAGES_PER_BLK
);

701 
§c_∑ge
 = 0; src_∑gê< (
PAGES_PER_BLK
 - 1); src_page++)

704 
§c_Õn
 = 
	`gë_Õn
(
b™k
, 
§c_∑ge
);

705 
	`CHECK_VPAGE
(
	`gë_v≤
(
§c_Õn
));

708 i‡(
	`gë_v≤
(
§c_Õn
) !=

709 ((
vt_vblock
 * 
PAGES_PER_BLK
Ë+ 
§c_∑ge
))

714 
	`ASSERT
(
	`gë_Õn
(
b™k
, 
§c_∑ge
Ë!
INVALID
);

715 
	`CHECK_LPAGE
(
§c_Õn
);

718 
	`«nd_∑ge_c›yback
(
b™k
,

719 
vt_vblock
,

720 
§c_∑ge
,

721 
‰ì_v≤
 / 
PAGES_PER_BLK
,

722 
‰ì_v≤
 % 
PAGES_PER_BLK
);

723 
	`ASSERT
((
‰ì_v≤
 / 
PAGES_PER_BLK
Ë=
gc_vblock
);

725 
	`£t_v≤
(
§c_Õn
, 
‰ì_v≤
);

726 
	`£t_Õn
(
b™k
, (
‰ì_v≤
 % 
PAGES_PER_BLK
), 
§c_Õn
);

728 
‰ì_v≤
++;

730 #i‡
OPTION_ENABLE_ASSERT


731 i‡(
vcou¡
 == 0)

733 
	`ASSERT
(
‰ì_v≤
 =(
gc_vblock
 * 
PAGES_PER_BLK
));

737 
	`«nd_block_îa£
(
b™k
, 
vt_vblock
);

738 
	`ASSERT
((
‰ì_v≤
 % 
PAGES_PER_BLK
) < (PAGES_PER_BLK - 2));

739 
	`ASSERT
((
‰ì_v≤
 % 
PAGES_PER_BLK
 =
vcou¡
));

744 
	`£t_vcou¡
(
b™k
, 
vt_vblock
, 
VC_MAX
);

745 
	`£t_vcou¡
(
b™k
, 
gc_vblock
, 
vcou¡
);

746 
	`£t_√w_wrôe_v≤
(
b™k
, 
‰ì_v≤
);

747 
	`£t_gc_vblock
(
b™k
, 
vt_vblock
);

748 
	`dec_fuŒ_blk_˙t
(
b™k
);

750 
	}
}

756 
UINT32
 
	$gë_vt_vblock
(
UINT32
 c⁄° 
b™k
)

758 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

760 
UINT32
 
vblock
;

763 
vblock
 = 
	`mem_£¨ch_mö_max
(
VCOUNT_ADDR
 + (
b™k
 * 
VBLKS_PER_BANK
 * (
UINT16
)),

764 (
UINT16
),

765 
VBLKS_PER_BANK
,

766 
MU_CMD_SEARCH_MIN_DRAM
);

768 
	`ASSERT
(
	`is_bad_block
(
b™k
, 
vblock
Ë=
FALSE
);

769 
	`ASSERT
(
vblock
 >
META_BLKS_PER_BANK
 && vblock < 
VBLKS_PER_BANK
);

770 
	`ASSERT
(
	`gë_vcou¡
(
b™k
, 
vblock
Ë< (
PAGES_PER_BLK
 - 1));

772  
vblock
;

773 
	}
}

774 
	$f‹m©
()

776 
UINT32
 
b™k
, 
vblock
, 
vcou¡_vÆ
;

778 
	`ASSERT
(
NUM_MISC_META_SECT
 > 0);

779 
	`ASSERT
(
NUM_VCOUNT_SECT
 > 0);

781 
	`u¨t_¥ötf
("TŸÆ FTL DRAM mëad©®size: %d KB", 
DRAM_BYTES_OTHER
 / 1024);

783 
	`u¨t_¥ötf
("VBLKS_PER_BANK: %d", 
VBLKS_PER_BANK
);

784 
	`u¨t_¥ötf
("LBLKS_PER_BANK: %d", 
NUM_LPAGES
 / 
PAGES_PER_BLK
 / 
NUM_BANKS
);

785 
	`u¨t_¥ötf
("META_BLKS_PER_BANK: %d", 
META_BLKS_PER_BANK
);

788 
	`u¨t_¥ötf
("\n\¿SECTORS_PER_PAGE : %d", 
SECTORS_PER_PAGE
);

791 
	`u¨t_¥ötf
("NUM_LPAGES : %d", 
NUM_LPAGES
);

792 
	`u¨t_¥ötf
("VBLKS_PER_BANK : %d", 
VBLKS_PER_BANK
);

793 
	`u¨t_¥ötf
("PAGES_PER_BLK : %d", 
PAGES_PER_BLK
);

798 
	`mem_£t_døm
(
PAGE_MAP_ADDR
, 
NULL
, 
PAGE_MAP_BYTES
);

799 
	`mem_£t_døm
(
VCOUNT_ADDR
, 
NULL
, 
VCOUNT_BYTES
);

800 
	`mem_£t_døm
(
BLOCK_MAP_ADDR
, 
NULL
, 
BLOCK_MAP_BYTES
);

801 
	`mem_£t_døm
(
BLOCK_VCOUNT_ADDR
, 
NULL
, 
BLOCK_VCOUNT_BYTES
);

804 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

806 
	`mem£t
(
g_misc_mëa
[
b™k
].
block_bôm≠
, 0, (
NUM_BMAP_BLOCK
 * 
PAGES_PER_BLK
 / 8Ë* (
UINT32
));

813 
vblock
 = 
MISCBLK_VBN
; vblock < 
VBLKS_PER_BANK
; vblock++)

815 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

817 
vcou¡_vÆ
 = 
VC_MAX
;

818 i‡(
	`is_bad_block
(
b™k
, 
vblock
Ë=
FALSE
)

820 
	`«nd_block_îa£
(
b™k
, 
vblock
);

821 
vcou¡_vÆ
 = 0;

823 
	`wrôe_døm_16
(
VCOUNT_ADDR
 + ((
b™k
 * 
VBLKS_PER_BANK
Ë+ 
vblock
Ë* (
UINT16
),

824 
vcou¡_vÆ
);

830 
	`öô_mëad©a_§am
();

833 
	`loggög_pm≠_èbÀ
();

834 
	`loggög_misc_mëad©a
();

836 
	`wrôe_f‹m©_m¨k
();

837 
	`Àd
(1);

838 
	`u¨t_¥öt
("format complete");

839 
	}
}

840 
	$öô_mëad©a_§am
()

842 
UINT32
 
b™k
;

843 
UINT32
 
vblock
;

844 
UINT32
 
m≠blk_lbn
;

849 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

851 
g_misc_mëa
[
b™k
].
‰ì_blk_˙t
 = 
VBLKS_PER_BANK
 - 
META_BLKS_PER_BANK
 - 
NUM_BMAP_BLOCK
;

852 
g_misc_mëa
[
b™k
].
‰ì_blk_˙t
 -
	`gë_bad_blk_˙t
(bank);

853 
g_misc_mëa
[
b™k
].
‰ì_blk_˙t_block
 = 
NUM_BMAP_BLOCK
 - 10;

855 
	`wrôe_døm_16
(
VCOUNT_ADDR
 + ((
b™k
 * 
VBLKS_PER_BANK
Ë+ 0Ë* (
UINT16
), 
VC_MAX
);

856 
	`wrôe_døm_16
(
VCOUNT_ADDR
 + ((
b™k
 * 
VBLKS_PER_BANK
Ë+ 1Ë* (
UINT16
), 
VC_MAX
);

863 
	`£t_miscblk_v≤
(
b™k
, 
MISCBLK_VBN
 * 
PAGES_PER_BLK
 - 1);

864 
	`ASSERT
(
	`is_bad_block
(
b™k
, 
MISCBLK_VBN
Ë=
FALSE
);

866 
vblock
 = 
MISCBLK_VBN
;

871 
m≠blk_lbn
 = 0;

872 
m≠blk_lbn
 < 
MAPBLKS_PER_BANK
)

874 
vblock
++;

875 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

876 i‡(
	`is_bad_block
(
b™k
, 
vblock
Ë=
FALSE
)

878 
	`£t_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
, 
vblock
 * 
PAGES_PER_BLK
);

879 
	`wrôe_døm_16
(
VCOUNT_ADDR
 + ((
b™k
 * 
VBLKS_PER_BANK
Ë+ 
vblock
Ë* (
UINT16
), 
VC_MAX
);

880 
m≠blk_lbn
++;

894 
vblock
++;

896 
	`wrôe_døm_16
(
VCOUNT_ADDR
 + ((
b™k
 * 
VBLKS_PER_BANK
Ë+ 
vblock
Ë* (
UINT16
), 
VC_MAX
);

897 
	`£t_vcou¡
(
b™k
, 
vblock
, 
VC_MAX
);

899 
	`wrôe_døm_16
(
BLOCK_VCOUNT_ADDR
 + ((
b™k
 * 
NUM_BMAP_BLOCK
Ë+ 
vblock
Ë* (
UINT16
), 
VC_MAX
);

900 
	`£t_gc_vblock_block
(
b™k
, 
vblock
);

902 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

903 }
	`is_bad_block
(
b™k
, 
vblock
Ë=
TRUE
);

911 
vblock
++;

912 
	`£t_vcou¡
(
b™k
, 
vblock
, 
VC_MAX
);

914 
	`£t_√w_wrôe_vbn
(
b™k
, 
vblock
);

915 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

916 }
	`is_bad_block
(
b™k
, 
vblock
Ë=
TRUE
);

918 
UINT32
 
fú°_bm≠_vblock
 = 
vblock
;

922 
vblock
++;

924 
	`£t_vcou¡
(
b™k
, 
vblock
, 
VC_MAX
);

926 if(
	`is_bad_block
(
b™k
, 
vblock
Ë=
TRUE
Ë
fú°_bm≠_vblock
++;

927 }
vblock
 !
fú°_bm≠_vblock
 + 
NUM_BMAP_BLOCK
);

929 
œ°_bm≠_block
[
b™k
]=
vblock
;

940 
vblock
++;

942 
	`wrôe_døm_16
(
VCOUNT_ADDR
 + ((
b™k
 * 
VBLKS_PER_BANK
Ë+ 
vblock
Ë* (
UINT16
), 
VC_MAX
);

944 
	`£t_gc_vblock
(
b™k
, 
vblock
);

946 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

947 }
	`is_bad_block
(
b™k
, 
vblock
Ë=
TRUE
);

954 
vblock
++;

956 
	`£t_√w_wrôe_v≤
(
b™k
, 
vblock
 * 
PAGES_PER_BLK
);

957 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

958 }
	`is_bad_block
(
b™k
, 
vblock
Ë=
TRUE
);

961 
	}
}

963 
	$loggög_misc_mëad©a
()

965 
UINT32
 
misc_mëa_byãs
 = 
NUM_MISC_META_SECT
 * 
BYTES_PER_SECTOR
;

966 
UINT32
 
vcou¡_addr
 = 
VCOUNT_ADDR
;

967 
UINT32
 
vcou¡_byãs
 = 
NUM_VCOUNT_SECT
 * 
BYTES_PER_SECTOR
;

968 
UINT32
 
vcou¡_bound¨y
 = 
VCOUNT_ADDR
 + 
VCOUNT_BYTES
;

969 
UINT32
 
b™k
;

971 
	`Êash_föish
();

973 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

975 
	`öc_miscblk_v≤
(
b™k
);

978 i‡((
	`gë_miscblk_v≤
(
b™k
Ë/ 
PAGES_PER_BLK
Ë!
MISCBLK_VBN
)

980 
	`«nd_block_îa£
(
b™k
, 
MISCBLK_VBN
);

981 
	`£t_miscblk_v≤
(
b™k
, 
MISCBLK_VBN
 * 
PAGES_PER_BLK
);

984 
	`mem_c›y
(
	`FTL_BUF
(
b™k
), &
g_misc_mëa
[b™k], 
misc_mëa_byãs
);

987 i‡(
vcou¡_addr
 <
vcou¡_bound¨y
)

989 
	`mem_c›y
(
	`FTL_BUF
(
b™k
Ë+ 
misc_mëa_byãs
, 
vcou¡_addr
, 
vcou¡_byãs
);

990 
vcou¡_addr
 +
vcou¡_byãs
;

994 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

996 
	`«nd_∑ge_±¥ogøm
(
b™k
,

997 
	`gë_miscblk_v≤
(
b™k
Ë/ 
PAGES_PER_BLK
,

998 
	`gë_miscblk_v≤
(
b™k
Ë% 
PAGES_PER_BLK
,

1000 
NUM_MISC_META_SECT
 + 
NUM_VCOUNT_SECT
,

1001 
	`FTL_BUF
(
b™k
));

1003 
	`Êash_föish
();

1004 
	}
}

1005 
	$loggög_pm≠_èbÀ
()

1007 
UINT32
 
pm≠_addr
 = 
PAGE_MAP_ADDR
;

1008 
UINT32
 
pm≠_byãs
 = 
BYTES_PER_PAGE
;

1009 
UINT32
 
m≠blk_v≤
;

1010 
UINT32
 
b™k
;

1011 
UINT32
 
pm≠_bound¨y
 = 
PAGE_MAP_ADDR
 + 
PAGE_MAP_BYTES
;

1012 
BOOL32
 
föished
 = 
FALSE
;

1014 
UINT32
 
m≠blk_lbn
 = 0; m≠blk_lb¿< 
MAPBLKS_PER_BANK
; mapblk_lbn++)

1016 
	`Êash_föish
();

1018 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

1020 i‡(
föished
)

1024 i‡(
pm≠_addr
 >
pm≠_bound¨y
)

1026 
föished
 = 
TRUE
;

1029 i‡(
pm≠_addr
 + 
BYTES_PER_PAGE
 >
pm≠_bound¨y
)

1031 
föished
 = 
TRUE
;

1032 
pm≠_byãs
 = (
pm≠_bound¨y
 - 
pm≠_addr
 + 
BYTES_PER_SECTOR
 - 1) / BYTES_PER_SECTOR * BYTES_PER_SECTOR ;

1034 
	`öc_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
);

1036 
m≠blk_v≤
 = 
	`gë_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
);

1039 i‡((
m≠blk_v≤
 % 
PAGES_PER_BLK
) == 0)

1042 
	`«nd_block_îa£
(
b™k
, (
m≠blk_v≤
 - 1Ë/ 
PAGES_PER_BLK
);

1045 
	`£t_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
, ((
m≠blk_v≤
 - 1Ë/ 
PAGES_PER_BLK
) * PAGES_PER_BLK);

1046 
m≠blk_v≤
 = 
	`gë_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
);

1049 
	`mem_c›y
(
	`FTL_BUF
(
b™k
), 
pm≠_addr
, 
pm≠_byãs
);

1052 
	`«nd_∑ge_±¥ogøm
(
b™k
,

1053 
m≠blk_v≤
 / 
PAGES_PER_BLK
,

1054 
m≠blk_v≤
 % 
PAGES_PER_BLK
,

1056 
pm≠_byãs
 / 
BYTES_PER_SECTOR
,

1057 
	`FTL_BUF
(
b™k
));

1058 
pm≠_addr
 +
pm≠_byãs
;

1060 i‡(
föished
)

1065 
	`Êash_föish
();

1066 
	}
}

1068 
	$lﬂd_mëad©a
()

1070 
	`lﬂd_misc_mëad©a
();

1071 
	`lﬂd_pm≠_èbÀ
();

1072 
	}
}

1074 
	$lﬂd_misc_mëad©a
()

1076 
UINT32
 
misc_mëa_byãs
 = 
NUM_MISC_META_SECT
 * 
BYTES_PER_SECTOR
;

1077 
UINT32
 
vcou¡_byãs
 = 
NUM_VCOUNT_SECT
 * 
BYTES_PER_SECTOR
;

1078 
UINT32
 
vcou¡_addr
 = 
VCOUNT_ADDR
;

1079 
UINT32
 
vcou¡_bound¨y
 = 
VCOUNT_ADDR
 + 
VCOUNT_BYTES
;

1081 
UINT32
 
lﬂd_Êag
 = 0;

1082 
UINT32
 
b™k
, 
∑ge_num
;

1083 
UINT32
 
lﬂd_˙t
 = 0;

1085 
	`Êash_föish
();

1087 
	`dißbÀ_úq
();

1088 
	`Êash_˛ór_úq
();

1091 
∑ge_num
 = 
PAGES_PER_BLK
 - 1;Öage_num !((
UINT32
) -1);Öage_num--)

1093 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

1095 i‡(
lﬂd_Êag
 & (0x1 << 
b™k
))

1100 
	`«nd_∑ge_±ªad
(
b™k
,

1101 
MISCBLK_VBN
,

1102 
∑ge_num
,

1104 
NUM_MISC_META_SECT
 + 
NUM_VCOUNT_SECT
,

1105 
	`FTL_BUF
(
b™k
),

1106 
RETURN_ON_ISSUE
);

1108 
	`Êash_föish
();

1110 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

1112 i‡(!(
lﬂd_Êag
 & (0x1 << 
b™k
)Ë&& !(
	`BSP_INTR
(b™kË& 
FIRQ_ALL_FF
))

1114 
lﬂd_Êag
 =Üﬂd_Êag | (0x1 << 
b™k
);

1115 
lﬂd_˙t
++;

1117 
	`CLR_BSP_INTR
(
b™k
, 0xFF);

1120 
	`ASSERT
(
lﬂd_˙t
 =
NUM_BANKS
);

1122 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

1125 
	`mem_c›y
(&
g_misc_mëa
[
b™k
], 
	`FTL_BUF
(b™k), (
misc_mëad©a
));

1128 i‡(
vcou¡_addr
 <
vcou¡_bound¨y
)

1130 
	`mem_c›y
(
vcou¡_addr
, 
	`FTL_BUF
(
b™k
Ë+ 
misc_mëa_byãs
, 
vcou¡_byãs
);

1131 
vcou¡_addr
 +
vcou¡_byãs
;

1135 
	`íabÀ_úq
();

1136 
	}
}

1137 
	$lﬂd_pm≠_èbÀ
()

1139 
UINT32
 
pm≠_addr
 = 
PAGE_MAP_ADDR
;

1140 
UINT32
 
ãmp_∑ge_addr
;

1141 
UINT32
 
pm≠_byãs
 = 
BYTES_PER_PAGE
;

1142 
UINT32
 
pm≠_bound¨y
 = 
PAGE_MAP_ADDR
 + (
NUM_LPAGES
 * (UINT32));

1143 
UINT32
 
m≠blk_lbn
, 
b™k
;

1144 
BOOL32
 
föished
 = 
FALSE
;

1146 
	`Êash_föish
();

1148 
m≠blk_lbn
 = 0; m≠blk_lb¿< 
MAPBLKS_PER_BANK
; mapblk_lbn++)

1150 
ãmp_∑ge_addr
 = 
pm≠_addr
;

1152 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

1154 i‡(
föished
)

1158 i‡(
pm≠_addr
 >
pm≠_bound¨y
)

1160 
föished
 = 
TRUE
;

1163 i‡(
pm≠_addr
 + 
BYTES_PER_PAGE
 >
pm≠_bound¨y
)

1165 
föished
 = 
TRUE
;

1166 
pm≠_byãs
 = (
pm≠_bound¨y
 - 
pm≠_addr
 + 
BYTES_PER_SECTOR
 - 1) / BYTES_PER_SECTOR * BYTES_PER_SECTOR;

1169 
	`«nd_∑ge_±ªad
(
b™k
,

1170 
	`gë_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
Ë/ 
PAGES_PER_BLK
,

1171 
	`gë_m≠blk_v≤
(
b™k
, 
m≠blk_lbn
Ë% 
PAGES_PER_BLK
,

1173 
pm≠_byãs
 / 
BYTES_PER_SECTOR
,

1174 
	`FTL_BUF
(
b™k
),

1175 
RETURN_ON_ISSUE
);

1176 
pm≠_addr
 +
pm≠_byãs
;

1178 
	`Êash_föish
();

1180 
pm≠_byãs
 = 
BYTES_PER_PAGE
;

1181 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

1183 i‡(
ãmp_∑ge_addr
 >
pm≠_bound¨y
)

1187 i‡(
ãmp_∑ge_addr
 + 
BYTES_PER_PAGE
 >
pm≠_bound¨y
)

1189 
pm≠_byãs
 = (
pm≠_bound¨y
 - 
ãmp_∑ge_addr
 + 
BYTES_PER_SECTOR
 - 1) / BYTES_PER_SECTOR * BYTES_PER_SECTOR;

1192 
	`mem_c›y
(
ãmp_∑ge_addr
, 
	`FTL_BUF
(
b™k
), 
pm≠_byãs
);

1194 
ãmp_∑ge_addr
 +
pm≠_byãs
;

1196 i‡(
föished
)

1201 
	}
}

1202 
	$wrôe_f‹m©_m¨k
()

1206 #ifde‡
__GNUC__


1207 
UINT32
 
size_of_fúmw¨e_image
;

1208 
UINT32
 
fúmw¨e_image_∑ges
 = (((UINT32Ë(&
size_of_fúmw¨e_image
)Ë+ 
BYTES_PER_FW_PAGE
 - 1) / BYTES_PER_FW_PAGE;

1210 
UINT32
 
Image$$ER_CODE$$RO$$Lígth
;

1211 
UINT32
 
Image$$ER_RW$$RW$$Lígth
;

1212 
UINT32
 
fúmw¨e_image_byãs
 = ((UINT32Ë&
Image$$ER_CODE$$RO$$Lígth
Ë+ ((UINT32Ë&
Image$$ER_RW$$RW$$Lígth
);

1213 
UINT32
 
fúmw¨e_image_∑ges
 = (
fúmw¨e_image_byãs
 + 
BYTES_PER_FW_PAGE
 - 1) / BYTES_PER_FW_PAGE;

1216 
UINT32
 
f‹m©_m¨k_∑ge_off£t
 = 
FW_PAGE_OFFSET
 + 
fúmw¨e_image_∑ges
;

1218 
	`mem_£t_døm
(
FTL_BUF_ADDR
, 0, 
BYTES_PER_SECTOR
);

1220 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN_PROG
);

1221 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(0));

1222 
	`SETREG
(
FCP_OPTION
, 
FO_E
 | 
FO_B_W_DRDY
);

1223 
	`SETREG
(
FCP_DMA_ADDR
, 
FTL_BUF_ADDR
);

1224 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_SECTOR
);

1225 
	`SETREG
(
FCP_COL
, 0);

1226 
	`SETREG
(
	`FCP_ROW_L
(0), 
f‹m©_m¨k_∑ge_off£t
);

1227 
	`SETREG
(
	`FCP_ROW_H
(0), 
f‹m©_m¨k_∑ge_off£t
);

1231 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

1234 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

1237 
	`BSP_FSM
(0Ë!
BANK_IDLE
);

1238 
	}
}

1239 
BOOL32
 
	$check_f‹m©_m¨k
()

1243 #ifde‡
__GNUC__


1244 
UINT32
 
size_of_fúmw¨e_image
;

1245 
UINT32
 
fúmw¨e_image_∑ges
 = (((UINT32Ë(&
size_of_fúmw¨e_image
)Ë+ 
BYTES_PER_FW_PAGE
 - 1) / BYTES_PER_FW_PAGE;

1247 
UINT32
 
Image$$ER_CODE$$RO$$Lígth
;

1248 
UINT32
 
Image$$ER_RW$$RW$$Lígth
;

1249 
UINT32
 
fúmw¨e_image_byãs
 = ((UINT32Ë&
Image$$ER_CODE$$RO$$Lígth
Ë+ ((UINT32Ë&
Image$$ER_RW$$RW$$Lígth
);

1250 
UINT32
 
fúmw¨e_image_∑ges
 = (
fúmw¨e_image_byãs
 + 
BYTES_PER_FW_PAGE
 - 1) / BYTES_PER_FW_PAGE;

1253 
UINT32
 
f‹m©_m¨k_∑ge_off£t
 = 
FW_PAGE_OFFSET
 + 
fúmw¨e_image_∑ges
;

1254 
UINT32
 
ãmp
;

1256 
	`Êash_˛ór_úq
();

1258 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

1259 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(0));

1260 
	`SETREG
(
FCP_OPTION
, 
FO_E
);

1261 
	`SETREG
(
FCP_DMA_ADDR
, 
FTL_BUF_ADDR
);

1262 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_SECTOR
);

1263 
	`SETREG
(
FCP_COL
, 0);

1264 
	`SETREG
(
	`FCP_ROW_L
(0), 
f‹m©_m¨k_∑ge_off£t
);

1265 
	`SETREG
(
	`FCP_ROW_H
(0), 
f‹m©_m¨k_∑ge_off£t
);

1269 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

1272 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

1275 
	`BSP_FSM
(0Ë!
BANK_IDLE
);

1278 
ãmp
 = 
	`BSP_INTR
(0Ë& 
FIRQ_ALL_FF
;

1281 
	`CLR_BSP_INTR
(0, 0xFF);

1283 i‡(
ãmp
 != 0)

1285  
FALSE
;

1289  
TRUE
;

1291 
	}
}

1294 
	$·l_i§
()

1296 
UINT32
 
b™k
;

1297 
UINT32
 
b•_öå_Êag
;

1299 
	`u¨t_¥öt
("BSP interrupt occured...");

1301 
	`SETREG
(
APB_INT_STS
, 
INTR_FLASH
);

1303 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++) {

1304 
	`BSP_FSM
(
b™k
Ë!
BANK_IDLE
);

1306 
b•_öå_Êag
 = 
	`BSP_INTR
(
b™k
);

1308 i‡(
b•_öå_Êag
 == 0) {

1311 
UINT32
 
fc
 = 
	`GETREG
(
	`BSP_CMD
(
b™k
));

1313 
	`CLR_BSP_INTR
(
b™k
, 
b•_öå_Êag
);

1316 i‡(
b•_öå_Êag
 & 
FIRQ_DATA_CORRUPT
) {

1317 
	`u¨t_¥ötf
("BSP i¡îru±áàb™k: 0x%x", 
b™k
);

1318 
	`u¨t_¥öt
("FIRQ_DATA_CORRUPT occured...");

1320 i‡(
b•_öå_Êag
 & (
FIRQ_BADBLK_H
 | 
FIRQ_BADBLK_L
)) {

1321 
	`u¨t_¥ötf
("BSP i¡îru±áàb™k: 0x%x", 
b™k
);

1322 i‡(
fc
 =
FC_COL_ROW_IN_PROG
 || f¯=
FC_IN_PROG
 || f¯=
FC_PROG
) {

1323 
	`u¨t_¥öt
("findÑuntime bad block when blockÖrogram...");

1326 
	`u¨t_¥ötf
("födÑu¡imêbad block whí blockÉø£...vblock #: %d", 
	`GETREG
(
	`BSP_ROW_H
(
b™k
)Ë/ 
PAGES_PER_BLK
);

1327 
	`ASSERT
(
fc
 =
FC_ERASE
);

1331 
	}
}

1370 
UINT32
 
	$assign_√w_wrôe_vbn
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
Õn
)

1372 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

1374 
UINT32
 
wrôe_vbn
;

1375 
UINT32
 
vblock
;

1377 
wrôe_vbn
 = 
	`gë_cur_wrôe_vbn
(
b™k
);

1378 
vblock
 = 
wrôe_vbn
;

1381 if((((
g_misc_mëa
[
b™k
].
block_bôm≠
[
wrôe_vbn
][(
Õn
 % 
PAGES_PER_BLK
)/8]Ë>> (÷≤ % PAGES_PER_BLK)%8))*4 & 0x00000001Ë|| !(
	`gë_vcou¡_block
(bank,Üpn/PAGES_PER_BLK) < PAGES_PER_BLK - 1))

1384 
	`mem_c›y
(
	`FTL_BUF
(
b™k
), 
g_misc_mëa
[b™k].
Õn_li°_of_cur_vblock_block
, (
UINT32
Ë* 
PAGES_PER_BLK
);

1386 
	`«nd_∑ge_±¥ogøm
(
b™k
, 
vblock
, 
PAGES_PER_BLK
 - 1, 0,

1387 (((
UINT32
Ë* 
PAGES_PER_BLK
 + 
BYTES_PER_SECTOR
 - 1 ) / BYTES_PER_SECTOR), 
	`FTL_BUF
(
b™k
));

1389 
	`mem_£t_§am
(
g_misc_mëa
[
b™k
].
Õn_li°_of_cur_vblock_block
, 0x00000000, (
UINT32
Ë* 
PAGES_PER_BLK
);

1391 
	`öc_fuŒ_blk_˙t_block
(
b™k
);

1392 i‡(
	`is_fuŒ_Æl_blks_block
(
b™k
))

1394 
	`g¨bage_cﬁÀ˘i⁄_block
(
b™k
);

1395  
	`gë_cur_wrôe_vbn
(
b™k
);

1400 
vblock
++;

1401 
	`ASSERT
(
vblock
 !
œ°_bm≠_block
[
b™k
] - 1);

1402 }
	`gë_vcou¡_block
(
b™k
, 
vblock
Ë=
VC_MAX
 || 
	`is_bad_block
(bank, vblock));

1406 i‡(
vblock
 !
wrôe_vbn
)

1408 
wrôe_vbn
 = 
vblock
;

1412 
wrôe_vbn
++;

1416 
	`£t_√w_wrôe_vbn
(
b™k
, 
wrôe_vbn
);

1417  
wrôe_vbn
;

1418 
	}
}

1421 
	$·l_ªad_block
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
)

1423 
UINT32
 
ªmaö_£˘s
, 
num_£˘‹s_to_ªad
;

1424 
UINT32
 
Õn
, 
£˘_off£t
;

1425 
UINT32
 
b™k
, 
v≤
;

1427 
Õn
 = 
lba
 / 
SECTORS_PER_PAGE
;

1428 
£˘_off£t
 = 
lba
 % 
SECTORS_PER_PAGE
;

1429 
ªmaö_£˘s
 = 
num_£˘‹s
;

1431 
ªmaö_£˘s
 != 0)

1433 i‡((
£˘_off£t
 + 
ªmaö_£˘s
Ë< 
SECTORS_PER_PAGE
)

1435 
num_£˘‹s_to_ªad
 = 
ªmaö_£˘s
;

1439 
num_£˘‹s_to_ªad
 = 
SECTORS_PER_PAGE
 - 
£˘_off£t
;

1441 
b™k
 = 
	`gë_num_b™k
(
Õn
);

1442 
v≤
 = 
	`gë_vbn
(
b™k
 * 
NUM_BMAP_BLOCK
 + 
Õn
 / 
PAGES_PER_BLK
);

1443 
	`u¨t_¥ötf
("Ród from b™k %d\n", 
b™k
);

1444 
	`u¨t_¥ötf
("RódÖagê‰omÜb¿%d,Ü≤ %d\n", 
v≤
, 
Õn
 / 
PAGES_PER_BLK
);

1445 i‡(
v≤
 !
NULL
)

1447 
	`«nd_∑ge_±ªad_to_ho°
(
b™k
,

1448 
v≤
,

1449 
Õn
 % 
PAGES_PER_BLK
,

1450 
£˘_off£t
,

1451 
num_£˘‹s_to_ªad
);

1456 
UINT32
 
√xt_ªad_buf_id
 = (
g_·l_ªad_buf_id
 + 1Ë% 
NUM_RD_BUFFERS
;

1458 #i‡
OPTION_FTL_TEST
 == 0

1459 
√xt_ªad_buf_id
 =
	`GETREG
(
SATA_RBUF_PTR
));

1466 
	`mem_£t_døm
(
	`RD_BUF_PTR
(
g_·l_ªad_buf_id
Ë+ 
£˘_off£t
*
BYTES_PER_SECTOR
,

1467 0xFFFFFFFF, 
num_£˘‹s_to_ªad
*
BYTES_PER_SECTOR
);

1469 
	`Êash_föish
();

1471 
	`SETREG
(
BM_STACK_RDSET
, 
√xt_ªad_buf_id
);

1472 
	`SETREG
(
BM_STACK_RESET
, 0x02);

1474 
g_·l_ªad_buf_id
 = 
√xt_ªad_buf_id
;

1476 
£˘_off£t
 = 0;

1477 
ªmaö_£˘s
 -
num_£˘‹s_to_ªad
;

1478 
Õn
++;

1480 
	`u¨t_¥ötf
("read function success");

1481 
	}
}

1487 
	$·l_wrôe_block
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
)

1489 
UINT32
 
ªmaö_£˘s
, 
num_£˘‹s_to_wrôe
;

1490 
UINT32
 
Õn
, 
£˘_off£t
;

1492 
Õn
 = 
lba
 / 
SECTORS_PER_PAGE
;

1493 
£˘_off£t
 = 
lba
 % 
SECTORS_PER_PAGE
;

1494 
ªmaö_£˘s
 = 
num_£˘‹s
;

1495 
	`u¨t_¥ötf
("----------------------------------------------------------------------");

1496 
	`u¨t_¥ötf
("lb®: %d,Õ¿: %d",
lba
,
Õn
);

1497 
ªmaö_£˘s
 != 0)

1499 i‡((
£˘_off£t
 + 
ªmaö_£˘s
Ë< 
SECTORS_PER_PAGE
)

1501 
num_£˘‹s_to_wrôe
 = 
ªmaö_£˘s
;

1505 
num_£˘‹s_to_wrôe
 = 
SECTORS_PER_PAGE
 - 
£˘_off£t
;

1508 
	`wrôe_∑ge_block
(
Õn
, 
£˘_off£t
, 
num_£˘‹s_to_wrôe
);

1510 
£˘_off£t
 = 0;

1511 
ªmaö_£˘s
 -
num_£˘‹s_to_wrôe
;

1512 
Õn
++;

1514 
	}
}

1517 
	$wrôe_∑ge_block
(
UINT32
 c⁄° 
Õn
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
)

1519 
	`CHECK_LBLOCK
(
Õn
 / 
PAGES_PER_BLK
);

1520 
	`ASSERT
(
£˘_off£t
 < 
SECTORS_PER_PAGE
);

1521 
	`ASSERT
(
num_£˘‹s
 > 0 &&Çum_£˘‹†<
SECTORS_PER_PAGE
);

1523 
UINT32
 
b™k
, 
ﬁd_vbn
, 
√w_vbn
;

1524 
UINT32
 
vblock
, 
∑ge_num
, 
∑ge_off£t
, 
cﬁumn_˙t
;

1525 
UINT32
 
lbn
 = 
Õn
 / 
PAGES_PER_BLK
;

1528 
b™k
 = 
	`gë_num_b™k
(
Õn
);

1530 
∑ge_off£t
 = 
£˘_off£t
;

1531 
cﬁumn_˙t
 = 
num_£˘‹s
;

1532 
∑ge_num
 = 
Õn
 % 
PAGES_PER_BLK
;

1534 
√w_vbn
 = 
	`assign_√w_wrôe_vbn
(
b™k
, 
Õn
);

1535 
ﬁd_vbn
 = 
	`gë_vbn
(
lbn
);

1537 
g_·l_°©i°ics
[
b™k
].
∑ge_wcou¡
++;

1540 i‡(((
g_misc_mëa
[
b™k
].
block_bôm≠
[
√w_vbn
][(
Õn
 % 
PAGES_PER_BLK
) / 8] >> (lpn % PAGES_PER_BLK) % 8)*4) & 0x00000001 == 1)

1542 
	`u¨t_¥ötf
("test");

1543 
UINT32
 
§c_lbn
;

1544 
UINT32
 
vt_vblock
;

1545 
UINT32
 
‰ì_v≤
;

1546 
UINT32
 
vcou¡
;

1547 
UINT32
 
§c_∑ge
;

1548 
UINT32
 
gc_vblock
;

1550 
g_·l_°©i°ics
[
b™k
].
gc_˙t
++;

1552 
vt_vblock
 = 
ﬁd_vbn
;

1553 
vcou¡
 = 
	`gë_vcou¡_block
(
b™k
, 
vt_vblock
);

1555 
gc_vblock
 = 
√w_vbn
;

1556 
‰ì_v≤
 = 
gc_vblock
 * 
PAGES_PER_BLK
;

1559 
§c_∑ge
 = 0; src_∑gê< (
PAGES_PER_BLK
 - 1); src_page++)

1562 
§c_lbn
 = 
	`gë_lbn
(
b™k
,
§c_∑ge
);

1565 i‡(
	`gë_vbn
(
§c_lbn
Ë!
vt_vblock
)

1573 
	`«nd_∑ge_c›yback
(
b™k
,

1574 
vt_vblock
,

1575 
§c_∑ge
,

1576 
‰ì_v≤
 / 
PAGES_PER_BLK
,

1577 
‰ì_v≤
 % 
PAGES_PER_BLK
);

1580 
	`£t_vbn
(
§c_lbn
, 
‰ì_v≤
 % 
PAGES_PER_BLK
);

1581 
	`£t_lbn
(
b™k
, (
‰ì_v≤
 % 
PAGES_PER_BLK
), 
§c_lbn
);

1583 
‰ì_v≤
++;

1586 
	`«nd_block_îa£
(
b™k
, 
vt_vblock
);

1589 
	`£t_vcou¡_block
(
b™k
, 
vt_vblock
, 
PAGES_PER_BLK
 - 1);

1590 
	`£t_vcou¡_block
(
b™k
, 
gc_vblock
, 
vcou¡
);

1594 
vblock
 = 
ﬁd_vbn
;

1605 i‡(
num_£˘‹s
 !
SECTORS_PER_PAGE
)

1610 i‡((
num_£˘‹s
 <8Ë&& (
∑ge_off£t
 != 0))

1613 
	`«nd_∑ge_ªad
(
b™k
,

1614 
vblock
,

1615 
∑ge_num
,

1616 
	`FTL_BUF
(
b™k
));

1618 i‡(
∑ge_off£t
 != 0)

1620 
	`mem_c›y
(
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
),

1621 
	`FTL_BUF
(
b™k
),

1622 
∑ge_off£t
 * 
BYTES_PER_SECTOR
);

1625 i‡((
∑ge_off£t
 + 
cﬁumn_˙t
Ë< 
SECTORS_PER_PAGE
)

1627 
UINT32
 c⁄° 
rhﬁe_ba£
 = (
∑ge_off£t
 + 
cﬁumn_˙t
Ë* 
BYTES_PER_SECTOR
;

1629 
	`mem_c›y
(
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
Ë+ 
rhﬁe_ba£
,

1630 
	`FTL_BUF
(
b™k
Ë+ 
rhﬁe_ba£
,

1631 
BYTES_PER_PAGE
 - 
rhﬁe_ba£
);

1638 i‡(
∑ge_off£t
 != 0)

1640 
	`«nd_∑ge_±ªad
(
b™k
,

1641 
vblock
,

1642 
∑ge_num
,

1644 
∑ge_off£t
,

1645 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
),

1646 
RETURN_ON_ISSUE
);

1649 i‡((
∑ge_off£t
 + 
cﬁumn_˙t
Ë< 
SECTORS_PER_PAGE
)

1651 
	`«nd_∑ge_±ªad
(
b™k
,

1652 
vblock
,

1653 
∑ge_num
,

1654 
∑ge_off£t
 + 
cﬁumn_˙t
,

1655 
SECTORS_PER_PAGE
 - (
∑ge_off£t
 + 
cﬁumn_˙t
),

1656 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
),

1657 
RETURN_ON_ISSUE
);

1662 
∑ge_off£t
 = 0;

1663 
cﬁumn_˙t
 = 
SECTORS_PER_PAGE
;

1666 
	`£t_vcou¡_block
(
b™k
, 
vblock
, 
	`gë_vcou¡_block
(bank, vblock) - 1);

1670 
vblock
 = 
√w_vbn
;

1671 
∑ge_num
 = 
Õn
 % 
PAGES_PER_BLK
;

1673 
	`u¨t_¥ötf
("Wrôêd©®tÿlb¿%d,Ü≤ %d, # b™k†%d\n", 
vblock
, 
∑ge_num
, 
NUM_BANKS
);

1676 
	`«nd_∑ge_±¥ogøm_‰om_ho°
(
b™k
,

1677 
vblock
,

1678 
∑ge_num
,

1679 
∑ge_off£t
,

1680 
cﬁumn_˙t
);

1682 
	`£t_lbn
(
b™k
, 
∑ge_num
, 
lbn
);

1683 
	`£t_vbn
(
b™k
 * 
NUM_BMAP_BLOCK
 + 
lbn
, 
√w_vbn
);

1684 
	`u¨t_¥ötf
("Gë vb¿%d\n", 
	`gë_vbn
(
lbn
));

1685 
	`£t_vcou¡_block
(
b™k
, 
vblock
, 
	`gë_vcou¡_block
(bank, vblock) + 1);

1686 
	`£t_√w_wrôe_vbn
(
b™k
, 
√w_vbn
);

1687 
	`u¨t_¥ötf
("lb¿: %d",
lbn
);

1688 
	`u¨t_¥ötf
("∑ge_num : %d",
∑ge_num
);

1689 
	`u¨t_¥ötf
("vb¿: %d",
√w_vbn
);

1692 
g_misc_mëa
[
b™k
].
block_bôm≠
[
√w_vbn
][(
Õn
 % 
PAGES_PER_BLK
) / 8] = g_misc_meta[bank].block_bitmap[new_vbn][(lpn % PAGES_PER_BLK) / 8] | (0x00000001 << ((lpn % PAGES_PER_BLK) % 8)*4);

1693 
	}
}

1700 
UINT32
 
	$gë_vbn
(
UINT32
 c⁄° 
lbn
)

1702 
	`CHECK_LBLOCK
(
lbn
);

1703  
	`ªad_døm_32
(
BLOCK_MAP_ADDR
 + 
lbn
 * (
UINT32
));

1704 
	}
}

1706 
	$£t_vbn
(
UINT32
 c⁄° 
lbn
, UINT32 c⁄° 
vbn
)

1708 
	`CHECK_LBLOCK
(
lbn
);

1709 
	`ASSERT
(
vbn
 < (
VBLKS_PER_BANK
 * 
NUM_BMAP_BLOCK
));

1711 
	`wrôe_døm_32
(
BLOCK_MAP_ADDR
 + 
lbn
 * (
UINT32
), 
vbn
);

1712 
	}
}

1715 
UINT32
 
	$gë_vcou¡_block
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
)

1717 
UINT32
 
vcou¡
;

1719 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

1721 
vcou¡
 = 
	`ªad_døm_16
(
BLOCK_VCOUNT_ADDR
 + (((
b™k
 * 
NUM_BMAP_BLOCK
Ë+ 
vblock
Ë* (
UINT16
)));

1722 
	`ASSERT
((
vcou¡
 < 
PAGES_PER_BLK
Ë|| (vcou¡ =
VC_MAX
));

1724  
vcou¡
;

1725 
	}
}

1727 
	$£t_vcou¡_block
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
vcou¡
)

1729 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

1730 
	`ASSERT
((
vcou¡
 < 
PAGES_PER_BLK
Ë|| (vcou¡ =
VC_MAX
));

1732 
	`wrôe_døm_16
(
BLOCK_VCOUNT_ADDR
 + (((
b™k
 * 
NUM_BMAP_BLOCK
Ë+ 
vblock
Ë* (
UINT16
)), 
vcou¡
);

1733 
	}
}

1741 
	$g¨bage_cﬁÀ˘i⁄_block
(
UINT32
 c⁄° 
b™k
)

1743 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

1744 
g_·l_°©i°ics
[
b™k
].
gc_˙t
++;

1746 
UINT32
 
§c_lbn
;

1747 
UINT32
 
vt_vblock
;

1748 
UINT32
 
‰ì_v≤
;

1749 
UINT32
 
vcou¡
;

1750 
UINT32
 
§c_∑ge
;

1751 
UINT32
 
gc_vblock
;

1753 
g_·l_°©i°ics
[
b™k
].
gc_˙t
++;

1755 
vt_vblock
 = 
	`gë_vt_vblock_block
(
b™k
);

1756 
vcou¡
 = 
	`gë_vcou¡_block
(
b™k
, 
vt_vblock
);

1757 
gc_vblock
 = 
	`gë_gc_vblock_block
(
b™k
);

1758 
‰ì_v≤
 = 
gc_vblock
 * 
PAGES_PER_BLK
;

1762 
	`ASSERT
(
vt_vblock
 !
gc_vblock
);

1763 
	`ASSERT
(
vcou¡
 < (
PAGES_PER_BLK
 - 1));

1764 
	`ASSERT
(
	`gë_vcou¡_block
(
b™k
, 
gc_vblock
Ë=
VC_MAX
);

1765 
	`ASSERT
(!
	`is_bad_block
(
b™k
, 
gc_vblock
));

1769 
	`«nd_∑ge_±ªad
(
b™k
, 
vt_vblock
, 
PAGES_PER_BLK
 - 1, 0,

1770 (((
UINT32
Ë* 
PAGES_PER_BLK
 + 
BYTES_PER_SECTOR
 - 1 ) / BYTES_PER_SECTOR), 
	`FTL_BUF
(
b™k
), 
RETURN_WHEN_DONE
);

1771 
	`mem_c›y
(
g_misc_mëa
[
b™k
].
Õn_li°_of_cur_vblock
, 
	`FTL_BUF
(b™k), (
UINT32
Ë* 
PAGES_PER_BLK
);

1773 
§c_∑ge
 = 0; src_∑gê< (
PAGES_PER_BLK
 - 1); src_page++)

1776 
§c_lbn
 = 
	`gë_lbn
(
b™k
,
§c_∑ge
);

1779 i‡(
	`gë_vbn
(
§c_lbn
Ë!
vt_vblock
)

1787 
	`«nd_∑ge_c›yback
(
b™k
,

1788 
vt_vblock
,

1789 
§c_∑ge
,

1790 
‰ì_v≤
 / 
PAGES_PER_BLK
,

1791 
‰ì_v≤
 % 
PAGES_PER_BLK
);

1794 
	`£t_vbn
(
§c_lbn
, 
‰ì_v≤
 % 
PAGES_PER_BLK
);

1795 
	`£t_lbn
(
b™k
, (
‰ì_v≤
 % 
PAGES_PER_BLK
), 
§c_lbn
);

1797 
‰ì_v≤
++;

1800 #i‡
OPTION_ENABLE_ASSERT


1801 i‡(
vcou¡
 == 0)

1803 
	`ASSERT
(
‰ì_v≤
 =(
gc_vblock
 * 
PAGES_PER_BLK
));

1807 
	`«nd_block_îa£
(
b™k
, 
vt_vblock
);

1808 
	`ASSERT
((
‰ì_v≤
 % 
PAGES_PER_BLK
) < (PAGES_PER_BLK - 2));

1809 
	`ASSERT
((
‰ì_v≤
 % 
PAGES_PER_BLK
 =
vcou¡
));

1811 
	`u¨t_¥ötf
("g¯∑gêcou¡ : %d", 
vcou¡
);

1814 
	`mem£t
(
g_misc_mëa
[
b™k
].
block_bôm≠
[
‰ì_v≤
 / 
PAGES_PER_BLK
], 0, (PAGES_PER_BLK / 8Ë* (
UINT32
));

1815 
	`£t_vcou¡_block
(
b™k
, 
vt_vblock
, 
VC_MAX
);

1816 
	`£t_vcou¡_block
(
b™k
, 
gc_vblock
, 
vcou¡
);

1817 
	`£t_√w_wrôe_vbn
(
b™k
, 
‰ì_v≤
 / 
PAGES_PER_BLK
);

1818 
	`£t_gc_vblock_block
(
b™k
, 
vt_vblock
);

1819 
	`dec_fuŒ_blk_˙t_block
(
b™k
);

1820 
	`u¨t_¥öt
("garbage_collectionÉnd");

1821 
	}
}

1830 
UINT32
 
	$gë_vt_vblock_block
(
UINT32
 c⁄° 
b™k
)

1832 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

1834 
UINT32
 
vblock
;

1837 
vblock
 = 
	`mem_£¨ch_mö_max
(
BLOCK_VCOUNT_ADDR
 + (
b™k
 * 
NUM_BMAP_BLOCK
 * (
UINT16
)),

1838 (
UINT16
),

1839 
NUM_BMAP_BLOCK
,

1840 
MU_CMD_SEARCH_MIN_DRAM
);

1842 
	`ASSERT
(
	`is_bad_block
(
b™k
, 
vblock
Ë=
FALSE
);

1843 
	`ASSERT
(
vblock
 < 
NUM_BMAP_BLOCK
);

1844 
	`ASSERT
(
	`gë_vcou¡_block
(
b™k
, 
vblock
Ë< (
PAGES_PER_BLK
 - 1));

1847  
vblock
;

1848 
	}
}

	@ftl_greedy/ftl.h

24 #i‚de‡
FTL_H


25 
	#FTL_H


	)

27 
	#NUM_BMAP_BLOCK
 500

	)

33 
	#NUM_RW_BUFFERS
 ((
DRAM_SIZE
 - 
DRAM_BYTES_OTHER
Ë/ 
BYTES_PER_PAGE
 - 1)

	)

34 
	#NUM_RD_BUFFERS
 (((
NUM_RW_BUFFERS
 / 8Ë+ 
NUM_BANKS
 - 1Ë/ NUM_BANKS * NUM_BANKS)

	)

35 
	#NUM_WR_BUFFERS
 (
NUM_RW_BUFFERS
 - 
NUM_RD_BUFFERS
)

	)

36 
	#NUM_COPY_BUFFERS
 
NUM_BANKS_MAX


	)

37 
	#NUM_FTL_BUFFERS
 
NUM_BANKS


	)

38 
	#NUM_HIL_BUFFERS
 1

	)

39 
	#NUM_TEMP_BUFFERS
 1

	)

41 
	#DRAM_BYTES_OTHER
 ((
NUM_COPY_BUFFERS
 + 
NUM_FTL_BUFFERS
 + 
NUM_HIL_BUFFERS
 + 
NUM_TEMP_BUFFERS
Ë* 
BYTES_PER_PAGE
 \

	)

42 + 
	gBAD_BLK_BMP_BYTES
 + 
	gPAGE_MAP_BYTES
 + 
	gVCOUNT_BYTES
)

44 
	#WR_BUF_PTR
(
BUF_ID
Ë(
WR_BUF_ADDR
 + ((
UINT32
)(BUF_ID)Ë* 
BYTES_PER_PAGE
)

	)

45 
	#WR_BUF_ID
(
BUF_PTR
Ë((((
UINT32
)BUF_PTRË- 
WR_BUF_ADDR
Ë/ 
BYTES_PER_PAGE
)

	)

46 
	#RD_BUF_PTR
(
BUF_ID
Ë(
RD_BUF_ADDR
 + ((
UINT32
)(BUF_ID)Ë* 
BYTES_PER_PAGE
)

	)

47 
	#RD_BUF_ID
(
BUF_PTR
Ë((((
UINT32
)BUF_PTRË- 
RD_BUF_ADDR
Ë/ 
BYTES_PER_PAGE
)

	)

49 
	#_COPY_BUF
(
RBANK
Ë(
COPY_BUF_ADDR
 + (RBANKË* 
BYTES_PER_PAGE
)

	)

50 
	#COPY_BUF
(
BANK
Ë
	`_COPY_BUF
(
	`REAL_BANK
(BANK))

	)

51 
	#FTL_BUF
(
BANK
Ë(
FTL_BUF_ADDR
 + ((BANKË* 
BYTES_PER_PAGE
))

	)

57 
	#RD_BUF_ADDR
 
DRAM_BASE


58 
	#RD_BUF_BYTES
 (
NUM_RD_BUFFERS
 * 
BYTES_PER_PAGE
)

	)

60 
	#WR_BUF_ADDR
 (
RD_BUF_ADDR
 + 
RD_BUF_BYTES
)

61 
	#WR_BUF_BYTES
 (
NUM_WR_BUFFERS
 * 
BYTES_PER_PAGE
)

	)

63 
	#COPY_BUF_ADDR
 (
WR_BUF_ADDR
 + 
WR_BUF_BYTES
)

64 
	#COPY_BUF_BYTES
 (
NUM_COPY_BUFFERS
 * 
BYTES_PER_PAGE
)

	)

66 
	#FTL_BUF_ADDR
 (
COPY_BUF_ADDR
 + 
COPY_BUF_BYTES
)

67 
	#FTL_BUF_BYTES
 (
NUM_FTL_BUFFERS
 * 
BYTES_PER_PAGE
)

	)

69 
	#HIL_BUF_ADDR
 (
FTL_BUF_ADDR
 + 
FTL_BUF_BYTES
)

70 
	#HIL_BUF_BYTES
 (
NUM_HIL_BUFFERS
 * 
BYTES_PER_PAGE
)

	)

72 
	#TEMP_BUF_ADDR
 (
HIL_BUF_ADDR
 + 
HIL_BUF_BYTES
)

73 
	#TEMP_BUF_BYTES
 (
NUM_TEMP_BUFFERS
 * 
BYTES_PER_PAGE
)

	)

75 
	#BAD_BLK_BMP_ADDR
 (
TEMP_BUF_ADDR
 + 
TEMP_BUF_BYTES
)

76 
	#BAD_BLK_BMP_BYTES
 (((
NUM_VBLKS
 / 8Ë+ 
DRAM_ECC_UNIT
 - 1Ë/ DRAM_ECC_UNIT * DRAM_ECC_UNIT)

	)

78 
	#PAGE_MAP_ADDR
 (
BAD_BLK_BMP_ADDR
 + 
BAD_BLK_BMP_BYTES
)

79 
	#PAGE_MAP_BYTES
 ((
NUM_LPAGES
 * (
UINT32
Ë+ 
BYTES_PER_SECTOR
 - 1Ë/ BYTES_PER_SECTOR * BYTES_PER_SECTOR)

	)

81 
	#VCOUNT_ADDR
 (
PAGE_MAP_ADDR
 + 
PAGE_MAP_BYTES
)

	)

82 
	#VCOUNT_BYTES
 ((
NUM_BANKS
 * 
VBLKS_PER_BANK
 * (
UINT16
Ë+ 
BYTES_PER_SECTOR
 - 1Ë/ BYTES_PER_SECTOR * BYTES_PER_SECTOR)

	)

84 
	#BLOCK_MAP_ADDR
 (
VCOUNT_ADDR
 + 
VCOUNT_BYTES
)

85 
	#BLOCK_MAP_BYTES
 ((
NUM_BANKS
 * 
NUM_BMAP_BLOCK
 * (
UINT32
Ë+ 
BYTES_PER_SECTOR
 - 1Ë/ BYTES_PER_SECTOR * BYTES_PER_SECTOR)

	)

87 
	#BLOCK_VCOUNT_ADDR
 (
BLOCK_MAP_ADDR
 + 
BLOCK_MAP_BYTES
)

	)

88 
	#BLOCK_VCOUNT_BYTES
 ((
NUM_BANKS
 * 
NUM_BMAP_BLOCK
 * (
UINT16
Ë+ 
BYTES_PER_SECTOR
 - 1Ë/ BYTES_PER_SECTOR * BYTES_PER_SECTOR)

	)

97 
·l_›í
();

98 
·l_ªad
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
);

99 
·l_wrôe
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
);

100 
·l_ã°_wrôe
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
num_£˘‹s
);

101 
·l_Êush
();

102 
·l_i§
();

	@include/bank.h

20 #i‚def 
BANK_H


21 
	#BANK_H


	)

25 
	#A0
 0x00

	)

26 
	#B0
 0x01

	)

27 
	#C0
 0x02

	)

28 
	#D0
 0x03

	)

29 
	#A1
 0x04

	)

30 
	#B1
 0x05

	)

31 
	#C1
 0x06

	)

32 
	#D1
 0x07

	)

33 
	#A2
 0x08

	)

34 
	#B2
 0x09

	)

35 
	#C2
 0x0A

	)

36 
	#D2
 0x0B

	)

37 
	#A3
 0x0C

	)

38 
	#B3
 0x0D

	)

39 
	#C3
 0x0E

	)

40 
	#D3
 0x0F

	)

41 
	#A4
 0x10

	)

42 
	#B4
 0x11

	)

43 
	#C4
 0x12

	)

44 
	#D4
 0x13

	)

45 
	#A5
 0x14

	)

46 
	#B5
 0x15

	)

47 
	#C5
 0x16

	)

48 
	#D5
 0x17

	)

49 
	#A6
 0x18

	)

50 
	#B6
 0x19

	)

51 
	#C6
 0x1A

	)

52 
	#D6
 0x1B

	)

53 
	#A7
 0x1C

	)

54 
	#B7
 0x1D

	)

55 
	#C7
 0x1E

	)

56 
	#D7
 0x1F

	)

59 
	#BMAP_4CH_8WY
 \

	)

61 
	gA0
, 
	gB0
, 
	gC0
, 
	gD0
, 
	gA1
, 
	gB1
, 
	gC1
, 
	gD1
, 
	gA2
, 
	gB2
, 
	gC2
, 
	gD2
, 
	gA3
, 
	gB3
, 
	gC3
, 
	gD3
, \

62 
	gA4
, 
	gB4
, 
	gC4
, 
	gD4
, 
	gA5
, 
	gB5
, 
	gC5
, 
	gD5
, 
	gA6
, 
	gB6
, 
	gC6
, 
	gD6
, 
	gA7
, 
	gB7
, 
	gC7
, 
	gD7
 \

66 
	#BMAP_4CH_6WY
 \

	)

68 
	gA0
, 
	gB0
, 
	gC0
, 
	gD0
, 
	gA1
, 
	gB1
, 
	gC1
, 
	gD1
, 
	gA2
, 
	gB2
, 
	gC2
, 
	gD2
, 
	gA3
, 
	gB3
, 
	gC3
, 
	gD3
, \

69 
	gA4
, 
	gB4
, 
	gC4
, 
	gD4
, 
	gA5
, 
	gB5
, 
	gC5
, 
	gD5
 \

73 
	#BMAP_4CH_5WY
 \

	)

75 
	gA0
, 
	gB0
, 
	gC0
, 
	gD0
, 
	gA1
, 
	gB1
, 
	gC1
, 
	gD1
, 
	gA2
, 
	gB2
, 
	gC2
, 
	gD2
, 
	gA3
, 
	gB3
, 
	gC3
, 
	gD3
, \

76 
	gA4
, 
	gB4
, 
	gC4
, 
	gD4
 \

80 
	#BMAP_4CH_4WY_B
 \

	)

82 
	gA0
, 
	gB0
, 
	gC0
, 
	gD0
, 
	gA2
, 
	gB2
, 
	gC2
, 
	gD2
, \

83 
	gA4
, 
	gB4
, 
	gC4
, 
	gD4
, 
	gA6
, 
	gB6
, 
	gC6
, 
	gD6
 \

87 
	#BMAP_4CH_4WY_C
 \

	)

89 
	gA0
, 
	gB0
, 
	gC0
, 
	gD0
, 
	gA1
, 
	gB1
, 
	gC1
, 
	gD1
, \

90 
	gA4
, 
	gB4
, 
	gC4
, 
	gD4
, 
	gA5
, 
	gB5
, 
	gC5
, 
	gD5
 \

95 
	#BMAP_2CH_8WY_A
 \

	)

97 
	gA0
, 
	gB0
, 
	gA1
, 
	gB1
, 
	gA2
, 
	gB2
, 
	gA3
, 
	gB3
, \

98 
	gA4
, 
	gB4
, 
	gA5
, 
	gB5
, 
	gA6
, 
	gB6
, 
	gA7
, 
	gB7
 \

102 
	#BMAP_2CH_6WY_A
 \

	)

104 
	gA0
, 
	gB0
, 
	gA1
, 
	gB1
, 
	gA2
, 
	gB2
, 
	gA3
, 
	gB3
, \

105 
	gA4
, 
	gB4
, 
	gA5
, 
	gB5
 \

109 
	#BMAP_2CH_5WY_A
 \

	)

111 
	gA0
, 
	gB0
, 
	gA1
, 
	gB1
, 
	gA2
, 
	gB2
, 
	gA3
, 
	gB3
, \

112 
	gA4
, 
	gB4
 \

116 
	#BMAP_2CH_4WY_C
 \

	)

118 
	gA0
, 
	gB0
, 
	gA1
, 
	gB1
, \

119 
	gA4
, 
	gB4
, 
	gA5
, 
	gB5
, \

123 
	#BMAP_2CH_4WY_F
 \

	)

125 
	gA0
, 
	gB0
, 
	gA2
, 
	gB2
, \

126 
	gA4
, 
	gB4
, 
	gA6
, 
	gB6
, \

130 
	#BMAP_2CH_3WY
 \

	)

132 
	gA0
, 
	gB0
, 
	gA1
, 
	gB1
, 
	gA2
, 
	gB2
, \

136 
	#BMAP_2CH_2WY_D
 \

	)

138 
	gA0
, 
	gB0
, \

139 
	gA4
, 
	gB4
, \

144 
	#BMAP_4CH_4WY
 { 
A0
, 
B0
, 
C0
, 
D0
, 
A1
, 
B1
, 
C1
, 
D1
, 
A2
, 
B2
, 
C2
, 
D2
, 
A3
, 
B3
, 
C3
, 
D3
 }

145 
	#BMAP_4CH_3WY
 { 
A0
, 
B0
, 
C0
, 
D0
, 
A1
, 
B1
, 
C1
, 
D1
, 
A2
, 
B2
, 
C2
, 
D2
 }

146 
	#BMAP_4CH_2WY_A
 { 
A0
, 
B0
, 
C0
, 
D0
, 
A1
, 
B1
, 
C1
, 
D1
 }

147 
	#BMAP_4CH_2WY_B
 { 
A0
, 
B0
, 
C0
, 
D0
, 
A2
, 
B2
, 
C2
, 
D2
 }

148 
	#BMAP_4CH_1WY
 { 
A0
, 
B0
, 
C0
, 
D0
 }

149 
	#BMAP_2CH_4WY_A
 { 
A0
, 
B0
, 
A1
, 
B1
, 
A2
, 
B2
, 
A3
, 
B3
 }

150 
	#BMAP_2CH_4WY_B
 { 
C0
, 
D0
, 
C1
, 
D1
, 
C2
, 
D2
, 
C3
, 
D3
 }

151 
	#BMAP_2CH_4WY_D
 { 
A0
, 
C0
, 
A1
, 
C1
, 
A2
, 
C2
, 
A3
, 
C3
 }

152 
	#BMAP_2CH_4WY_E
 { 
A0
, 
D0
, 
A1
, 
D1
, 
A2
, 
D2
, 
A3
, 
D3
 }

153 
	#BMAP_2CH_2WY_A
 { 
A0
, 
B0
, 
A1
, 
B1
 }

154 
	#BMAP_2CH_2WY_B
 { 
A0
, 
B0
, 
A2
, 
B2
 }

155 
	#BMAP_2CH_2WY_C
 { 
C0
, 
D0
, 
C2
, 
D2
 }

156 
	#BMAP_2CH_1WY
 { 
A0
, 
B0
 }

157 
	#BMAP_1CH_4WY
 { 
A0
, 
A1
, 
A2
, 
A3
 }

158 
	#BMAP_1CH_2WY_A
 { 
A0
, 
A1
 }

159 
	#BMAP_1CH_2WY_B
 { 
A0
, 
A2
 }

160 
	#BMAP_1CH_1WY
 { 
A0
 }

161 
	#BMAP_3CH_4WY
 { 
A0
, 
B0
, 
C0
, 
A1
, 
B1
, 
C1
, 
A2
, 
B2
, 
C2
, 
A3
, 
B3
, 
C3
 }

162 
	#BMAP_3CH_2WY
 { 
A0
, 
B0
, 
C0
, 
A1
, 
B1
, 
C1
 }

163 
	#BMAP_3CH_2WY_B
 { 
A0
, 
B0
, 
C0
, 
A2
, 
B2
, 
C2
 }

164 

	)

167 
	#_X_
 0xFF

	)

170 
	#BRMAP_4CH_8WY
 \

	)

177 
	#BRMAP_4CH_6WY
 \

	)

180 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

184 
	#BRMAP_4CH_5WY
 \

	)

187 0x10, 0x11, 0x12, 0x13, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

191 
	#BRMAP_4CH_4WY_B
 \

	)

193 0x00, 0x01, 0x02, 0x03, 
	g_X_
, _X_, _X_, _X_, 0x04, 0x05, 0x06, 0x07, _X_, _X_, _X_, _X_, \

194 0x08, 0x09, 0x0A, 0x0B, 
	g_X_
, _X_, _X_, _X_, 0x0C, 0x0D, 0x0E, 0x0F, _X_, _X_, _X_, _X_ \

198 
	#BRMAP_4CH_4WY_C
 \

	)

200 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, \

201 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

206 
	#BRMAP_2CH_8WY_A
 \

	)

208 0x00, 0x01, 
	g_X_
, _X_, 0x02, 0x03, _X_, _X_, 0x04, 0x05, _X_, _X_, 0x06, 0x07, _X_, _X_, \

209 0x08, 0x09, 
	g_X_
, _X_, 0x0A, 0x0B, _X_, _X_, 0x0C, 0x0D, _X_, _X_, 0x0E, 0x0F, _X_, _X_ \

213 
	#BRMAP_2CH_6WY_A
 \

	)

215 0x00, 0x01, 
	g_X_
, _X_, 0x02, 0x03, _X_, _X_, 0x04, 0x05, _X_, _X_, 0x06, 0x07, _X_, _X_, \

216 0x08, 0x09, 
	g_X_
, _X_, 0x0A, 0x0B, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

220 
	#BRMAP_2CH_5WY_A
 \

	)

222 0x00, 0x01, 
	g_X_
, _X_, 0x02, 0x03, _X_, _X_, 0x04, 0x05, _X_, _X_, 0x06, 0x07, _X_, _X_, \

223 0x08, 0x09, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

227 
	#BRMAP_2CH_4WY_C
 \

	)

229 0x00, 0x01, 
	g_X_
, _X_, 0x02, 0x03, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, \

230 0x04, 0x05, 
	g_X_
, _X_, 0x06, 0x07, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

234 
	#BRMAP_2CH_4WY_F
 \

	)

236 0x00, 0x01, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, 0x02, 0x03, _X_, _X_, _X_, _X_, _X_, _X_, \

237 0x04, 0x05, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, 0x06, 0x07, _X_, _X_, _X_, _X_, _X_, _X_ \

241 
	#BRMAP_2CH_2WY_D
 \

	)

243 0x00, 0x01, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, \

244 0x02, 0x03, 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

248 
	#BRMAP_2CH_3WY
 \

	)

250 0x00, 0x01, 
	g_X_
, _X_, 0x02, 0x03, _X_, _X_, 0x04, 0x05, _X_, _X_, _X_, _X_, _X_, _X_, \

251 
	g_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ \

254 
	#BRMAP_4CH_4WY
 { 0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xA, 0xB, 0xC, 0xD, 0xE, 0xF }

255 
	#BRMAP_4CH_3WY
 { 0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 0x8, 0x9, 0xA, 0xB, 
_X_
, _X_, _X_, _X_ }

256 
	#BRMAP_4CH_2WY_A
 { 0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x6, 0x7, 
_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

257 
	#BRMAP_4CH_2WY_B
 { 0x0, 0x1, 0x2, 0x3, 
_X_
, _X_, _X_, _X_, 0x4, 0x5, 0x6, 0x7, _X_, _X_, _X_, _X_ }

258 
	#BRMAP_4CH_1WY
 { 0x0, 0x1, 0x2, 0x3, 
_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

259 
	#BRMAP_2CH_4WY_A
 { 0x0, 0x1, 
_X_
, _X_, 0x2, 0x3, _X_, _X_, 0x4, 0x5, _X_, _X_, 0x6, 0x7, _X_, _X_ }

260 
	#BRMAP_2CH_4WY_B
 { 
_X_
, _X_, 0x0, 0x1, _X_, _X_, 0x2, 0x3, _X_, _X_, 0x4, 0x5, _X_, _X_, 0x6, 0x7 }

261 
	#BRMAP_2CH_4WY_D
 { 0x0, 
_X_
, 0x1, _X_, 0x2, _X_, 0x3, _X_, 0x4, _X_, 0x5, _X_, 0x6, _X_, 0x7, _X_ }

262 
	#BRMAP_2CH_4WY_E
 { 0x0, 
_X_
, _X_, 0x1, 0x2, _X_, _X_, 0x3, 0x4, _X_, _X_, 0x5, 0x6, _X_, _X_, 0x7 }

263 
	#BRMAP_2CH_2WY_A
 { 0x0, 0x1, 
_X_
, _X_, 0x2, 0x3, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

264 
	#BRMAP_2CH_2WY_B
 { 0x0, 0x1, 
_X_
, _X_, _X_, _X_, _X_, _X_, 0x2, 0x3, _X_, _X_, _X_, _X_, _X_, _X_ }

265 
	#BRMAP_2CH_2WY_C
 { 
_X_
, _X_, 0x0, 0x1, _X_, _X_, _X_, _X_, _X_, _X_, 0x2, 0x3, _X_, _X_, _X_, _X_ }

266 
	#BRMAP_2CH_1WY
 { 0x0, 0x1, 
_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

267 
	#BRMAP_1CH_4WY
 { 0x0, 
_X_
, _X_, _X_, 0x1, _X_, _X_, _X_, 0x2, _X_, _X_, _X_, 0x3, _X_, _X_, _X_ }

268 
	#BRMAP_1CH_2WY_A
 { 0x0, 
_X_
, _X_, _X_, 0x1, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

269 
	#BRMAP_1CH_2WY_B
 { 0x0, 
_X_
, _X_, _X_, _X_, _X_, _X_, _X_, 0x1, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

270 
	#BRMAP_1CH_1WY
 { 0x0, 
_X_
, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

271 
	#BRMAP_3CH_4WY
 { 0x0, 0x1, 0x2, 
_X_
, 0x3, 0x4, 0x5, _X_, 0x6, 0x7, 0x8, _X_, 0x9, 0xA, 0xB, _X_ }

272 
	#BRMAP_3CH_2WY
 { 0x0, 0x1, 0x2, 
_X_
, 0x3, 0x4, 0x5, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_, _X_ }

273 
	#BRMAP_3CH_2WY_B
 { 0x0, 0x1, 0x2, 
_X_
, _X_, _X_, _X_, _X_, 0x3, 0x4, 0x5, _X_, _X_, _X_, _X_, _X_ }

274 

	)

275 #i‡
BANK_BMP
 == 0xFFFFFFFF

276 
	#BANK_MAP
 
BMAP_4CH_8WY


	)

277 
	#BANK_RMAP
 
BRMAP_4CH_8WY


	)

278 
	#NUM_BANKS
 32

	)

280 #ñi‡
BANK_BMP
 == 0x00FFFFFF

281 
	#BANK_MAP
 
BMAP_4CH_6WY


	)

282 
	#BANK_RMAP
 
BRMAP_4CH_6WY


	)

283 
	#NUM_BANKS
 24

	)

285 #ñi‡
BANK_BMP
 == 0x000FFFFF

286 
	#BANK_MAP
 
BMAP_4CH_5WY


	)

287 
	#BANK_RMAP
 
BRMAP_4CH_5WY


	)

288 
	#NUM_BANKS
 20

	)

290 #ñi‡
BANK_BMP
 == 0x0F0F0F0F

291 
	#BANK_MAP
 
BMAP_4CH_4WY_B


	)

292 
	#BANK_RMAP
 
BRMAP_4CH_4WY_B


	)

293 
	#NUM_BANKS
 16

	)

295 #ñi‡
BANK_BMP
 == 0x00FF00FF

296 
	#BANK_MAP
 
BMAP_4CH_4WY_C


	)

297 
	#BANK_RMAP
 
BRMAP_4CH_4WY_C


	)

298 
	#NUM_BANKS
 16

	)

300 #ñi‡
BANK_BMP
 == 0x33333333

301 
	#BANK_MAP
 
BMAP_2CH_8WY_A


	)

302 
	#BANK_RMAP
 
BRMAP_2CH_8WY_A


	)

303 
	#NUM_BANKS
 16

	)

305 #ñi‡
BANK_BMP
 == 0x00333333

306 
	#BANK_MAP
 
BMAP_2CH_6WY_A


	)

307 
	#BANK_RMAP
 
BRMAP_2CH_6WY_A


	)

308 
	#NUM_BANKS
 12

	)

310 #ñi‡
BANK_BMP
 == 0x00033333

311 
	#BANK_MAP
 
BMAP_2CH_5WY_A


	)

312 
	#BANK_RMAP
 
BRMAP_2CH_5WY_A


	)

313 
	#NUM_BANKS
 10

	)

315 #ñi‡
BANK_BMP
 == 0x00330033

316 
	#BANK_MAP
 
BMAP_2CH_4WY_C


	)

317 
	#BANK_RMAP
 
BRMAP_2CH_4WY_C


	)

318 
	#NUM_BANKS
 8

	)

320 #ñi‡
BANK_BMP
 == 0x03030303

321 
	#BANK_MAP
 
BMAP_2CH_4WY_F


	)

322 
	#BANK_RMAP
 
BRMAP_2CH_4WY_F


	)

323 
	#NUM_BANKS
 8

	)

325 #ñi‡
BANK_BMP
 == 0xFFFF

326 
	#BANK_MAP
 
BMAP_4CH_4WY


	)

327 
	#BANK_RMAP
 
BRMAP_4CH_4WY


	)

328 
	#NUM_BANKS
 16

	)

330 #ñi‡
BANK_BMP
 == 0x7777

331 
	#BANK_MAP
 
BMAP_3CH_4WY


	)

332 
	#BANK_RMAP
 
BRMAP_3CH_4WY


	)

333 
	#NUM_BANKS
 12

	)

335 #ñi‡
BANK_BMP
 == 0x0077

336 
	#BANK_MAP
 
BMAP_3CH_2WY


	)

337 
	#BANK_RMAP
 
BRMAP_3CH_2WY


	)

338 
	#NUM_BANKS
 6

	)

340 #ñi‡
BANK_BMP
 == 0x0707

341 
	#BANK_MAP
 
BMAP_3CH_2WY_B


	)

342 
	#BANK_RMAP
 
BRMAP_3CH_2WY_B


	)

343 
	#NUM_BANKS
 6

	)

345 #ñi‡
BANK_BMP
 == 0x0FFF

346 
	#BANK_MAP
 
BMAP_4CH_3WY


	)

347 
	#BANK_RMAP
 
BRMAP_4CH_3WY


	)

348 
	#NUM_BANKS
 12

	)

350 #ñi‡
BANK_BMP
 == 0x00FF

351 
	#BANK_MAP
 
BMAP_4CH_2WY_A


	)

352 
	#BANK_RMAP
 
BRMAP_4CH_2WY_A


	)

353 
	#NUM_BANKS
 8

	)

355 #ñi‡
BANK_BMP
 == 0x0F0F

356 
	#BANK_MAP
 
BMAP_4CH_2WY_B


	)

357 
	#BANK_RMAP
 
BRMAP_4CH_2WY_B


	)

358 
	#NUM_BANKS
 8

	)

360 #ñi‡
BANK_BMP
 == 0x000F

361 
	#BANK_MAP
 
BMAP_4CH_1WY


	)

362 
	#BANK_RMAP
 
BRMAP_4CH_1WY


	)

363 
	#NUM_BANKS
 4

	)

365 #ñi‡
BANK_BMP
 == 0x3333

366 
	#BANK_MAP
 
BMAP_2CH_4WY_A


	)

367 
	#BANK_RMAP
 
BRMAP_2CH_4WY_A


	)

368 
	#NUM_BANKS
 8

	)

370 #ñi‡
BANK_BMP
 == 0xCCCC

371 
	#BANK_MAP
 
BMAP_2CH_4WY_B


	)

372 
	#BANK_RMAP
 
BRMAP_2CH_4WY_B


	)

373 
	#NUM_BANKS
 8

	)

375 #ñi‡
BANK_BMP
 == 0x5555

376 
	#BANK_MAP
 
BMAP_2CH_4WY_D


	)

377 
	#BANK_RMAP
 
BRMAP_2CH_4WY_D


	)

378 
	#NUM_BANKS
 8

	)

380 #ñi‡
BANK_BMP
 == 0x9999

381 
	#BANK_MAP
 
BMAP_2CH_4WY_E


	)

382 
	#BANK_RMAP
 
BRMAP_2CH_4WY_E


	)

383 
	#NUM_BANKS
 8

	)

385 #ñi‡
BANK_BMP
 == 0x0333

386 
	#BANK_MAP
 
BMAP_2CH_3WY


	)

387 
	#BANK_RMAP
 
BRMAP_2CH_3WY


	)

388 
	#NUM_BANKS
 6

	)

390 #ñi‡
BANK_BMP
 == 0x0033

391 
	#BANK_MAP
 
BMAP_2CH_2WY_A


	)

392 
	#BANK_RMAP
 
BRMAP_2CH_2WY_A


	)

393 
	#NUM_BANKS
 4

	)

395 #ñi‡
BANK_BMP
 == 0x0303

396 
	#BANK_MAP
 
BMAP_2CH_2WY_B


	)

397 
	#BANK_RMAP
 
BRMAP_2CH_2WY_B


	)

398 
	#NUM_BANKS
 4

	)

400 #ñi‡
BANK_BMP
 == 0x0C0C

401 
	#BANK_MAP
 
BMAP_2CH_2WY_C


	)

402 
	#BANK_RMAP
 
BRMAP_2CH_2WY_C


	)

403 
	#NUM_BANKS
 4

	)

405 #ñi‡
BANK_BMP
 == 0x0003

406 
	#BANK_MAP
 
BMAP_2CH_1WY


	)

407 
	#BANK_RMAP
 
BRMAP_2CH_1WY


	)

408 
	#NUM_BANKS
 2

	)

410 #ñi‡
BANK_BMP
 == 0x1111

411 
	#BANK_MAP
 
BMAP_1CH_4WY


	)

412 
	#BANK_RMAP
 
BRMAP_1CH_4WY


	)

413 
	#NUM_BANKS
 4

	)

415 #ñi‡
BANK_BMP
 == 0x0011

416 
	#BANK_MAP
 
BMAP_1CH_2WY_A


	)

417 
	#BANK_RMAP
 
BRMAP_1CH_2WY_A


	)

418 
	#NUM_BANKS
 2

	)

420 #ñi‡
BANK_BMP
 == 0x0101

421 
	#BANK_MAP
 
BMAP_1CH_2WY_B


	)

422 
	#BANK_RMAP
 
BRMAP_1CH_2WY_B


	)

423 
	#NUM_BANKS
 2

	)

425 #ñi‡
BANK_BMP
 == 0x0001

426 
	#BANK_MAP
 
BMAP_1CH_1WY


	)

427 
	#BANK_RMAP
 
BRMAP_1CH_1WY


	)

428 
	#NUM_BANKS
 1

	)

430 #ñi‡
BANK_BMP
 == 0x00030003

431 
	#BANK_MAP
 
BMAP_2CH_2WY_D


	)

432 
	#BANK_RMAP
 
BRMAP_2CH_2WY_D


	)

433 
	#NUM_BANKS
 4

	)

439 c⁄° 
UINT8
 
c_b™k_m≠
[
NUM_BANKS
];

	@include/flash.h

21 #i‚de‡
FLASH_H


22 
	#FLASH_H


	)

24 
	#FLASH_POLL_WR
 (
	`GETREG
(
WR_STAT
Ë& 0x00000001Ë!0)

	)

25 
	#FLASH_ISSUE
 
	`SETREG
(
FCP_ISSUE
, 
NULL
)

	)

27 
UINT8
 
c_b™k_rm≠
[
NUM_BANKS_MAX
];

34 
	#INTR_BSP
 (
FREG_BASE
 + 0x000)

	)

35 
	#INTR_MASK
 (
FREG_BASE
 + 0x004)

	)

36 
	#FCONF_NANDCFG_1
 (
FREG_BASE
 + 0x008)

	)

37 
	#BANK_RESET
 (
FREG_BASE
 + 0x00C)

	)

39 
	#FCONF_CHKCMD
 (
FREG_BASE
 + 0x00A)

	)

40 
	#FCONF_PAUSE
 (
FREG_BASE
 + 0x010)

	)

41 
	#FCONF_NANDCFG_2
 (
FREG_BASE
 + 0x014)

	)

42 
	#FCONF_REBDELAY
 (
FREG_BASE
 + 0x018)

	)

43 
	#FCONF_TIMECYCLE
 (
FREG_BASE
 + 0x01C)

	)

44 
	#FCONF_CPBDMABASE
 (
FREG_BASE
 + 0x020)

	)

45 
	#FCONF_BUFSIZE
 (
FREG_BASE
 + 0x024)

	)

46 
	#FCONF_COMMAND
 (
FREG_BASE
 + 0x028)

	)

47 
	#WR_STAT
 (
FREG_BASE
 + 0x02C)

	)

49 
	#WR_BANK
 (
FREG_BASE
 + 0x030)

	)

51 
	#CMD_ID_MAX
 0x3FF

52 

	)

53 
	#FCP_BASE
 (
FREG_BASE
 + 0x034)

	)

54 
	#BSP_BASE
 (
FREG_BASE
 + 0x160)

	)

55 
	#SIZE_OF_BSP
 48

56 
	#BSP_INTR_BASE
 (
FREG_BASE
 + 0x760)

	)

57 
	#BSP_FSM_BASE
 (
FREG_BASE
 + 0x780)

	)

58 
	#SCRAMSEED_BASE
 (
FREG_BASE
 + 0x780)

59 
	#REMAP_BASE
 (
FREG_BASE
 + 0x7C0)

	)

61 
	#FCP_CMD
 (
FCP_BASE
 + 0x00)

	)

62 
	#FCP_BANK
 (
FCP_BASE
 + 0x04)

63 
	#FCP_OPTION
 (
FCP_BASE
 + 0x08)

	)

64 
	#FCP_DMA_ADDR
 (
FCP_BASE
 + 0x0C)

	)

65 
	#FCP_DMA_CNT
 (
FCP_BASE
 + 0x10)

	)

66 
	#FCP_COL
 (
FCP_BASE
 + 0x14)

	)

67 
	#FCP_ROW0_L
 (
FCP_BASE
 + 0x18)

	)

68 
	#FCP_ROW0_H
 (
FCP_BASE
 + 0x1C)

	)

69 
	#FCP_DST_COL
 (
FCP_ROW0_L
 + 
NUM_BANKS_MAX
*8 + 0x00)

	)

70 
	#FCP_DST_ROW_L
 (
FCP_ROW0_L
 + 
NUM_BANKS_MAX
*8 + 0x04)

	)

71 
	#FCP_DST_ROW_H
 (
FCP_ROW0_L
 + 
NUM_BANKS_MAX
*8 + 0x08)

	)

72 
	#FCP_CMD_ID
 (
FCP_ROW0_L
 + 
NUM_BANKS_MAX
*8 + 0x0C)

73 
	#FCP_ISSUE
 (
FCP_ROW0_L
 + 
NUM_BANKS_MAX
*8 + 0x10)

	)

75 
	#REMAPBANK0
 (
REMAP_BASE
 + 0x00)

	)

76 
	#REMAPBANK1
 (
REMAP_BASE
 + 0x04)

	)

77 
	#REMAPBANK2
 (
REMAP_BASE
 + 0x08)

	)

78 
	#REMAPBANK3
 (
REMAP_BASE
 + 0x0C)

	)

79 
	#REMAPBLOCK0
 (
REMAP_BASE
 + 0x10)

	)

80 
	#REMAPBLOCK1
 (
REMAP_BASE
 + 0x14)

	)

81 
	#REMAPBLOCK2
 (
REMAP_BASE
 + 0x18)

	)

82 
	#REMAPBLOCK3
 (
REMAP_BASE
 + 0x1C)

	)

84 
	#NUM_REMAP_REG
 4

	)

86 
	#REMAP_BANK_MASK
 0x3F

	)

87 
	#REMAP_BANK_INVALID
 0x3F

	)

88 
	#REMAP_BANK_HIGH
 (1 << 6)

	)

89 
	#REMAP_BANK_LOW
 (0 << 6)

	)

90 
	#REMAP_BANK_PLANE
 (
FO_P
 << 7)

	)

92 
	#BSP_CHASTAT
 (
FREG_BASE
 + 0x7A0)

	)

93 
	#MON_CHABANKIDLE
 (
FREG_BASE
 + 0x7A4)

	)

94 
	#MON_TRANCOUNT
 (
FREG_BASE
 + 0x7A8)

	)

95 
	#MON_DATACOUNT
 (
FREG_BASE
 + 0x7AC)

	)

96 
	#MON_DMACOUNT1
 (
FREG_BASE
 + 0x7B0)

	)

97 
	#MON_DMACOUNT2
 (
FREG_BASE
 + 0x7B4)

	)

98 
	#MONITOR_CTRL
 (
FREG_BASE
 + 0x7B8)

	)

99 
	#MONSELECT
 (
FREG_BASE
 + 0x7BC)

	)

100 
	#BANK_FLAG_SEL
 (
FREG_BASE
 + 0x7E0)

101 
	#ECC_SEC_FLAG
 (
FREG_BASE
 + 0x7E4)

102 
	#EDC_SEC_FLAG
 (
FREG_BASE
 + 0x7E8)

103 
	#TAKEDATAMON
 (
FREG_BASE
 + 0x7EC)

	)

104 
	#FTL_READ_PTR
 (
FREG_BASE
 + 0x7F0)

	)

111 
	#BCH
(
X
) ((X) << 0)

112 
	#DIS_COM2_SEL
(
X
) ((X) << 1)

113 
	#EDC_SEC_INT
(
X
) ((X) << 2)

114 
	#PG_SIZE
(
X
) ((X) << 8)

115 
	#BLK_SIZE
(
X
) ((X) << 10)

116 
	#ECC_SIZE
(
X
) ((X) << 12)

117 
	#CHK_CMD
(
X
) ((X) << 14)

118 
	#CHK_CODE
(
X
) ((X) << 16)

119 
	#CHK_MASK
(
X
Ë((
UINT32
)(X) << 24)

120 

	)

126 
	#FLASH_SETUP
(
X
Ë((XË<< 0)

	)

127 
	#FLASH_HOLD
(
X
Ë((XË<< 4)

	)

129 
	#FLASH_ECC_ENABLE
 ( 1 << 7 )

	)

130 
	#FLASH_WHR
(
X
Ë((XË<< 8)

	)

131 
	#FLASH_ADL
(
X
Ë((XË<< 12)

	)

132 
	#FLASH_RHW
(
X
Ë((XË<< 17)

	)

133 
	#FLASH_OUT_ENA_DLY
(
X
Ë((XË<< 22)

	)

134 
	#FLASH_CLE_ALE_DLY
(
X
Ë((XË<< 23)

	)

136 
	#FLASH_READ_CYCLE_A
(
X
Ë((XË<< 24)

	)

137 
	#FLASH_READ_CYCLE_B
(
X
Ë((XË<< 26)

	)

138 
	#FLASH_READ_CYCLE_C
(
X
Ë((XË<< 28)

	)

139 
	#FLASH_READ_CYCLE_D
(
X
Ë((
UINT32
)(XË<< 30)

	)

141 
	#FLASH_PARAM_SETUP_MAX
 15

	)

142 
	#FLASH_PARAM_HOLD_MAX
 7

	)

143 
	#FLASH_PARAM_READ_CYCLE_MAX
 3

	)

145 
	#FLASH_PARAM_75_SETUP
 (2 - 1)

	)

146 
	#FLASH_PARAM_75_HOLD
 (2 - 1)

	)

147 
	#FLASH_PARAM_75_READ_CYCLE
 1

	)

149 
	#FLASH_PARAM_TIMECYCLE_SAFE
 (
	`FLASH_SETUP
(
FLASH_PARAM_SETUP_MAX
Ë| 
	`FLASH_HOLD
(
FLASH_PARAM_HOLD_MAX
Ë| 
	`FLASH_WHR
(15Ë| 
	`FLASH_ADL
(31Ë| \

	)

150 
FLASH_RHW
(31Ë| 
FLASH_OUT_ENA_DLY
(1Ë| 
FLASH_CLE_ALE_DLY
(1) | \

151 
FLASH_READ_CYCLE_A
(1Ë| 
FLASH_READ_CYCLE_B
(1) | \

152 
FLASH_READ_CYCLE_C
(1Ë| 
FLASH_READ_CYCLE_D
(1Ë| 
	gFLASH_ECC_ENABLE
)

158 
	#_FCP_ROW_L
(
RBANK
Ë(
FCP_ROW0_L
 + (RBANKË* 8)

	)

159 
	#_FCP_ROW_H
(
RBANK
Ë(
FCP_ROW0_H
 + (RBANKË* 8)

	)

160 
	#_BSP_INTR
(
RBANK
Ë(*(vﬁ©ûê
UINT8
*)(
BSP_INTR_BASE
 + (RBANK)))

	)

161 
	#_BSP_CMD
(
RBANK
Ë(
BSP_BASE
 + 0x00 + 
SIZE_OF_BSP
 * (RBANK))

	)

162 
	#_BSP_OPTION
(
RBANK
Ë(
BSP_BASE
 + 0x04 + 
SIZE_OF_BSP
 * (RBANK))

	)

163 
	#_BSP_DMA_ADDR
(
RBANK
Ë(
BSP_BASE
 + 0x08 + 
SIZE_OF_BSP
 * (RBANK))

	)

164 
	#_BSP_DMA_CNT
(
RBANK
Ë(
BSP_BASE
 + 0x0C + 
SIZE_OF_BSP
 * (RBANK))

	)

165 
	#_BSP_COL
(
RBANK
Ë(
BSP_BASE
 + 0x10 + 
SIZE_OF_BSP
 * (RBANK))

	)

166 
	#_BSP_ROW_H
(
RBANK
Ë(
BSP_BASE
 + 0x14 + 
SIZE_OF_BSP
 * (RBANK))

	)

167 
	#_BSP_ROW_L
(
RBANK
Ë(
BSP_BASE
 + 0x18 + 
SIZE_OF_BSP
 * (RBANK))

	)

168 
	#_BSP_DST_COL
(
RBANK
Ë(
BSP_BASE
 + 0x1C + 
SIZE_OF_BSP
 * (RBANK))

	)

169 
	#_BSP_DST_ROW_H
(
RBANK
Ë(
BSP_BASE
 + 0x20 + 
SIZE_OF_BSP
 * (RBANK))

	)

170 
	#_BSP_DST_ROW_L
(
RBANK
Ë(
BSP_BASE
 + 0x24 + 
SIZE_OF_BSP
 * (RBANK))

	)

171 
	#_BSP_CMD_ID
(
RBANK
Ë(
BSP_BASE
 + 0x28 + 
SIZE_OF_BSP
 * (RBANK))

	)

172 
	#_BSP_ECCNUM
(
RBANK
Ë(
BSP_BASE
 + 0x2C + 
SIZE_OF_BSP
 * (RBANK))

	)

173 
	#_BSP_FSM
(
RBANK
Ë(*(vﬁ©ûê
UINT8
*)(
BSP_FSM_BASE
 + (RBANK)))

	)

174 
	#_CLR_BSP_INTR
(
RBANK
, 
FLAG
Ë*(vﬁ©ûê
UINT32
*)(
BSP_INTR_BASE
 + (RBANK)/4*4Ë(FLAGË<< (((RBANK)%4)*8)

	)

176 
	#REAL_BANK
(
BANK
Ë((
UINT32
)(
c_b™k_m≠
[BANK]))

	)

177 
	#FCP_ROW_L
(
BANK
Ë
	`_FCP_ROW_L
(
	`REAL_BANK
(BANK))

	)

178 
	#FCP_ROW_H
(
BANK
Ë
	`_FCP_ROW_H
(
	`REAL_BANK
(BANK))

	)

179 
	#BSP_INTR
(
BANK
Ë
	`_BSP_INTR
(
	`REAL_BANK
(BANK))

	)

180 
	#BSP_CMD
(
BANK
Ë
	`_BSP_CMD
(
	`REAL_BANK
(BANK))

	)

181 
	#BSP_OPTION
(
BANK
Ë
	`_BSP_OPTION
(
	`REAL_BANK
(BANK))

	)

182 
	#BSP_DMA_ADDR
(
BANK
Ë
	`_BSP_DMA_ADDR
(
	`REAL_BANK
(BANK))

	)

183 
	#BSP_DMA_CNT
(
BANK
Ë
	`_BSP_DMA_CNT
(
	`REAL_BANK
(BANK))

	)

184 
	#BSP_COL
(
BANK
Ë
	`_BSP_COL
(
	`REAL_BANK
(BANK))

	)

185 
	#BSP_ROW_H
(
BANK
Ë
	`_BSP_ROW_H
(
	`REAL_BANK
(BANK))

	)

186 
	#BSP_ROW_L
(
BANK
Ë
	`_BSP_ROW_L
(
	`REAL_BANK
(BANK))

	)

187 
	#BSP_DST_COL
(
BANK
Ë
	`_BSP_DST_COL
(
	`REAL_BANK
(BANK))

	)

188 
	#BSP_DST_ROW_H
(
BANK
Ë
	`_BSP_DST_ROW_H
(
	`REAL_BANK
(BANK))

	)

189 
	#BSP_DST_ROW_L
(
BANK
Ë
	`_BSP_DST_ROW_L
(
	`REAL_BANK
(BANK))

	)

190 
	#BSP_CMD_ID
(
BANK
Ë
	`_BSP_CMD_ID
(
	`REAL_BANK
(BANK))

	)

191 
	#BSP_ECCNUM
(
BANK
Ë
	`_BSP_ECCNUM
(
	`REAL_BANK
(BANK))

	)

192 
	#BSP_FSM
(
BANK
Ë
	`_BSP_FSM
(
	`REAL_BANK
(BANK))

	)

193 
	#CLR_BSP_INTR
(
BANK
, 
FLAG
Ë
	`_CLR_BSP_INTR
(
	`REAL_BANK
(BANK), FLAG)

	)

196 
	sèg_f˝


198 
UINT32
 
	mcmd
;

199 
UINT32
 
	mb™k
;

200 
UINT32
 
	m›ti⁄
;

201 
UINT32
 
	mdma_addr
;

202 
UINT32
 
	mdma_˙t
;

203 
UINT32
 
	mcﬁ
;

204 
UINT32
 
	mrow
[
NUM_BANKS_MAX
][
CHN_WIDTH
];

205 
UINT32
 
	md°_cﬁ
;

206 
UINT32
 
	md°_row
[
CHN_WIDTH
];

207 
UINT32
 
	mcmd_id
;

208 
UINT32
 
	missue
;

209 } 
	tf˝_t
;

217 
	#FC_COL_ROW_IN_PROG
 0x01

218 
	#FC_COL_ROW_IN
 0x02

219 
	#FC_IN
 0x03

220 
	#FC_IN_PROG
 0x04

221 
	#FC_PROG
 0x09

222 

	)

224 
	#FC_COL_ROW_READ_OUT
 0x0a

225 
	#FC_COL_ROW_READ
 0x0b

226 
	#FC_OUT
 0x0c

227 
	#FC_COL_OUT
 0x0f

228 

	)

230 
	#FC_COPYBACK
 0x12

231 
	#FC_MODIFY_COPYBACK
 0x17

	)

234 
	#FC_WAIT
 0x00

235 
	#FC_ERASE
 0x14

236 
	#FC_GENERIC
 0x15

237 
	#FC_GENERIC_ADDR
 0x16

238 
	#FC_READ_ID
 0x10

239 

	)

279 
	#FO_P
 (0x01 * 
OPTION_2_PLANE
)

280 
	#FO_E
 0x06

281 
	#FO_SCRAMBLE
 0x08

282 
	#FO_L
 0x10

283 
	#FO_H
 0x20

284 
	#FO_B_W_DRDY
 0x40

	)

285 #i‡
OPTION_FTL_TEST


286 
	#FO_B_SATA_W
 
FO_B_W_DRDY


	)

287 
	#FO_B_SATA_R
 0

	)

289 
	#FO_B_SATA_W
 0x80

	)

290 
	#FO_B_SATA_R
 0x100

	)

333 
	#AUTO_SEL
 0x3F

	)

340 
	sèg_b•


342 
UINT32
 
	mcmd
;

343 
UINT32
 
	m›ti⁄
;

344 
UINT32
 
	mdma_addr
;

345 
UINT32
 
	mdma_˙t
;

346 
UINT32
 
	mcﬁ
;

347 
UINT32
 
	mrow
[
CHN_WIDTH
];

348 
UINT32
 
	md°_cﬁ
;

349 
UINT32
 
	md°_row
[
CHN_WIDTH
];

350 
UINT32
 
	mcmd_id
;

351 
UINT32
 
	mec˙um
;

352 } 
	tb•_t
;

359 
	#BANK_IDLE
 0x0

	)

360 
	#BANK_GRANT
 0x1

	)

361 
	#BANK_START
 0x2

	)

362 
	#BANK_CHAGET
 0x3

	)

363 
	#BANK_WAIT
 0x4

	)

364 
	#BANK_CMDEND
 0x5

	)

365 
	#BANK_ECCWAIT
 0x6

	)

366 
	#BANK_TAKE
 0x7

	)

367 
	#BANK_END
 0xf

	)

374 
	#CHA_IDLE
 0x00

	)

375 
	#CHA_START
 0x01

	)

376 
	#CHA_COMMAND1
 0x02

	)

377 
	#CHA_ADDR
 0x03

	)

378 
	#CHA_WRITE
 0x04

	)

379 
	#CHA_READ
 0x05

	)

380 
	#CHA_COMMAND2
 0x06

	)

381 
	#CHA_WAIT
 0x07

	)

382 
	#CHA_WRITE2
 0x08

	)

383 
	#CHA_BANKSEL
 0x09

	)

384 
	#CHA_COM1STA
 0x0a

	)

385 
	#CHA_COM2STA
 0x0b

	)

386 
	#CHA_ADDRSTA
 0x0c

	)

387 
	#CHA_WRITESTA
 0x0d

	)

388 
	#CHA_READSTA
 0x0e

	)

389 
	#CHA_ADDREND
 0x0f

	)

390 
	#CHA_READNOP
 0x10

	)

391 
	#CHA_WRITENOP
 0x11

	)

392 
	#CHA_COM1NOP
 0x12

	)

393 
	#CHA_ENDNOP
 0x13

	)

394 
	#CHA_BUFREADY
 0x14

	)

395 
	#CHA_END
 0x1f

	)

404 
	#FIRQ_CORRECTED
 0x01

	)

405 
	#FIRQ_CRC_FAIL
 0x02

	)

406 
	#FIRQ_MISMATCH
 0x04

	)

407 
	#FIRQ_BADBLK_L
 0x08

	)

408 
	#FIRQ_BADBLK_H
 0x10

	)

409 
	#FIRQ_ALL_FF
 0x20

	)

410 
	#FIRQ_ECC_FAIL
 0x80

	)

411 
	#FIRQ_DATA_CORRUPT
 0x82

	)

418 
	#RETURN_ON_ISSUE
 0

	)

419 
	#RETURN_ON_ACCEPT
 1

	)

420 
	#RETURN_WHEN_DONE
 2

	)

422 
Êash_ª£t
();

423 
Êash_issue_cmd
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
sync
);

424 
Êash_föish
();

425 
Êash_c›y
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
d°_row
, UINT32 c⁄° 
§c_row
);

426 
Êash_îa£
(
UINT32
 c⁄° 
b™k
, 
UINT16
 c⁄° 
vblk_off£t
);

427 
Êash_˛ór_úq
();

433 
«nd_∑ge_ªad
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
buf_addr
);

434 
«nd_∑ge_±ªad
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
, UINT32 c⁄° 
buf_addr
, UINT32 c⁄° 
issue_Êag
);

435 
«nd_∑ge_ªad_to_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
);

436 
«nd_∑ge_±ªad_to_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
);

437 
«nd_∑ge_¥ogøm
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
buf_addr
);

438 
«nd_∑ge_±¥ogøm
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
, UINT32 c⁄° 
buf_addr
);

439 
«nd_∑ge_¥ogøm_‰om_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
);

440 
«nd_∑ge_±¥ogøm_‰om_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
);

441 
«nd_∑ge_c›yback
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
§c_vblock
, UINT32 c⁄° 
§c_∑ge
,

442 
UINT32
 c⁄° 
d°_vblock
, UINT32 c⁄° 
d°_∑ge
);

443 
«nd_∑ge_modifõd_c›yback
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
§c_vblock
, UINT32 c⁄° 
§c_∑ge
,

444 
UINT32
 c⁄° 
d°_vblock
, UINT32 c⁄° 
d°_∑ge
,

445 
UINT32
 c⁄° 
£˘_off£t
,

446 
UINT32
 
dma_addr
, UINT32 c⁄° 
dma_cou¡
);

447 
«nd_block_îa£
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
);

448 
«nd_block_îa£_sync
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
);

	@include/jasmine.h

19 #i‚def 
JASMINE_H


20 
	#JASMINE_H


	)

22 
	#FLASH_TYPE
 
K9LCG08U1M


	)

23 
	#DRAM_SIZE
 65075200

	)

24 
	#BANK_BMP
 0x00330033

	)

25 
	#CLOCK_SPEED
 175000000

	)

27 
	#OPTION_2_PLANE
 1

28 
	#OPTION_ENABLE_ASSERT
 1

29 
	#OPTION_FTL_TEST
 1

30 
	#OPTION_UART_DEBUG
 1

31 
	#OPTION_SLOW_SATA
 0

32 
	#OPTION_SUPPORT_NCQ
 0

33 
	#OPTION_REDUCED_CAPACITY
 0

34 

	)

35 
	#CHN_WIDTH
 2

36 
	#NUM_CHNLS_MAX
 4

	)

37 
	#BANKS_PER_CHN_MAX
 8

	)

38 
	#NUM_BANKS_MAX
 32

	)

40 
	~"«nd.h
"

46 
	#BYTES_PER_SECTOR
 512

	)

48 
	#NUM_PSECTORS_8GB
 16777216

	)

49 
	#NUM_PSECTORS_16GB
 (
NUM_PSECTORS_8GB
*2)

	)

50 
	#NUM_PSECTORS_32GB
 (
NUM_PSECTORS_16GB
*2)

	)

51 
	#NUM_PSECTORS_40GB
 (
NUM_PSECTORS_8GB
*5)

	)

52 
	#NUM_PSECTORS_48GB
 (
NUM_PSECTORS_16GB
*3)

	)

53 
	#NUM_PSECTORS_64GB
 (
NUM_PSECTORS_32GB
*2)

	)

54 
	#NUM_PSECTORS_80GB
 (
NUM_PSECTORS_16GB
*5)

	)

55 
	#NUM_PSECTORS_96GB
 (
NUM_PSECTORS_32GB
*3)

	)

56 
	#NUM_PSECTORS_128GB
 (
NUM_PSECTORS_64GB
*2)

	)

57 
	#NUM_PSECTORS_160GB
 (
NUM_PSECTORS_32GB
*5)

	)

58 
	#NUM_PSECTORS_192GB
 (
NUM_PSECTORS_64GB
*3)

	)

59 
	#NUM_PSECTORS_256GB
 (
NUM_PSECTORS_128GB
*2)

	)

60 
	#NUM_PSECTORS_320GB
 (
NUM_PSECTORS_64GB
*5)

	)

61 
	#NUM_PSECTORS_384GB
 (
NUM_PSECTORS_128GB
*3)

	)

62 
	#NUM_PSECTORS_512GB
 (
NUM_PSECTORS_256GB
*2)

	)

64 
	#BYTES_PER_PAGE
 (
BYTES_PER_SECTOR
 * 
SECTORS_PER_PAGE
)

	)

65 
	#BYTES_PER_PAGE_EXT
 ((
BYTES_PER_PHYPAGE
 + 
SPARE_PER_PHYPAGE
Ë* 
PHYPAGES_PER_PAGE
)

	)

66 
	#BYTES_PER_PHYPAGE
 (
BYTES_PER_SECTOR
 * 
SECTORS_PER_PHYPAGE
)

	)

67 
	#BYTES_PER_VBLK
 (
BYTES_PER_SECTOR
 * 
SECTORS_PER_VBLK
)

	)

68 
	#BYTES_PER_BANK
 ((
UINT64
Ë
BYTES_PER_PAGE
 * 
PAGES_PER_BANK
)

	)

69 
	#BYTES_PER_SMALL_PAGE
 (
BYTES_PER_PHYPAGE
 * 
CHN_WIDTH
)

	)

70 #i‡
OPTION_2_PLANE


71 
	#PHYPAGES_PER_PAGE
 (
CHN_WIDTH
 * 
NUM_PLANES
)

	)

73 
	#PHYPAGES_PER_PAGE
 
CHN_WIDTH


	)

75 
	#SECTORS_PER_PAGE
 (
SECTORS_PER_PHYPAGE
 * 
PHYPAGES_PER_PAGE
)

	)

76 
	#SECTORS_PER_SMALL_PAGE
 (
SECTORS_PER_PHYPAGE
 * 
CHN_WIDTH
)

	)

77 
	#SECTORS_PER_VBLK
 (
SECTORS_PER_PAGE
 * 
PAGES_PER_VBLK
)

	)

78 
	#SECTORS_PER_BANK
 (
SECTORS_PER_PAGE
 * 
PAGES_PER_BANK
)

	)

79 
	#PAGES_PER_BANK
 (
PAGES_PER_VBLK
 * 
VBLKS_PER_BANK
)

	)

80 
	#PAGES_PER_BLK
 (
PAGES_PER_VBLK
)

	)

81 #i‡
OPTION_2_PLANE


82 
	#VBLKS_PER_BANK
 (
PBLKS_PER_BANK
 / 
NUM_PLANES
)

	)

83 
	#SPARE_VBLKS_PER_BANK
 (
SPARE_PBLKS_PER_BANK
 / 
NUM_PLANES
)

	)

85 
	#VBLKS_PER_BANK
 
PBLKS_PER_BANK


	)

86 
	#SPARE_VBLKS_PER_BANK
 
SPARE_PBLKS_PER_BANK


	)

89 
	#NUM_VBLKS
 (
VBLKS_PER_BANK
 * 
NUM_BANKS
)

	)

90 
	#NUM_VPAGES
 (
PAGES_PER_VBLK
 * 
NUM_VBLKS
)

	)

91 
	#NUM_PSECTORS
 (
SECTORS_PER_VBLK
 * ((
VBLKS_PER_BANK
 - 
SPARE_VBLKS_PER_BANK
Ë* 
NUM_BANKS
))

	)

92 
	#NUM_LPAGES
 ((
NUM_LSECTORS
 + 
SECTORS_PER_PAGE
 - 1Ë/ SECTORS_PER_PAGE)

	)

94 
	#ROWS_PER_PBLK
 
PAGES_PER_VBLK


	)

95 
	#ROWS_PER_BANK
 (
ROWS_PER_PBLK
 * 
PBLKS_PER_BANK
)

	)

102 
	#BYTES_PER_FW_PAGE
 2048

	)

103 
	#SECTORS_PER_FW_PAGE
 (
BYTES_PER_FW_PAGE
 / 
BYTES_PER_SECTOR
)

	)

104 
	#SCAN_LIST_PAGE_OFFSET
 0

	)

105 
	#STAMP_PAGE_OFFSET
 4

	)

106 
	#FW_PAGE_OFFSET
 5

	)

113 
	#FLASH_ID_BYTES
 5

	)

117 
	#DRAM_ECC_UNIT
 128

	)

119 #ifde‡
TRUE


120 #unde‡
TRUE


123 #ifde‡
FALSE


124 #unde‡
FALSE


127 #ifde‡
NULL


128 #unde‡
NULL


132 
	#TRUE
 1

	)

133 
	#FALSE
 0

	)

134 
	#NULL
 0

	)

135 
	#OK
 
TRUE


	)

136 
	#FAIL
 
FALSE


	)

137 
	#INVALID
 0xABABABAB

138 
	#INVALID8
 ((
UINT8
Ë-1)

	)

139 
	#INVALID16
 ((
UINT16
Ë-1)

	)

140 
	#INVALID32
 ((
UINT32
Ë-1)

	)

142 
	tBOOL8
;

143 
	tBOOL16
;

144 
	tBOOL32
;

145 
	tUINT8
;

146 
	tUINT16
;

147 
	tUINT32
;

148 
	tUINT64
;

150 
	#MIN
(
X
, 
Y
Ë((XË> (YË? (YË: (X))

	)

151 
	#MAX
(
X
, 
Y
Ë((XË> (YË? (XË: (Y))

	)

153 
dñay
(
UINT32
 c⁄° 
cou¡
);

155 
	~"Êash.h
"

156 
	~"ßè.h
"

157 
	~"ßè_cmd.h
"

158 
	~"ßè_ªgi°îs.h
"

159 
	~"mem_utû.h
"

160 
	~"èrgë.h
"

161 
	~"b™k.h
"

168 
	#SCAN_LIST_SIZE
 
BYTES_PER_SMALL_PAGE


	)

169 
	#SCAN_LIST_ITEMS
 ((
SCAN_LIST_SIZE
 / (
UINT16
)Ë- 1)

	)

173 
UINT16
 
	mnum_íåõs
;

174 
UINT16
 
	mli°
[
SCAN_LIST_ITEMS
];

175 }
	tsˇn_li°_t
;

181 
	#NUM_LSECTORS
 (
NUM_PSECTORS
 / 100 * 93)

182 

	)

183 
	~"·l.h
"

184 
	~"misc.h
"

186 #i‚de‡
PROGRAM_INSTALLER


187 
	~"u¨t.h
"

	@include/mem_util.h

20 #i‚def 
MEM_UTIL_H


21 
	#MEM_UTIL_H


	)

24 
UINT8
 
g_ãmp_mem
[
BYTES_PER_SECTOR
];

31 
	#mem_£t_§am
(
ADDR
, 
VAL
, 
BYTES
Ë
	`_mem_£t_§am
((
UINT32
Ë(ADDR), (UINT32Ë(VAL), (UINT32Ë(BYTES))

	)

32 
	#mem_£t_døm
(
ADDR
, 
VAL
, 
BYTES
Ë
	`_mem_£t_døm
((
UINT32
Ë(ADDR), (UINT32Ë(VAL), (UINT32Ë(BYTES))

	)

33 
	#mem_c›y
(
DST
, 
SRC
, 
BYTES
Ë
	`_mem_c›y
((*Ë(DST), (*Ë(SRC), (
UINT32
Ë(BYTES))

	)

34 
	#mem_bmp_föd_§am
(
BMP
, 
BYTES
, 
VAL
Ë
	`_mem_bmp_föd_§am
((*Ë(BMP), (
UINT32
Ë(BYTES), (UINT32Ë(VAL))

	)

35 
	#mem_bmp_föd_døm
(
BMP
, 
BYTES
, 
VAL
Ë
	`_mem_bmp_föd_døm
((*Ë(BMP), (
UINT32
Ë(BYTES), (UINT32Ë(VAL))

	)

36 
	#mem_£¨ch_mö_max
(
ADDR
, 
UNIT
, 
SIZE
, 
CMD
Ë
	`_mem_£¨ch_mö_max
((*Ë(ADDR), (
UINT32
Ë(UNIT), (UINT32Ë(SIZE), (UINT32Ë(CMD))

	)

37 
	#mem_£¨ch_equ
(
ADDR
, 
UNIT
, 
SIZE
, 
CMD
, 
VAL
Ë
	`_mem_£¨ch_equ
((*Ë(ADDR), (
UINT32
Ë(UNIT), (UINT32Ë(SIZE), (UINT32Ë(CMD), (UINT32Ë(VAL))

	)

38 
	#mem_£¨ch_equ_§am
(
ADDR
, 
UNIT
, 
SIZE
, 
VAL
Ë
	`mem_£¨ch_equ
(ADDR, UNIT, SIZE, 
MU_CMD_SEARCH_EQU_SRAM
, VAL)

	)

39 
	#mem_£¨ch_equ_døm
(
ADDR
, 
UNIT
, 
SIZE
, 
VAL
Ë
	`mem_£¨ch_equ
(ADDR, UNIT, SIZE, 
MU_CMD_SEARCH_EQU_DRAM
, VAL)

	)

42 
	#mem_cmp_§am
(
ADDR1
, 
ADDR2
, 
BYTES
Ë
	`_mem_cmp_§am
((*Ë(ADDR1), (*Ë(ADDR2), (BYTES))

	)

43 
	#mem_cmp_døm
(
ADDR1
, 
ADDR2
, 
BYTES
Ë
	`_mem_cmp_døm
((*Ë(ADDR1), (*Ë(ADDR2), (BYTES))

	)

45 
_mem_£t_§am
(
UINT32
 
addr
, UINT32 c⁄° 
vÆ
, UINT32 
byãs
);

46 
_mem_£t_døm
(
UINT32
 
addr
, UINT32 c⁄° 
vÆ
, UINT32 
byãs
);

47 
_mem_c›y
(* c⁄° 
d°
, c⁄° * c⁄° 
§c
, 
UINT32
 c⁄° 
byãs
);

48 
UINT32
 
_mem_bmp_föd_§am
(c⁄° * c⁄° 
bôm≠
, UINT32 c⁄° 
byãs
, UINT32 c⁄° 
vÆ
);

49 
UINT32
 
_mem_bmp_föd_døm
(c⁄° * c⁄° 
bôm≠
, UINT32 c⁄° 
byãs
, UINT32 c⁄° 
vÆ
);

50 
UINT32
 
_mem_£¨ch_mö_max
(c⁄° * c⁄° 
addr
, UINT32 c⁄° 
unô
, UINT32 c⁄° 
size
, UINT32 c⁄° 
cmd
);

51 
UINT32
 
_mem_£¨ch_equ
(c⁄° * c⁄° 
addr
, UINT32 c⁄° 
unô
, UINT32 c⁄° 
size
, UINT32 c⁄° 
cmd
, UINT32 c⁄° 
vÆ
);

53 
UINT32
 
_mem_cmp_§am
(c⁄° * c⁄° 
addr1
, c⁄° * c⁄° 
addr2
, c⁄° UINT32 
byãs
);

54 
UINT32
 
_mem_cmp_døm
(c⁄° * c⁄° 
addr1
, c⁄° * c⁄° 
addr2
, c⁄° UINT32 
byãs
);

56 
	#ªad_døm_8
(
ADDR
Ë
	`_ªad_døm_8
((
UINT32
Ë(ADDR))

	)

57 
	#ªad_døm_16
(
ADDR
Ë
	`_ªad_døm_16
((
UINT32
Ë(ADDR))

	)

58 
	#ªad_døm_32
(
ADDR
Ë
	`_ªad_døm_32
((
UINT32
Ë(ADDR))

	)

59 
	#wrôe_døm_8
(
ADDR
, 
VAL
Ë
	`_wrôe_døm_8
((
UINT32
Ë(ADDR), (
UINT8
Ë(VAL))

	)

60 
	#wrôe_døm_16
(
ADDR
, 
VAL
Ë
	`_wrôe_døm_16
((
UINT32
Ë(ADDR), (
UINT16
Ë(VAL))

	)

61 
	#wrôe_døm_32
(
ADDR
, 
VAL
Ë
	`_wrôe_døm_32
((
UINT32
Ë(ADDR), (UINT32Ë(VAL))

	)

62 
	#£t_bô_døm
(
BASE_ADDR
, 
BIT_OFFSET
Ë
	`_£t_bô_døm
((
UINT32
Ë(BASE_ADDR), (UINT32Ë(BIT_OFFSET))

	)

63 
	#˛r_bô_døm
(
BASE_ADDR
, 
BIT_OFFSET
Ë
	`_˛r_bô_døm
((
UINT32
Ë(BASE_ADDR), (UINT32Ë(BIT_OFFSET))

	)

64 
	#t°_bô_døm
(
BASE_ADDR
, 
BIT_OFFSET
Ë
	`_t°_bô_døm
((
UINT32
Ë(BASE_ADDR), (UINT32Ë(BIT_OFFSET))

	)

66 
UINT8
 
_ªad_døm_8
(
UINT32
 c⁄° 
addr
);

67 
UINT16
 
_ªad_døm_16
(
UINT32
 c⁄° 
addr
);

68 
UINT32
 
_ªad_døm_32
(UINT32 c⁄° 
addr
);

69 
_wrôe_døm_8
(
UINT32
 c⁄° 
addr
, 
UINT8
 c⁄° 
vÆ
);

70 
_wrôe_døm_16
(
UINT32
 c⁄° 
addr
, 
UINT16
 c⁄° 
vÆ
);

71 
_wrôe_døm_32
(
UINT32
 c⁄° 
addr
, UINT32 c⁄° 
vÆ
);

72 
_£t_bô_døm
(
UINT32
 c⁄° 
ba£_addr
, UINT32 c⁄° 
bô_off£t
);

73 
_˛r_bô_døm
(
UINT32
 c⁄° 
ba£_addr
, UINT32 c⁄° 
bô_off£t
);

74 
BOOL32
 
_t°_bô_døm
(
UINT32
 c⁄° 
ba£_addr
, UINT32 c⁄° 
bô_off£t
);

76 
	#£t_bô_§am
(
BITMAP
, 
OFFSET
Ë*(((
UINT8
*)(BITMAPË+ (OFFSET)/8)Ë|1 << ((OFFSETË% 8)

	)

77 
	#˛r_bô_§am
(
BITMAP
, 
OFFSET
Ë*(((
UINT8
*)(BITMAPË+ (OFFSET)/8)Ë&~(1 << ((OFFSETË% 8))

	)

78 
	#t°_bô_§am
(
BITMAP
, 
OFFSET
Ë((*(((
UINT8
*)(BITMAP)Ë+ (OFFSET)/8Ë& (1 << ((OFFSETË% 8))Ë!0)

	)

85 
	#MU_SRC_ADDR
 (
MREG_BASE
 + 0x10)

	)

86 
	#MU_DST_ADDR
 (
MREG_BASE
 + 0x14)

	)

87 
	#MU_VALUE
 (
MREG_BASE
 + 0x18)

	)

88 
	#MU_SIZE
 (
MREG_BASE
 + 0x1C)

89 
	#MU_RESULT
 (
MREG_BASE
 + 0x20)

	)

90 
	#MU_CMD
 (
MREG_BASE
 + 0x24)

	)

91 
	#MU_UNITSTEP
 (
MREG_BASE
 + 0x30)

92 

	)

98 
	#MU_CMD_SET_REPT_SRAM
 0x000

	)

99 
	#MU_CMD_SET_INCR_32_SRAM
 0x010

	)

100 
	#MU_CMD_SET_INCR_16_SRAM
 0x020

	)

101 
	#MU_CMD_SET_INCR_8_SRAM
 0x030

	)

103 
	#MU_CMD_SET_REPT_DRAM
 0x040

	)

104 
	#MU_CMD_SET_INCR_32_DRAM
 0x050

	)

105 
	#MU_CMD_SET_INCR_16_DRAM
 0x060

	)

106 
	#MU_CMD_SET_INCR_8_DRAM
 0x070

	)

108 
	#MU_CMD_COPY
 0x001

	)

110 
	#MU_CMD_FIND_SRAM
 0x002

	)

111 
	#MU_CMD_FIND_DRAM
 0x042

	)

113 
	#MU_CMD_SEARCH_MAX_SRAM
 0x103

	)

114 
	#MU_CMD_SEARCH_MIN_SRAM
 0x083

	)

115 
	#MU_CMD_SEARCH_EQU_SRAM
 0x003

	)

117 
	#MU_CMD_SEARCH_MAX_DRAM
 0x143

	)

118 
	#MU_CMD_SEARCH_MIN_DRAM
 0x0C3

	)

119 
	#MU_CMD_SEARCH_EQU_DRAM
 0x043

	)

121 
	#MU_MAX_BYTES
 32768

	)

123 
	#SDRAM_ECC_UNIT
 128

	)

125 
	#MU_UNIT_8
 (0 << 8)

126 
	#MU_UNIT_16
 (1 << 8)

	)

127 
	#MU_UNIT_32
 (2 << 8)

	)

	@include/nand.h

20 #i‚def 
NAND_H


21 
	#NAND_H


	)

29 
	#MT29F64G08CFABA
 64

30 
	#K9LCG08U1M
 73

31 

	)

32 
	#NAND_SPEC_SAMSUNG
 0xEC

	)

33 
	#NAND_SPEC_TOSHIBA
 0x98

	)

34 
	#NAND_SPEC_MICRON
 0x2C

	)

35 
	#NAND_SPEC_HYNIX
 0xAD

	)

36 
	#NAND_SPEC_INTEL
 0x89

	)

37 
	#NAND_SPEC_SANDISK
 0x45

	)

39 
	#NAND_SPEC_PLANE_1
 1

40 
	#NAND_SPEC_PLANE_2
 2

41 
	#NAND_SPEC_PLANE_3
 3

42 

	)

43 
	#NAND_SPEC_DIE_1
 1

44 
	#NAND_SPEC_DIE_2
 2

45 

	)

46 
	#NAND_SPEC_CELL_SLC
 1

47 
	#NAND_SPEC_CELL_MLC
 2

48 

	)

49 
	#NAND_SPEC_MLC_TYPE_1
 1

50 
	#NAND_SPEC_MLC_TYPE_2
 2

51 
	#NAND_SPEC_MLC_TYPE_3
 3

52 

	)

53 
	#NAND_SPEC_FAST
 1

54 
	#NAND_SPEC_SLOW
 2

55 
	#NAND_SPEC_DULL
 3

56 
	#NAND_SPEC_VERY_FAST
 4

57 

	)

58 
	#NAND_SPEC_READ_CYCLE_1
 1

	)

59 
	#NAND_SPEC_READ_CYCLE_2
 2

	)

60 
	#NAND_SPEC_READ_CYCLE_3
 3

	)

62 #i‡
FLASH_TYPE
 =
K9LCG08U1M


63 
	#NAND_SPEC_ID
 0x547294D7

	)

64 
	#NAND_SPEC_ID_MASK
 0xFFFFFFFF

	)

65 
	#NAND_SPEC_MF
 
NAND_SPEC_SAMSUNG


	)

66 
	#NAND_SPEC_PLANE
 
NAND_SPEC_PLANE_2


	)

67 
	#NAND_SPEC_DIE
 
NAND_SPEC_DIE_1


	)

68 
	#NAND_SPEC_CELL
 
NAND_SPEC_CELL_MLC


	)

69 
	#NAND_SPEC_SPEED
 
NAND_SPEC_SLOW


	)

70 
	#NAND_SPEC_MLC
 
NAND_SPEC_MLC_TYPE_2


	)

71 
	#NAND_SPEC_READ
 
NAND_SPEC_READ_CYCLE_2


	)

72 
	#SECTORS_PER_PHYPAGE
 16

	)

73 
	#PAGES_PER_VBLK
 128

	)

74 
	#_PBLKS_PER_BANK
 4096

	)

75 
	#SPARE_PBLKS_PER_BANK
 56

	)

76 
	#SPARE_PER_PHYPAGE
 448

	)

78 #ñi‡
FLASH_TYPE
 =
MT29F64G08CFABA


79 
	#NAND_SPEC_ID
 (0x89460468 & 
NAND_SPEC_ID_MASK
)

	)

80 
	#NAND_SPEC_ID_MASK
 0xFFFF0FFF

	)

81 
	#NAND_SPEC_MF
 
NAND_SPEC_MICRON


	)

82 
	#NAND_SPEC_PLANE
 
NAND_SPEC_PLANE_2


	)

83 
	#NAND_SPEC_DIE
 
NAND_SPEC_DIE_1


	)

84 
	#NAND_SPEC_CELL
 
NAND_SPEC_CELL_MLC


	)

85 
	#NAND_SPEC_SPEED
 
NAND_SPEC_FAST


	)

86 
	#NAND_SPEC_MLC
 
NAND_SPEC_MLC_TYPE_1


	)

87 
	#NAND_SPEC_READ
 
NAND_SPEC_READ_CYCLE_2


	)

88 
	#SECTORS_PER_PHYPAGE
 8

	)

89 
	#PAGES_PER_VBLK
 256

	)

90 
	#_PBLKS_PER_BANK
 (8192/2)

	)

91 
	#SPARE_PBLKS_PER_BANK
 0

	)

92 
	#SPARE_PER_PHYPAGE
 224

	)

98 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_1


99 
	#NUM_PLANES
 1

100 #ñ£

	)

101 
	#NUM_PLANES
 2

	)

104 #i‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 28

105 
	#OVERHEAD_PER_SECTOR
 26

	)

106 
	#READ_REFRESH_THRESHOLD
 8

	)

107 #ñi‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 27

108 
	#OVERHEAD_PER_SECTOR
 26

	)

109 
	#READ_REFRESH_THRESHOLD
 8

	)

110 #ñi‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 16

111 
	#OVERHEAD_PER_SECTOR
 14

	)

112 
	#READ_REFRESH_THRESHOLD
 4

	)

115 #i‡
OPTION_REDUCED_CAPACITY


119 
	#PBLKS_PER_BANK
 ((
_PBLKS_PER_BANK
 + 
SPARE_PBLKS_PER_BANK
) / 2)

120 #ñ£

	)

121 
	#PBLKS_PER_BANK
 (
_PBLKS_PER_BANK
 + 
SPARE_PBLKS_PER_BANK
)

	)

	@include/peri.h

20 #i‚def 
PERI_H


21 
	#PERI_H


	)

27 
	#BM_WRITE_LIMIT
 (
MREG_BASE
 + 0x00)

	)

28 
	#BM_READ_LIMIT
 (
MREG_BASE
 + 0x04)

	)

29 
	#BM_STACK_RESET
 (
MREG_BASE
 + 0x08)

	)

30 
	#BM_STACK_WRSET
 (
MREG_BASE
 + 0x28)

	)

31 
	#BM_STACK_RDSET
 (
MREG_BASE
 + 0x2C)

	)

37 
	#INTR_SATA
 0x00000001

	)

38 
	#INTR_FLASH
 0x00000002

	)

39 
	#INTR_SDRAM
 0x00000004

	)

40 
	#INTR_UART_TX
 0x00000008

	)

41 
	#INTR_UART_RX
 0x00000010

	)

42 
	#INTR_TIMER_4
 0x00000020

	)

43 
	#INTR_TIMER_3
 0x00000040

	)

44 
	#INTR_TIMER_2
 0x00000080

	)

45 
	#INTR_TIMER_1
 0x00000100

	)

46 
	#INTR_WATCH_DOG
 0x00000200

	)

47 
	#INTR_EXT
 0x00000400

	)

49 
	#APB_ICU_CON
 (0x85000000 + 0x000)

	)

50 
	#APB_INT_STS
 (0x85000000 + 0x004)

	)

51 
	#APB_INT_MSK
 (0x85000000 + 0x00C)

	)

52 
	#APB_PRI_SET1
 (0x85000000 + 0x054)

	)

53 
	#APB_PRI_SET2
 (0x85000000 + 0x058)

	)

59 
	#SDRAM_INIT
 0x48000000

	)

60 
	#SDRAM_CTRL
 0x48000004

	)

61 
	#SDRAM_REFRESH
 0x48000008

	)

62 
	#SDRAM_TIMING
 0x4800000C

	)

63 
	#SDRAM_MRS
 0x48000010

	)

64 
	#SDRAM_STATUS
 0x48000014

	)

65 
	#SDRAM_INTCTRL
 0x48000018

	)

66 
	#SDRAM_INTSTATUS
 0x4800001C

	)

67 
	#SDRAM_ECC_MON
 0x48000020

	)

71 
	#SDRAM_16MB
 (0 << 0)

	)

72 
	#SDRAM_32MB
 (1 << 0)

	)

73 
	#SDRAM_64MB
 (2 << 0)

	)

74 
	#SDRAM_CL_2
 (0 << 2)

75 
	#SDRAM_CL_3
 (1 << 2)

	)

76 
	#SDRAM_RAS
(
X
Ë((XË<< 3)

	)

77 
	#SDRAM_AUTO_WAKE_UP
 (1 << 6)

	)

78 
	#SDRAM_ECC_DISABLE
 (1 << 8)

	)

79 
	#SDRAM_INIT_PERIOD
(
X
Ë((()(X)Ë<< 16)

	)

83 
	#SDRAM_INITIALIZE
 (1 << 0)

	)

84 
	#SDRAM_FORCE_REFRESH
 (1 << 1)

	)

85 
	#SDRAM_DEEP_POWER_DOWN
 (1 << 2)

	)

86 
	#SDRAM_DP_WAKE_UP
 (1 << 3)

	)

87 
	#SDRAM_SELF_REFRESH
 (1 << 4)

	)

88 
	#SDRAM_SR_WAKE_UP
 (1 << 5)

	)

92 
	#SDRAM_RF_PERIOD
(
X
Ë((XË<< 0)

	)

93 
	#SDRAM_TRC
(
X
Ë((XË<< 12)

	)

94 
	#SDRAM_TRP
(
X
Ë((XË<< 16)

	)

98 
	#SDRAM_INT_ECC_FAIL
 0x001

	)

99 
	#SDRAM_INT_ECC_CORR
 0x002

	)

100 
	#SDRAM_INT_ADDR_OF
 0x004

	)

101 
	#SDRAM_INT_ENABLE
 0x100

	)

105 
	#SDRAM_RDCLK_DLY
(
X
Ë((XË<< 0)

	)

106 
	#SDRAM_RD_CAP_DLY_0
(
X
Ë((XË<< 4)

	)

107 
	#SDRAM_SDCLK_DLY
(
X
Ë((XË<< 5)

	)

108 
	#SDRAM_RD_CAP_DLY_1
(
X
Ë((XË<< 9)

	)

109 
	#SDRAM_CAP_CLK_SEL
(
X
Ë((XË<< 10)

	)

113 
	#SDRAM_MRS_KEY
(
X
Ë((XË<< 0)

	)

114 
	#SDRAM_EMRS_KEY
(
X
Ë((XË<< 16)

	)

121 
	#SEG_SETVAL
 (
MREG_BASE
 + 0x34)

122 
	#SEG_TIME
 (
MREG_BASE
 + 0x38)

123 
	#SEG_CTRL
 (
MREG_BASE
 + 0x3C)

124 

	)

125 
	#MREG_SIZE
 (4 + 0x3C)

	)

132 
	#GPIO_REG
 (
GPIO_BASE
 + 0x00)

	)

133 
	#GPIO_MON
 (
GPIO_BASE
 + 0x04)

	)

134 
	#GPIO_DIR
 (
GPIO_BASE
 + 0x08)

	)

135 
	#GPIO_MOD
 (
GPIO_BASE
 + 0x0C)

	)

136 
	#PHY_DEBUG
 (
GPIO_BASE
 + 0x40)

	)

137 
	#PHY_MON
 (
GPIO_BASE
 + 0x44)

	)

138 
	#PHY_TXCTRL
 (
GPIO_BASE
 + 0x48)

	)

139 
	#PHY_PWR
 (
GPIO_BASE
 + 0x4C)

	)

141 
	#GPIODIR_B
 (
GPIO_BASE
 + 0x80)

142 
	#GPIODIR_C
 (
GPIO_BASE
 + 0x84)

	)

143 
	#GPIODIR_D
 (
GPIO_BASE
 + 0x88)

	)

144 
	#GPIO_B
 (
GPIO_BASE
 + 0x8C)

	)

145 
	#GPIO_C
 (
GPIO_BASE
 + 0x90)

	)

146 
	#GPIO_D
 (
GPIO_BASE
 + 0x94)

	)

147 
	#GPIODIR_E
 (
GPIO_BASE
 + 0x98)

	)

148 
	#GPIODIR_F
 (
GPIO_BASE
 + 0x9C)

	)

149 
	#GPIODIR_G
 (
GPIO_BASE
 + 0xA0)

	)

150 
	#GPIODIR_H
 (
GPIO_BASE
 + 0xA4)

	)

151 
	#GPIO_E
 (
GPIO_BASE
 + 0xA8)

	)

152 
	#GPIO_F
 (
GPIO_BASE
 + 0xAC)

	)

153 
	#GPIO_G
 (
GPIO_BASE
 + 0xB0)

	)

154 
	#GPIO_H
 (
GPIO_BASE
 + 0xB4)

	)

155 
	#GPIODIR_I
 (
GPIO_BASE
 + 0xB8)

	)

156 
	#GPIODIR_J
 (
GPIO_BASE
 + 0xBC)

	)

157 
	#GPIODIR_K
 (
GPIO_BASE
 + 0xC0)

	)

158 
	#GPIODIR_L
 (
GPIO_BASE
 + 0xC4)

	)

159 
	#GPIO_I
 (
GPIO_BASE
 + 0xC8)

	)

160 
	#GPIO_J
 (
GPIO_BASE
 + 0xCC)

	)

161 
	#GPIO_K
 (
GPIO_BASE
 + 0xD0)

	)

162 
	#GPIO_L
 (
GPIO_BASE
 + 0xD4)

	)

163 
	#GPIODIR_M
 (
GPIO_BASE
 + 0xD8)

	)

164 
	#GPIODIR_N
 (
GPIO_BASE
 + 0xDC)

	)

165 
	#GPIO_M
 (
GPIO_BASE
 + 0xE0)

	)

166 
	#GPIO_N
 (
GPIO_BASE
 + 0xE4)

	)

168 
	#GPIO_SIZE
 (4 + 0xE4)

	)

175 
	#PMU_Re£tC⁄
 0x80000000

	)

176 
	#ClkMaskC⁄
 0x80000004

	)

177 
	#PŒC⁄
 0x80000008

	)

178 
	#CLKSñC⁄
 0x8000000C

	)

179 
	#Rem≠C⁄
 0x80000014

	)

180 
	#ExtINTC⁄
 0x80000018

	)

183 
	#RESET_PHYPOR
 (1 << 31)

	)

184 
	#RESET_SATAHCLK
 (1 << 12)

	)

185 
	#RESET_PMCLK
 (1 << 11)

	)

186 
	#RESET_SATADWCLK
 (1 << 10)

187 
	#RESET_PHYDOMAIN
 (1 << 8)

	)

188 
	#RESET_TIMER
 (1 << 7)

	)

189 
	#RESET_UART
 (1 << 6)

	)

190 
	#RESET_GPIO
 (1 << 5)

	)

191 
	#RESET_BM
 (1 << 4)

	)

192 
	#RESET_SATA
 (1 << 3)

	)

193 
	#RESET_FLASH
 (1 << 2)

	)

194 
	#RESET_SDRAM
 (1 << 1)

	)

195 
	#RESET_ARM
 (1 << 0)

	)

198 
	#PLL_F
(
X
) ((X) << 0)

199 
	#PLL_R
(
X
) ((X) << 8)

200 
	#PLL_OD
(
X
) ((X) << 13)

201 
	#PLL_BP
 (1 << 15)

202 
	#PLL_PD
 (1 << 16)

203 
	#PLL_LD
 (1 << 17)

204 

	)

206 
	#USE_PLL_CLK
 (1 << 0)

	)

207 
	#USE_BYPASS_CLK
 (0 << 0)

	)

213 
	#UART_CTRL
 0x81000000

	)

214 
	#UART_BAUDRATE
 0x81000004

	)

215 
	#UART_FIFOCTRL
 0x81000008

	)

216 
	#UART_FIFOCNT
 0x8100000C

	)

217 
	#UART_FIFODATA
 0x81000010

	)

224 
	#WATCHDOG_BASE
 0x84000000

	)

226 
	#WT_LOAD
 (
WATCHDOG_BASE
 + 0x0000)

	)

227 
	#WT_VALUE
 (
WATCHDOG_BASE
 + 0x0004)

	)

228 
	#WT_CONTROL
 (
WATCHDOG_BASE
 + 0x0008)

	)

229 
	#WT_INT_CLR
 (
WATCHDOG_BASE
 + 0x000C)

	)

230 
	#WT_RIS
 (
WATCHDOG_BASE
 + 0x0010)

	)

231 
	#WT_MIS
 (
WATCHDOG_BASE
 + 0x0014)

	)

232 
	#WT_LOCK
 (
WATCHDOG_BASE
 + 0x0C00)

	)

233 
	#WT_TCR
 (
WATCHDOG_BASE
 + 0x0F00)

	)

234 
	#WT_TOP
 (
WATCHDOG_BASE
 + 0x0F04)

	)

236 
	#WT_ENABLE_INT
 (1 << 0)

237 
	#WT_ENABLE_RESET
 (1 << 1)

238 

	)

244 
	#TIMER_BASE
 0x82000000

	)

246 
	#TM_1_LOAD
 (
TIMER_BASE
 + 0x00)

	)

247 
	#TM_1_VALUE
 (
TIMER_BASE
 + 0x04)

	)

248 
	#TM_1_CONTROL
 (
TIMER_BASE
 + 0x08)

	)

249 
	#TM_1_INT_CLR
 (
TIMER_BASE
 + 0x0C)

	)

250 
	#TM_1_RIS
 (
TIMER_BASE
 + 0x10)

	)

251 
	#TM_1_MIS
 (
TIMER_BASE
 + 0x14)

	)

252 
	#TM_1_BG_LOAD
 (
TIMER_BASE
 + 0x18)

	)

254 
	#TM_2_LOAD
 (
TIMER_BASE
 + 0x20)

	)

255 
	#TM_2_VALUE
 (
TIMER_BASE
 + 0x24)

	)

256 
	#TM_2_CONTROL
 (
TIMER_BASE
 + 0x28)

	)

257 
	#TM_2_INT_CLR
 (
TIMER_BASE
 + 0x2C)

	)

258 
	#TM_2_RIS
 (
TIMER_BASE
 + 0x30)

	)

259 
	#TM_2_MIS
 (
TIMER_BASE
 + 0x34)

	)

260 
	#TM_2_BG_LOAD
 (
TIMER_BASE
 + 0x38)

	)

262 
	#TM_3_LOAD
 (
TIMER_BASE
 + 0x40)

	)

263 
	#TM_3_VALUE
 (
TIMER_BASE
 + 0x44)

	)

264 
	#TM_3_CONTROL
 (
TIMER_BASE
 + 0x48)

	)

265 
	#TM_3_INT_CLR
 (
TIMER_BASE
 + 0x4C)

	)

266 
	#TM_3_RIS
 (
TIMER_BASE
 + 0x50)

	)

267 
	#TM_3_MIS
 (
TIMER_BASE
 + 0x54)

	)

268 
	#TM_3_BG_LOAD
 (
TIMER_BASE
 + 0x58)

	)

270 
	#TM_4_LOAD
 (
TIMER_BASE
 + 0x60)

	)

271 
	#TM_4_VALUE
 (
TIMER_BASE
 + 0x64)

	)

272 
	#TM_4_CONTROL
 (
TIMER_BASE
 + 0x68)

	)

273 
	#TM_4_INT_CLR
 (
TIMER_BASE
 + 0x6C)

	)

274 
	#TM_4_RIS
 (
TIMER_BASE
 + 0x70)

	)

275 
	#TM_4_MIS
 (
TIMER_BASE
 + 0x74)

	)

276 
	#TM_4_BG_LOAD
 (
TIMER_BASE
 + 0x78)

	)

278 
	#TM_TCR
 (
TIMER_BASE
 + 0x0F00)

	)

279 
	#TM_TOP
 (
TIMER_BASE
 + 0x0F04)

	)

281 
	#TM_SHOT
 (1 << 0)

282 
	#TM_BIT_32
 (1 << 1)

283 
	#TM_PRESCALE_0
 (0 << 2)

284 
	#TM_PRESCALE_4
 (1 << 2)

285 
	#TM_PRESCALE_8
 (2 << 2)

286 
	#TM_INTR
 (1 << 5)

287 
	#TM_INTR_DIS
 (0 << 5)

288 
	#TM_MODE_PRD
 (1 << 6)

289 
	#TM_ENABLE
 (1 << 7)

290 

	)

291 
	#TIMER_CH1
 1

	)

292 
	#TIMER_CH2
 2

	)

293 
	#TIMER_CH3
 3

	)

294 
	#TIMER_CH4
 4

295 

	)

296 
	#SET_TIMER_LOAD
(
ch
, 
vÆ
Ë(
	`SETREG
(
TM_1_LOAD
 + (0x20 * (ch - 1)), vÆ))

	)

297 
	#SET_TIMER_BG_LOAD
(
ch
, 
vÆ
Ë(
	`SETREG
(
TM_1_BG_LOAD
 + (0x20 * (ch - 1)), vÆ))

	)

298 
	#GET_TIMER_VALUE
(
ch
Ë(
	`GETREG
(
TM_1_VALUE
 + (0x20 * (ch - 1))))

	)

299 
	#SET_TIMER_CONTROL
(
ch
, 
vÆ
Ë(
	`SETREG
(
TM_1_CONTROL
 + (0x20 * (ch - 1)), vÆ))

	)

300 
	#CLEAR_TIMER_INTR
(
ch
Ë(
	`SETREG
(
TM_1_INT_CLR
 + (0x20 * (ch - 1)), 0x01))

	)

302 
	#PRESCALE_TO_DIV
(
vÆ
Ë(vÆ==0?1:vÆ==1?16:256)

	)

304 
	#TIMER_PRESCALE_0
 (0 << 2)

305 
	#TIMER_PRESCALE_1
 (1 << 2)

306 
	#TIMER_PRESCALE_2
 (2 << 2)

307 

	)

	@include/rom.h

19 #i‚de‡
ROM_H


20 
	#ROM_H


	)

22 
	#ROM_SRAM_BUF_SIZE
 16384

	)

23 
	#ROM_DRAM_BUF_LBA
 2048

	)

24 
	#ROM_DRAM_BUF_ADDR
 (
DRAM_BASE
 + 
ROM_DRAM_BUF_LBA
 * 
BYTES_PER_SECTOR
)

	)

25 
	#ROM_SCAN_BUF_SIZE
 (100*1024)

26 

	)

27 
	#FACTORY_CMD_SIGNATURE
 0x3FB82E0A

	)

29 
	#ROM_BYTES_PER_PAGE
 2048

	)

31 
	#ROM_CMD_FLASH_CMD
 0x02

	)

32 
	#ROM_CMD_FLASH_FINISH
 0x01

	)

33 
	#ROM_CMD_MU_CMD
 0x03

	)

34 
	#ROM_CMD_RUN_CODE
 0x04

	)

35 
	#ROM_CMD_RESET_FLASH
 0x07

36 
	#ROM_CMD_SCAN
 0x08

	)

37 
	#ROM_CMD_FACTORY_MODE
 0x0B

	)

38 
	#ROM_CMD_READ_MEM
 0x10

	)

39 
	#ROM_CMD_WRITE_MEM
 0x11

	)

40 
	#ROM_CMD_RESET
 0x12

	)

41 
	#ROM_CMD_DO_NOTHING
 0xF0

	)

45 
	~"sdøm.h
"

49 
UINT32
 
	mcmd
;

50 
UINT32
 
	msubcmd
;

51 
UINT32
 
	mkey_1
;

54 
UINT32
 
	mrb™k
;

55 
UINT32
 
	m›ti⁄
;

56 
UINT32
 
	mdma_addr
;

57 
UINT32
 
	mdma_˙t
;

58 
UINT32
 
	mcﬁ
;

59 
UINT32
 
	mrow_l
;

60 
UINT32
 
	mrow_h
;

61 
UINT32
 
	md°_cﬁ
;

62 
UINT32
 
	md°_row_l
;

63 
UINT32
 
	md°_row_h
;

64 
BOOL32
 
	mwaô
;

67 
UINT32
 
	m«nd_cfg_2
;

68 
UINT32
 
	mtime_cy˛e
;

69 
UINT32
 
	m«nd_cfg_1
;

70 
UINT32
 
	mrbbqdp£À˘
;

73 
UINT32
 
	mb™k_bmp
;

74 
UINT32
 
	mrows_≥r_blk
;

75 
UINT32
 
	mshi·_Ωb
;

76 
UINT32
 
	mblks_≥r_b™k
;

77 
UINT32
 
	m°¨t_blk
;

80 
UINT32
 
	mmu_§c_addr
;

81 
UINT32
 
	mmu_d°_addr
;

82 
UINT32
 
	mmu_vÆue
;

83 
UINT32
 
	mmu_size
;

86 
UINT32
 
	mmem_addr
;

87 
UINT32
 
	mmem_vÆ
;

89 
UINT32
 
	mkey_2
;

92 
UINT32
 
	msdøm_sig«tuª_1
;

93 
UINT32
 
	msdøm_sig«tuª_2_±r
;

94 
sdøm_t
 
	msdøm
;

96 
BOOL32
 
	m˛ór
;

98 
UINT32
 
	mœ°_membî
;

99 } 
	tÁ˘‹y_cmd_t
;

	@include/sata.h

20 #i‚de‡
SATA_H


21 
	#SATA_H


	)

23 
	#BSO_RX_SSC
 
FALSE


	)

24 
	#BSO_TX_SSC
 
FALSE


	)

26 
	#CHS_MAX_ADDR
 16514064

	)

28 #i‡
NUM_LSECTORS
 - 1 <
CHS_MAX_ADDR


29 
	#CHS_HEADS
 ((
NUM_LSECTORS
 - 1Ë/ (0x3FFF * 0x3F))

	)

31 
	#CHS_HEADS
 16

	)

34 
	#MAX_LBA
 (
NUM_LSECTORS
 - 1)

	)

36 
	#NCQ_SIZE
 32

	)

40 
UINT32
 
	mqueue
[
NCQ_SIZE
][8];

41 
UINT32
 
	mgèg
;

42 } 
	tßè_ncq_t
;

44 
ßè_ncq_t
 
g_ßè_ncq
;

46 
	#CCL_FTL_D2H
 0x01

	)

47 
	#CCL_FTL_H2D
 0x02

	)

48 
	#CCL_OTHER
 0x04

	)

49 
	#CCL_UNDEFINED
 0x08

	)

51 
	#ATR_LBA_NOR
 0x10

	)

52 
	#ATR_LBA_EXT
 0x20

	)

53 
	#ATR_NO_SECT
 0x40

	)

54 
	#ATR_LOCK_FREE
 0x80

	)

56 
	#READ
 0

	)

57 
	#WRITE
 1

	)

61 
UINT32
 
	mlba
;

62 
UINT32
 
	m£˘‹_cou¡
;

63 
UINT32
 
	mcmd_ty≥
;

64 } 
	tCMD_T
;

67 
	#SLOW_CMD_STATUS_NONE
 0

	)

68 
	#SLOW_CMD_STATUS_PENDING
 1

	)

69 
	#SLOW_CMD_STATUS_BUSY
 2

	)

73 
UINT16
 
	m°©us
;

74 
UINT16
 
	mcode
;

75 
UINT32
 
	mlba
;

76 
UINT32
 
	m£˘‹_cou¡
;

77 } 
	t¶ow_cmd_t
;

81 
¶ow_cmd_t
 
	m¶ow_cmd
;

82 vﬁ©ûê
BOOL32
 
	meq_fuŒ
;

84 
UINT16
 
	mchs_cur_cylödîs
;

85 
UINT8
 
	mchs_cur_hóds
;

86 
UINT8
 
	mchs_cur_£˘‹s
;

88 
BOOL8
 
	mlba_48_mode
;

89 
BOOL8
 
	mdma_£tup_auto_a˘iv©e
;

90 
BOOL8
 
	m§°
;

91 
BOOL8
 
	mwrôe_ˇche_íabÀd
;

93 
BOOL8
 
	mªad_look_ahód_íabÀd
;

94 
UINT8
 
	munu£d1
;

95 
UINT8
 
	munu£d2
;

96 
UINT8
 
	munu£d3
;

97 } 
	tßè_c⁄ãxt_t
;

99 
ßè_c⁄ãxt_t
 
g_ßè_c⁄ãxt
;

101 
	#B_ERR
 
BIT0


	)

102 
	#B_DRQ
 
BIT3


	)

103 
	#B_DF
 
BIT5


	)

104 
	#B_DRDY
 
BIT6


	)

105 
	#B_BSY
 
BIT7


	)

106 
	#B_IRQ
 
BIT6


	)

107 
	#B_AA
 
BIT7


	)

108 
	#B_ABRT
 
BIT2


	)

109 
	#B_IDNF
 
BIT4


	)

110 
	#B_UNC
 
BIT6


	)

111 
	#B_ICRC
 
BIT7


	)

112 
	#B_HOB
 
BIT7


	)

113 
	#B_SRST
 
BIT2


	)

117 
	mFISTYPE_REGISTER_H2D
 = 0x27,

118 
	mFISTYPE_REGISTER_D2H
 = 0x34,

119 
	mFISTYPE_DMA_ACTIVATE
 = 0x39,

120 
	mFISTYPE_DMA_SETUP
 = 0x41,

121 
	mFISTYPE_DATA
 = 0x46,

122 
	mFISTYPE_BIST_ACTIVATE
 = 0x58,

123 
	mFISTYPE_PIO_SETUP
 = 0x5F,

124 
	mFISTYPE_SET_DEVICE_BITS
 = 0xA1

125 } 
	tT_FISTYPES
;

129 
	mPIO_H2D
 = 0x00,

130 
	mPIO_D2H
 = 0x01,

131 } 
	tT_PROTOCOLS
;

135 
	mATA_NOP
 = 0x00,

136 
	mATA_DATA_SET_MANAGEMENT
 = 0x06,

137 
	mATA_DEVICE_RESET
 = 0x08,

138 
	mATA_RECALIBRATE
 = 0x10,

139 
	mATA_READ_SECTORS
 = 0x20,

140 
	mATA_READ_SECTORS_EXT
 = 0x24,

141 
	mATA_READ_DMA_EXT
 = 0x25,

142 
	mATA_READ_NATIVE_MAX_ADDRESS_EXT
 = 0x27,

143 
	mATA_READ_MULTIPLE_EXT
 = 0x29,

144 
	mATA_READ_LOG_EXT
 = 0x2F,

145 
	mATA_WRITE_SECTORS
 = 0x30,

146 
	mATA_WRITE_SECTORS_EXT
 = 0x34,

147 
	mATA_WRITE_DMA_EXT
 = 0x35,

148 
	mATA_SET_MAX_ADDRESS_EXT
 = 0x37,

149 
	mATA_WRITE_MULTIPLE_EXT
 = 0x39,

150 
	mATA_WRITE_LOG_EXT
 = 0x3F,

151 
	mATA_READ_VERIFY_SECTORS
 = 0x40,

152 
	mATA_READ_VERIFY_SECTORS_EXT
 = 0x42,

153 
	mATA_READ_FPDMA_QUEUED
 = 0x60,

154 
	mATA_WRITE_FPDMA_QUEUED
 = 0x61,

155 
	mATA_EXEDIAG
 = 0x90,

156 
	mATA_INITIALIZE_DEV_PARA
 = 0x91,

157 
	mATA_DOWNLOAD_MICROCODE
 = 0x92,

158 
	mATA_SMART
 = 0xB0,

159 
	mATA_DEVICE_CONFIGURATION
 = 0xB1,

160 
	mATA_READ_MULTIPLE
 = 0xC4,

161 
	mATA_WRITE_MULTIPLE
 = 0xC5,

162 
	mATA_SET_MULTIPLE_MODE
 = 0xC6,

163 
	mATA_READ_DMA
 = 0xC8,

164 
	mATA_WRITE_DMA
 = 0xCA,

165 
	mATA_STANDBY_IMMEDIATE
 = 0xE0,

166 
	mATA_IDLE_IMMEDIATE
 = 0xE1,

167 
	mATA_STANDBY
 = 0xE2,

168 
	mATA_IDLE
 = 0xE3,

169 
	mATA_READ_BUFFER
 = 0xE4,

170 
	mATA_CHECK_POWER_MODE
 = 0xE5,

171 
	mATA_SLEEP
 = 0xE6,

172 
	mATA_FLUSH_CACHE
 = 0xE7,

173 
	mATA_WRITE_BUFFER
 = 0xE8,

174 
	mATA_FLUSH_CACHE_EXT
 = 0xEA,

175 
	mATA_IDENT
 = 0xEC,

176 
	mATA_SET_FEATURE
 = 0xEF,

177 
	mATA_SECURITY_SET_PASSWORD
 = 0xF1,

178 
	mATA_SECURITY_UNLOCK
 = 0xF2,

179 
	mATA_SECURITY_ERASE_PREPARE
 = 0xF3,

180 
	mATA_SECURITY_ERASE_UNIT
 = 0xF4,

181 
	mATA_SECURITY_FREEZE_LOCK
 = 0xF5,

182 
	mATA_SECURITY_DISABLE_PASSWORD
 = 0xF6,

183 
	mATA_READ_NATIVE_MAX_ADDRESS
 = 0xF8,

184 
	mATA_SET_MAX_ADDRESS
 = 0xF9,

185 
	mATA_SRST
 = 0xFF

189 
	#BIT0
 0x01

	)

190 
	#BIT1
 0x02

	)

191 
	#BIT2
 0x04

	)

192 
	#BIT3
 0x08

	)

193 
	#BIT4
 0x10

	)

194 
	#BIT5
 0x20

	)

195 
	#BIT6
 0x40

	)

196 
	#BIT7
 0x80

	)

197 
	#BIT8
 0x0100

	)

198 
	#BIT9
 0x0200

	)

199 
	#BIT10
 0x0400

	)

200 
	#BIT11
 0x0800

	)

201 
	#BIT12
 0x1000

	)

202 
	#BIT13
 0x2000

	)

203 
	#BIT14
 0x4000

	)

204 
	#BIT15
 0x8000

	)

205 
	#BIT16
 0x00010000

	)

206 
	#BIT17
 0x00020000

	)

207 
	#BIT18
 0x00040000

	)

208 
	#BIT19
 0x00080000

	)

209 
	#BIT20
 0x00100000

	)

210 
	#BIT21
 0x00200000

	)

211 
	#BIT22
 0x00400000

	)

212 
	#BIT23
 0x00800000

	)

213 
	#BIT24
 0x01000000

	)

214 
	#BIT25
 0x02000000

	)

215 
	#BIT26
 0x04000000

	)

216 
	#BIT27
 0x08000000

	)

217 
	#BIT28
 0x10000000

	)

218 
	#BIT29
 0x20000000

	)

219 
	#BIT30
 0x40000000

	)

220 
	#BIT31
 0x80000000

	)

222 
	#SETREGBOR
(
ADDR
, 
VAL
Ë*(vﬁ©ûê
UINT32
*)(ADDRË|(UINT32)(VAL)

	)

223 
	#SETREGBND
(
ADDR
, 
VAL
Ë*(vﬁ©ûê
UINT32
*)(ADDRË&(UINT32)(VAL)

	)

225 
	~"ßè_ªgi°îs.h
"

226 
	~"ßè_cmd.h
"

228 
£nd_°©us_to_ho°
(
UINT32
 c⁄° 
îr_code
);

229 
ßè_ª£t
();

230 
pio_£˘‹_å™s„r
(
UINT32
 c⁄° 
døm_addr
, UINT32 c⁄° 
¥Ÿocﬁ
);

232 vﬁ©ûê
UINT32
 
g_ßè_a˘i⁄_Êags
;

	@include/sata_cmd.h

20 #i‚de‡
SATA_CMD_H


21 
	#SATA_CMD_H


	)

23 
	#ATA_CMD_NUM
 59

	)

24 
	#CMD_TABLE_SIZE
 60

	)

27 (* 
	tATA_FUNCTION_T
)(
	tUINT32
, UINT32);

30 
	eèg_FEATURES_subcomm™ds


32 
FEATURE_ENABLE_WRITE_CACHE
 = 0x02,

33 
FEATURE_SET_TRANSFER_MODE
 = 0x03,

34 
FEATURE_ENABLE_ADVANCED_POWER_MANAGEMENT
 = 0x05,

35 
FEATURE_ENABLE_POWERUP_IN_STANDBY
 = 0x06,

36 
FEATURE_POWRUP_IN_STANDBY_FEATURE_SET_DEVICE_SPINUP
 = 0x07,

37 
FEATURE_ENABLE_USE_OF_SATA
 = 0x10,

38 
FEATURE_DISABLE_READ_LOOK_AHEAD
 = 0x55,

39 
FEATURE_DISABLE_REVERTING_TO_POWER_ON_DEFAULTS
 = 0x66,

40 
FEATURE_DISABLE_WRITE_CACHE
 = 0x82,

41 
FEATURE_DISABLE_ADVANCED_POWER_MANAGEMENT
 = 0x85,

42 
FEATURE_DISABLE_POWERUP_IN_STANDBY
 = 0x86,

43 
FEATURE_DISABLE_USE_OF_SATA
 = 0x90,

44 
FEATURE_ENABLE_READ_LOOK_AHEAD
 = 0xAA,

45 
FEATURE_ENABLE_REVERTING_TO_POWER_ON_DEFAULTS
 = 0xCC

48 
	#MAXNUM_DRQ_SECTORS
 0x01

	)

50 c⁄° 
UINT8
 
©a_cmd_˛ass_èbÀ
[];

51 c⁄° 
UINT8
 
©a_ödex_èbÀ
[];

52 c⁄° 
UINT8
 
©a_comm™d_code_èbÀ
[];

53 c⁄° 
ATA_FUNCTION_T
 
©a_fun˘i⁄_èbÀ
[];

56 
	`©a_idítify_devi˚
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

57 
	`©a_£t_„©uªs
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

58 
	`©a_execuã_drive_dügno°ics
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

59 
	`©a_check_powî_mode
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

60 
	`©a_Êush_ˇche
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

61 
	`©a_ªad_vîify_£˘‹s
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

62 
	`©a_£t_mu…ùÀ_mode
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

63 
	`©a_ªad_buf„r
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

64 
	`©a_wrôe_buf„r
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

65 
	`©a_£ek
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

66 
	`©a_°™dby
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

67 
	`©a_ªˇlibøã
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

68 
	`©a_°™dby_immedüã
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

69 
	`©a_idÀ
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

70 
	`©a_idÀ_immedüã
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

71 
	`©a_¶ìp
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

72 
	`©a_ªad_«tive_max_addªss
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

73 
	`©a_ªad_«tive_max_addªss
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

74 
	`©a_n›
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

75 
	`©a_öôülize_devi˚_∑ømëîs
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

76 
	`©a_nŸ_suµ‹ãd
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

77 
	`©a_§°
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

	@include/sata_registers.h

20 #i‚de‡
SATA_REGISTERS_H


21 
	#SATA_REGISTERS_H


	)

23 
	#SATA_CTRL_1
 (
BS_BASE
+0x0000)

	)

24 
	#SATA_INT_ENABLE
 (
BS_BASE
+0x0008)

	)

25 
	#SATA_INT_STAT
 (
BS_BASE
+0x000C)

	)

26 
	#SATA_CTRL_2
 (
BS_BASE
+0x0010)

	)

27 
	#SATA_FIS_D2H_0
 (
BS_BASE
+0x0014)

	)

28 
	#SATA_FIS_D2H_1
 (
BS_BASE
+0x0018)

	)

29 
	#SATA_FIS_D2H_2
 (
BS_BASE
+0x001C)

	)

30 
	#SATA_FIS_D2H_3
 (
BS_BASE
+0x0020)

	)

31 
	#SATA_FIS_D2H_4
 (
BS_BASE
+0x0024)

	)

32 
	#SATA_FIS_D2H_5
 (
BS_BASE
+0x0028)

	)

33 
	#SATA_FIS_D2H_6
 (
BS_BASE
+0x002C)

	)

34 
	#SATA_FIS_D2H_7
 (
BS_BASE
+0x0030)

	)

35 
	#SATA_FIS_D2H_LEN
 (
BS_BASE
+0x0034)

	)

36 
	#SATA_FIS_H2D_0
 (
BS_BASE
+0x0038)

	)

37 
	#SATA_FIS_H2D_1
 (
BS_BASE
+0x003C)

	)

38 
	#SATA_FIS_H2D_2
 (
BS_BASE
+0x0040)

	)

39 
	#SATA_FIS_H2D_3
 (
BS_BASE
+0x0044)

	)

40 
	#SATA_FIS_H2D_4
 (
BS_BASE
+0x0048)

	)

41 
	#SATA_FIS_H2D_5
 (
BS_BASE
+0x004C)

	)

42 
	#SATA_FIS_H2D_6
 (
BS_BASE
+0x0050)

	)

43 
	#SATA_FIS_H2D_7
 (
BS_BASE
+0x0054)

	)

44 
	#SATA_XFER_BYTES
 (
BS_BASE
+0x005C)

	)

45 
	#SATA_XFER_BYTES_REMAIN
 (
BS_BASE
+0x0060)

	)

46 
	#SATA_XFER_SECTORS_REMAIN
 (
BS_BASE
+0x0064)

	)

47 
	#SATA_SACTIVE
 (
BS_BASE
+0x0070)

	)

48 
	#SATA_NCQ_BMP_1
 (
BS_BASE
+0x0074)

	)

49 
	#SATA_NCQ_BMP_2
 (
BS_BASE
+0x0078)

	)

50 
	#SATA_STATUS
 (
BS_BASE
+0x00A0)

51 
	#SATA_SECT_OFFSET
 (
BS_BASE
+0x00A4)

	)

52 
	#SATA_BUF_PAGE_SIZE
 (
BS_BASE
+0x00B4)

53 
	#SATA_RESET_FIFO_1
 (
BS_BASE
+0x00D4)

54 
	#SATA_MANUAL_MODE_ADDR
 (
BS_BASE
+0x00D8)

	)

55 
	#SATA_CTRL_3
 (
BS_BASE
+0x00DC)

56 
	#SATA_FIFO_1_STATUS
 (
BS_BASE
+0x00E4)

57 
	#SATA_FIFO_2_STATUS
 (
BS_BASE
+0x00E8)

58 
	#SATA_FIFO_S_STATUS
 (
BS_BASE
+0x00EC)

59 
	#SATA_PHY_STATUS
 (
BS_BASE
+0x0100)

	)

60 
	#SATA_ERROR
 (
BS_BASE
+0x0104)

	)

61 
	#SATA_PHY_CTRL
 (
BS_BASE
+0x0108)

	)

62 
	#SATA_CFG_1
 (
BS_BASE
+0x0140)

	)

63 
	#SATA_CFG_2
 (
BS_BASE
+0x0148)

	)

64 
	#SATA_CFG_3
 (
BS_BASE
+0x014C)

	)

65 
	#SATA_CFG_4
 (
BS_BASE
+0x0150)

	)

66 
	#SATA_CFG_5
 (
BS_BASE
+0x015C)

	)

67 
	#SATA_CFG_6
 (
BS_BASE
+0x0160)

	)

68 
	#SATA_CFG_7
 (
BS_BASE
+0x0164)

	)

69 
	#SATA_WBUF_BASE
 (
BS_BASE
+0x0170)

70 
	#SATA_RBUF_BASE
 (
BS_BASE
+0x0174)

71 
	#SATA_WBUF_SIZE
 (
BS_BASE
+0x0178)

72 
	#SATA_RBUF_SIZE
 (
BS_BASE
+0x017C)

73 
	#SATA_WBUF_MARGIN
 (
BS_BASE
+0x0180)

	)

74 
	#SATA_RESET_WBUF_PTR
 (
BS_BASE
+0x0184)

	)

75 
	#SATA_RESET_RBUF_PTR
 (
BS_BASE
+0x0188)

	)

76 
	#SATA_NCQ_BASE
 (
BS_BASE
+0x0190)

77 
	#SATA_WBUF_PTR
 (
BS_BASE
+0x0194)

	)

78 
	#SATA_RBUF_PTR
 (
BS_BASE
+0x0198)

	)

79 
	#SATA_WBUF_FREE
 (
BS_BASE
+0x019C)

80 
	#SATA_RBUF_PENDING
 (
BS_BASE
+0x01A0)

81 
	#SATA_CFG_8
 (
BS_BASE
+0x01A8)

	)

82 
	#SATA_MAX_LBA
 (
BS_BASE
+0x01B0)

	)

83 
	#SATA_CFG_9
 (
BS_BASE
+0x01C8)

	)

84 
	#SATA_INSERT_EQ_W
 (
BS_BASE
+0x01D0)

	)

85 
	#SATA_LBA
 (
BS_BASE
+0x01D4)

	)

86 
	#SATA_SECT_CNT
 (
BS_BASE
+0x01D8)

	)

87 
	#SATA_INSERT_EQ_R
 (
BS_BASE
+0x01DC)

	)

88 
	#SATA_NCQ_ORDER
 (
BS_BASE
+0x0220)

	)

89 
	#SATA_NCQ_CTRL
 (
BS_BASE
+0x0224)

	)

90 
	#SATA_CFG_10
 (
BS_BASE
+0x022C)

91 
	#SATA_EQ_CFG_1
 (
BS_BASE
+0x0230)

	)

92 
	#SATA_EQ_CTRL
 (
BS_BASE
+0x0234)

	)

93 
	#SATA_EQ_PTR
 (
BS_BASE
+0x0238)

	)

94 
	#SATA_EQ_STATUS
 (
BS_BASE
+0x023C)

	)

95 
	#SATA_EQ_DATA_0
 (
BS_BASE
+0x0240)

	)

96 
	#SATA_EQ_DATA_1
 (
BS_BASE
+0x0244)

	)

97 
	#SATA_EQ_DATA_2
 (
BS_BASE
+0x0248)

	)

98 
	#SATA_EQ_CFG_2
 (
BS_BASE
+0x026C)

	)

100 
	#AUTOINC
 (
BIT3
)

	)

101 
	#FLUSH_NCQ
 (
BIT2
)

	)

103 
	#SEND_NON_DATA_FIS
 (1 << 0)

	)

104 
	#SEND_DATA_FIS
 (1 << 1)

	)

105 
	#GET_DATA_FIS
 (1 << 2)

	)

106 
	#SEND_GOOD_RESP
 (1 << 3)

	)

107 
	#SEND_SACTIVE
 (1 << 4)

	)

108 
	#COMPLETE
 (1 << 5)

109 
	#PIO_READ
 (1 << 8)

	)

110 
	#CLR_STAT_PIO_SETUP
 (1 << 9)

	)

111 
	#DMA_READ
 (1 << 10)

	)

112 
	#FPDMA_READ
 (1 << 11)

	)

113 
	#PIO_WRITE
 (1 << 12)

	)

114 
	#DMA_WRITE
 (1 << 14)

	)

115 
	#FPDMA_WRITE
 (1 << 15)

	)

116 
	#SEND_R_OK
 (1 << 24)

	)

117 
	#SEND_R_ERR
 (1 << 25)

	)

119 
	#CMD_RECV
 0x00000001

120 
	#REG_FIS_RECV
 0x00000002

121 
	#OPERATION_OK
 0x00000008

122 
	#OPERATION_ERR
 0x00400040

123 
	#PHY_ONLINE
 0x00000080

124 
	#PHY_OFFLINE
 0x00000100

125 
	#NCQ_CMD_RECV
 0x00000200

126 
	#NCQ_CMD_ERR
 0x00000400

127 
	#NCQ_INVALID_LBA
 0x00200000

128 

	)

	@include/sdram.h

20 #i‚de‡
SDRAM_H


21 
	#SDRAM_H


	)

23 
	#SDRAM_PARAM_SIGNATURE
 0x4E36EDA5

	)

27 
UINT32
 
	möô
;

28 
UINT32
 
	mª‰esh
;

29 
UINT32
 
	mtimög
;

30 
UINT32
 
	mmrs
;

31 
UINT32
 
	mbyãs
;

32 } 
	tsdøm_t
;

34 #i‡
PLL_CLK_CONFIG
 =
PLL_133MHZ


35 
	#RDCLK_DLY
 (2 << 0)

	)

36 
	#SDCLK_DLY
 (13 << 5)

	)

37 #ñi‡
PLL_CLK_CONFIG
 =
PLL_150MHZ


38 
	#RDCLK_DLY
 (1 << 0)

	)

39 
	#SDCLK_DLY
 (10 << 5)

	)

40 #ñi‡
PLL_CLK_CONFIG
 =
PLL_155MHZ


41 
	#RDCLK_DLY
 (1 << 0)

	)

42 
	#SDCLK_DLY
 (10 << 5)

	)

43 #ñi‡
PLL_CLK_CONFIG
 =
PLL_160MHZ


44 
	#RDCLK_DLY
 (1 << 0)

	)

45 
	#SDCLK_DLY
 (9 << 5)

	)

46 #ñi‡
PLL_CLK_CONFIG
 =
PLL_165MHZ


47 
	#RDCLK_DLY
 (2 << 0)

	)

48 
	#SDCLK_DLY
 (9 << 5)

	)

49 #ñi‡
PLL_CLK_CONFIG
 =
PLL_175MHZ
 || PLL_CLK_CONFIG =
PLL_170MHZ


50 
	#RDCLK_DLY
 (1 << 0)

	)

51 
	#SDCLK_DLY
 (7 << 5)

	)

52 #ñi‡
PLL_CLK_CONFIG
 =
PLL_180MHZ


53 
	#RDCLK_DLY
 (1 << 0)

	)

54 
	#SDCLK_DLY
 (7 << 5)

	)

58 
	#SDRAM_PARAM_50_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

59 
	#SDRAM_PARAM_50_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(400Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

60 
	#SDRAM_PARAM_50_16_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

61 
	#SDRAM_PARAM_50_16_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

64 
	#SDRAM_PARAM_50_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

65 
	#SDRAM_PARAM_50_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(400Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

66 
	#SDRAM_PARAM_50_32_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

67 
	#SDRAM_PARAM_50_32_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

70 
	#SDRAM_PARAM_50_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

71 
	#SDRAM_PARAM_50_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(400Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

72 
	#SDRAM_PARAM_50_64_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

73 
	#SDRAM_PARAM_50_64_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

76 
	#SDRAM_PARAM_60_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

77 
	#SDRAM_PARAM_60_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

78 
	#SDRAM_PARAM_60_16_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

79 
	#SDRAM_PARAM_60_16_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

82 
	#SDRAM_PARAM_60_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

83 
	#SDRAM_PARAM_60_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

84 
	#SDRAM_PARAM_60_32_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

85 
	#SDRAM_PARAM_60_32_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

88 
	#SDRAM_PARAM_60_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

89 
	#SDRAM_PARAM_60_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

90 
	#SDRAM_PARAM_60_64_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

91 
	#SDRAM_PARAM_60_64_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

94 
	#SDRAM_PARAM_60_SAFE_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

95 
	#SDRAM_PARAM_60_SAFE_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

96 
	#SDRAM_PARAM_60_SAFE_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

97 
	#SDRAM_PARAM_60_SAFE_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

100 
	#SDRAM_PARAM_75_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

101 
	#SDRAM_PARAM_75_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

102 
	#SDRAM_PARAM_75_16_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

103 
	#SDRAM_PARAM_75_16_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

106 
	#SDRAM_PARAM_75_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

107 
	#SDRAM_PARAM_75_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

108 
	#SDRAM_PARAM_75_32_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

109 
	#SDRAM_PARAM_75_32_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

112 
	#SDRAM_PARAM_75_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

113 
	#SDRAM_PARAM_75_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

114 
	#SDRAM_PARAM_75_64_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

115 
	#SDRAM_PARAM_75_64_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

118 
	#SDRAM_PARAM_75_SAFE_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

119 
	#SDRAM_PARAM_75_SAFE_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

120 
	#SDRAM_PARAM_75_SAFE_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

121 
	#SDRAM_PARAM_75_SAFE_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

124 
	#SDRAM_PARAM_100_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_2
 | 
	`SDRAM_RAS
(1Ë| 
	`SDRAM_INIT_PERIOD
(0x00002EE0))

	)

125 
	#SDRAM_PARAM_100_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(516Ë| 
	`SDRAM_TRC
(4Ë| 
	`SDRAM_TRP
(2))

	)

126 
	#SDRAM_PARAM_100_64_TIMING
 (
	`SDRAM_RDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
	`SDRAM_SDCLK_DLY
(8Ë| 
	`SDRAM_RD_CAP_DLY_1
(0Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

127 
	#SDRAM_PARAM_100_64_MRS
 (
	`SDRAM_MRS_KEY
(0x027Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

130 
	#SDRAM_PARAM_133_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

131 
	#SDRAM_PARAM_133_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(2076Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

132 
	#SDRAM_PARAM_133_16_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

133 
	#SDRAM_PARAM_133_16_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

136 
	#SDRAM_PARAM_133_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

137 
	#SDRAM_PARAM_133_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(2076Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

138 
	#SDRAM_PARAM_133_32_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

139 
	#SDRAM_PARAM_133_32_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

142 
	#SDRAM_PARAM_133_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

143 
	#SDRAM_PARAM_133_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1038Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

144 
	#SDRAM_PARAM_133_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

145 
	#SDRAM_PARAM_133_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

148 
	#SDRAM_PARAM_150_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(40000))

	)

149 
	#SDRAM_PARAM_150_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(2340Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

150 
	#SDRAM_PARAM_150_16_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

151 
	#SDRAM_PARAM_150_16_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

154 
	#SDRAM_PARAM_150_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(40000))

	)

155 
	#SDRAM_PARAM_150_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(2340Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

156 
	#SDRAM_PARAM_150_32_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

157 
	#SDRAM_PARAM_150_32_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

160 
	#SDRAM_PARAM_150_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(40000))

	)

161 
	#SDRAM_PARAM_150_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1288Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

162 
	#SDRAM_PARAM_150_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

163 
	#SDRAM_PARAM_150_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

166 
	#SDRAM_PARAM_155_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

167 
	#SDRAM_PARAM_155_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(1100Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

168 
	#SDRAM_PARAM_155_16_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

169 
	#SDRAM_PARAM_155_16_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

172 
	#SDRAM_PARAM_155_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

173 
	#SDRAM_PARAM_155_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(1100Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

174 
	#SDRAM_PARAM_155_32_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

175 
	#SDRAM_PARAM_155_32_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

178 
	#SDRAM_PARAM_155_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

179 
	#SDRAM_PARAM_155_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1100Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

180 
	#SDRAM_PARAM_155_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

181 
	#SDRAM_PARAM_155_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

184 
	#SDRAM_PARAM_160_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

185 
	#SDRAM_PARAM_160_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(1249Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

186 
	#SDRAM_PARAM_160_16_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

187 
	#SDRAM_PARAM_160_16_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

190 
	#SDRAM_PARAM_160_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

191 
	#SDRAM_PARAM_160_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(1249Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

192 
	#SDRAM_PARAM_160_32_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

193 
	#SDRAM_PARAM_160_32_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

196 
	#SDRAM_PARAM_160_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(33536))

	)

197 
	#SDRAM_PARAM_160_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1249Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

198 
	#SDRAM_PARAM_160_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

199 
	#SDRAM_PARAM_160_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

202 
	#SDRAM_PARAM_165_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(37000))

	)

203 
	#SDRAM_PARAM_165_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(2570Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

204 
	#SDRAM_PARAM_165_16_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

205 
	#SDRAM_PARAM_165_16_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

208 
	#SDRAM_PARAM_165_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(37000))

	)

209 
	#SDRAM_PARAM_165_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(2570Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

210 
	#SDRAM_PARAM_165_32_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

211 
	#SDRAM_PARAM_165_32_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

214 
	#SDRAM_PARAM_165_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(37000))

	)

215 
	#SDRAM_PARAM_165_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1280Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

216 
	#SDRAM_PARAM_165_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

217 
	#SDRAM_PARAM_165_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

220 
	#SDRAM_PARAM_170_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(36500))

	)

221 
	#SDRAM_PARAM_170_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1284Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

222 
	#SDRAM_PARAM_170_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

223 
	#SDRAM_PARAM_170_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

226 
	#SDRAM_PARAM_175_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(37000))

	)

227 
	#SDRAM_PARAM_175_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(2570Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

228 
	#SDRAM_PARAM_175_16_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

229 
	#SDRAM_PARAM_175_16_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

231 
	#SDRAM_PARAM_175_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(37000))

	)

232 
	#SDRAM_PARAM_175_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(2570Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

233 
	#SDRAM_PARAM_175_32_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

234 
	#SDRAM_PARAM_175_32_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

237 
	#SDRAM_PARAM_175_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(36000))

	)

238 
	#SDRAM_PARAM_175_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1288Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

239 
	#SDRAM_PARAM_175_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

240 
	#SDRAM_PARAM_175_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

243 
	#SDRAM_PARAM_180_16_INIT
 (
SDRAM_16MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(36000))

	)

244 
	#SDRAM_PARAM_180_16_REFRESH
 (
	`SDRAM_RF_PERIOD
(1288Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

245 
	#SDRAM_PARAM_180_16_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

246 
	#SDRAM_PARAM_180_16_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

249 
	#SDRAM_PARAM_180_32_INIT
 (
SDRAM_32MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(36000))

	)

250 
	#SDRAM_PARAM_180_32_REFRESH
 (
	`SDRAM_RF_PERIOD
(1288Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

251 
	#SDRAM_PARAM_180_32_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

252 
	#SDRAM_PARAM_180_32_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

255 
	#SDRAM_PARAM_180_64_INIT
 (
SDRAM_64MB
 | 
SDRAM_CL_3
 | 
	`SDRAM_RAS
(5Ë| 
	`SDRAM_INIT_PERIOD
(36000))

	)

256 
	#SDRAM_PARAM_180_64_REFRESH
 (
	`SDRAM_RF_PERIOD
(1288Ë| 
	`SDRAM_TRC
(14Ë| 
	`SDRAM_TRP
(3))

	)

257 
	#SDRAM_PARAM_180_64_TIMING
 (
RDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_0
(1Ë| 
SDCLK_DLY
 | 
	`SDRAM_RD_CAP_DLY_1
(1Ë| 
	`SDRAM_CAP_CLK_SEL
(1))

	)

258 
	#SDRAM_PARAM_180_64_MRS
 (
	`SDRAM_MRS_KEY
(0x037Ë| 
	`SDRAM_EMRS_KEY
(0x000))

	)

260 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_50MHZ


261 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_50_64_INIT


	)

262 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_50_64_REFRESH


	)

263 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_50_64_TIMING


	)

264 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_50_64_MRS


	)

267 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_60MHZ


268 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_60_16_INIT


	)

269 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_60_16_REFRESH


	)

270 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_60_16_TIMING


	)

271 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_60_16_MRS


	)

274 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_60MHZ


275 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_60_32_INIT


	)

276 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_60_32_REFRESH


	)

277 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_60_32_TIMING


	)

278 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_60_32_MRS


	)

281 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_60MHZ


282 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_60_64_INIT


	)

283 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_60_64_REFRESH


	)

284 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_60_64_TIMING


	)

285 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_60_64_MRS


	)

288 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_75MHZ


289 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_75_16_INIT


	)

290 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_75_16_REFRESH


	)

291 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_75_16_TIMING


	)

292 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_75_16_MRS


	)

295 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_75MHZ


296 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_75_32_INIT


	)

297 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_75_32_REFRESH


	)

298 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_75_32_TIMING


	)

299 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_75_32_MRS


	)

302 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_75MHZ


303 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_75_64_INIT


	)

304 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_75_64_REFRESH


	)

305 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_75_64_TIMING


	)

306 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_75_64_MRS


	)

309 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_100MHZ


310 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_100_64_INIT


	)

311 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_100_64_REFRESH


	)

312 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_100_64_TIMING


	)

313 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_100_64_MRS


	)

316 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_133MHZ


317 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_133_16_INIT


	)

318 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_133_16_REFRESH


	)

319 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_133_16_TIMING


	)

320 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_133_16_MRS


	)

323 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_133MHZ


324 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_133_32_INIT


	)

325 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_133_32_REFRESH


	)

326 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_133_32_TIMING


	)

327 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_133_32_MRS


	)

330 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_133MHZ


331 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_133_64_INIT


	)

332 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_133_64_REFRESH


	)

333 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_133_64_TIMING


	)

334 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_133_64_MRS


	)

337 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_150MHZ


338 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_150_16_INIT


	)

339 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_150_16_REFRESH


	)

340 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_150_16_TIMING


	)

341 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_150_16_MRS


	)

344 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_150MHZ


345 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_150_32_INIT


	)

346 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_150_32_REFRESH


	)

347 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_150_32_TIMING


	)

348 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_150_32_MRS


	)

351 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_150MHZ


352 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_150_64_INIT


	)

353 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_150_64_REFRESH


	)

354 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_150_64_TIMING


	)

355 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_150_64_MRS


	)

358 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_155MHZ


359 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_155_16_INIT


	)

360 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_155_16_REFRESH


	)

361 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_155_16_TIMING


	)

362 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_155_16_MRS


	)

365 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_155MHZ


366 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_155_32_INIT


	)

367 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_155_32_REFRESH


	)

368 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_155_32_TIMING


	)

369 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_155_32_MRS


	)

372 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_155MHZ


373 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_155_64_INIT


	)

374 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_155_64_REFRESH


	)

375 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_155_64_TIMING


	)

376 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_155_64_MRS


	)

379 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_160MHZ


380 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_160_16_INIT


	)

381 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_160_16_REFRESH


	)

382 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_160_16_TIMING


	)

383 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_160_16_MRS


	)

386 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_160MHZ


387 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_160_32_INIT


	)

388 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_160_32_REFRESH


	)

389 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_160_32_TIMING


	)

390 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_160_32_MRS


	)

393 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_160MHZ


394 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_160_64_INIT


	)

395 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_160_64_REFRESH


	)

396 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_160_64_TIMING


	)

397 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_160_64_MRS


	)

400 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_165MHZ


401 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_165_16_INIT


	)

402 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_165_16_REFRESH


	)

403 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_165_16_TIMING


	)

404 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_165_16_MRS


	)

407 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_165MHZ


408 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_165_32_INIT


	)

409 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_165_32_REFRESH


	)

410 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_165_32_TIMING


	)

411 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_165_32_MRS


	)

414 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_165MHZ


415 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_165_64_INIT


	)

416 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_165_64_REFRESH


	)

417 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_165_64_TIMING


	)

418 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_165_64_MRS


	)

421 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_170MHZ


422 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_170_64_INIT


	)

423 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_170_64_REFRESH


	)

424 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_170_64_TIMING


	)

425 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_170_64_MRS


	)

428 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_175MHZ


429 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_175_16_INIT


	)

430 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_175_16_REFRESH


	)

431 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_175_16_TIMING


	)

432 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_175_16_MRS


	)

434 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_175MHZ


435 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_175_32_INIT


	)

436 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_175_32_REFRESH


	)

437 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_175_32_TIMING


	)

438 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_175_32_MRS


	)

442 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_175MHZ


443 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_175_64_INIT


	)

444 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_175_64_REFRESH


	)

445 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_175_64_TIMING


	)

446 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_175_64_MRS


	)

449 #i‡
DRAM_SIZE
 =16268800 && 
PLL_CLK_CONFIG
 =
PLL_180MHZ


450 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_180_16_INIT


	)

451 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_180_16_REFRESH


	)

452 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_180_16_TIMING


	)

453 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_180_16_MRS


	)

456 #i‡
DRAM_SIZE
 =32537600 && 
PLL_CLK_CONFIG
 =
PLL_180MHZ


457 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_180_32_INIT


	)

458 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_180_32_REFRESH


	)

459 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_180_32_TIMING


	)

460 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_180_32_MRS


	)

463 #i‡
DRAM_SIZE
 =65075200 && 
PLL_CLK_CONFIG
 =
PLL_180MHZ


464 
	#SDRAM_PARAM_MAIN_FW_INIT
 
SDRAM_PARAM_180_64_INIT


	)

465 
	#SDRAM_PARAM_MAIN_FW_REFRESH
 
SDRAM_PARAM_180_64_REFRESH


	)

466 
	#SDRAM_PARAM_MAIN_FW_TIMING
 
SDRAM_PARAM_180_64_TIMING


	)

467 
	#SDRAM_PARAM_MAIN_FW_MRS
 
SDRAM_PARAM_180_64_MRS


	)

470 #i‡
DRAM_SIZE
 == 16268800

471 
	#SDRAM_PARAM_ROM_CODE_INIT
 
SDRAM_PARAM_75_16_INIT


	)

472 
	#SDRAM_PARAM_ROM_CODE_REFRESH
 
SDRAM_PARAM_75_16_REFRESH


	)

473 
	#SDRAM_PARAM_ROM_CODE_TIMING
 
SDRAM_PARAM_75_16_TIMING


	)

474 
	#SDRAM_PARAM_ROM_CODE_MRS
 
SDRAM_PARAM_75_16_MRS


	)

477 #i‡
DRAM_SIZE
 == 32537600

478 
	#SDRAM_PARAM_ROM_CODE_INIT
 
SDRAM_PARAM_75_32_INIT


	)

479 
	#SDRAM_PARAM_ROM_CODE_REFRESH
 
SDRAM_PARAM_75_32_REFRESH


	)

480 
	#SDRAM_PARAM_ROM_CODE_TIMING
 
SDRAM_PARAM_75_32_TIMING


	)

481 
	#SDRAM_PARAM_ROM_CODE_MRS
 
SDRAM_PARAM_75_32_MRS


	)

484 #i‡
DRAM_SIZE
 == 65075200

485 
	#SDRAM_PARAM_ROM_CODE_INIT
 
SDRAM_PARAM_75_64_INIT


	)

486 
	#SDRAM_PARAM_ROM_CODE_REFRESH
 
SDRAM_PARAM_75_64_REFRESH


	)

487 
	#SDRAM_PARAM_ROM_CODE_TIMING
 
SDRAM_PARAM_75_64_TIMING


	)

488 
	#SDRAM_PARAM_ROM_CODE_MRS
 
SDRAM_PARAM_75_64_MRS


	)

	@include/uart.h

20 #i‚de‡
UART_H


21 
	#UART_H


	)

24 
	#UART_WAITTIME
 0x100000

	)

25 
	#UART_WAITINFINITE
 0

	)

26 
	#UART_COMMBAUDRATE
 115200

	)

28 
	#UART_TXFIFO_FULL
 0x00

	)

29 
	#UART_TXFIFO_EMPTY
 0x20

	)

30 
	#UART_RXFIFO_EMPTY
 0x00

	)

32 
	#NO_PARITY
 0x0

	)

33 
	#ODD_PARITY
 0x4

	)

34 
	#EVEN_PARITY
 0x5

	)

35 
	#F1_PARITY
 0x6

	)

36 
	#F0_PARITY
 0x7

	)

38 
	#ONE_STOPBIT
 0x0

	)

39 
	#TWO_STOPBIT
 0x1

	)

41 
	#WORDLEN_5BIT
 0x0

	)

42 
	#WORDLEN_6BIT
 0x1

	)

43 
	#WORDLEN_7BIT
 0x2

	)

44 
	#WORDLEN_8BIT
 0x3

	)

46 
	#DBG_TX_BUFSIZE
 256

	)

47 
	#DBG_RX_BUFSIZE
 256

	)

51 
	mw‹d_Àngth
 : 2;

52 
	m°›bô_˘æ
 : 1;

53 
	m∑rôy_mode
 : 3;

54 
	mu¨t_íabÀ
 : 1;

55 
	m˛ór_pﬁ¨ôy
 : 1;

56 
	mrdy_pﬁ¨ôy
 : 1;

57 
	mautofc_íabÀ
 : 1;

58 
	mú_rx_övmode
 : 1;

59 
	mú_mode_íabÀ
 : 1;

60 
	mª£rved
 : 20;

61 } 
	tu¨tc⁄t_t
;

63 #i‡
OPTION_UART_DEBUG


65 
u¨t_öô
();

66 
u¨t_¥öt
(* 
°rög
);

67 
u¨t_¥öt_32
(
UINT32
 
num
);

68 
u¨t_¥öt_hex
(
UINT32
 
num
);

69 
u¨t_¥ötf
(c⁄° * 
msg
, ...);

73 
	#u¨t_öô
(
X
)

	)

74 
	#u¨t_¥öt
(
X
)

	)

75 
	#u¨t_¥öt_32
(
X
)

	)

76 
	#u¨t_¥öt_hexa
(
X
)

	)

77 
	#u¨t_¥ötf
(
fmt
,...)

	)

	@installer/ata_7.h

20 
	#NOP
 0x00

	)

21 
	#CHECK_POWER_MODE
 0xE5

	)

22 
	#SLEEP
 0xE6

	)

23 
	#IDLE
 0xE3

	)

24 
	#IDLE_IMMEDIATE
 0xE1

	)

25 
	#STANDBY
 0xE2

	)

26 
	#STANDBY_IMMEDIATE
 0xE0

	)

27 
	#READ_BUFFER
 0xE4

	)

28 
	#READ_DMA
 0xC8

	)

29 
	#READ_DMA_EXT
 0x25

	)

30 
	#READ_DMA_QUEUED
 0xC7

	)

31 
	#READ_DMA_QUEUED_EXT
 0x26

	)

32 
	#READ_LOG_EXT
 0x2F

	)

33 
	#READ_MULTIPLE
 0xC4

	)

34 
	#READ_MULTIPLE_EXT
 0x29

	)

35 
	#READ_NATIVE_MAX_ADDRESS
 0xF8

	)

36 
	#READ_NATIVE_MAX_ADDRESS_EXT
 0x27

	)

37 
	#READ_SECTORS
 0x20

	)

38 
	#READ_SECTORS_EXT
 0x24

	)

39 
	#READ_STREAM_DMA_EXT
 0x2A

	)

40 
	#READ_STREAM_EXT
 0x2B

	)

41 
	#READ_VERIFY_SECTORS
 0x40

	)

42 
	#READ_VERIFY_SECTORS_EXT
 0x42

	)

43 
	#WRITE_BUFFER
 0xE8

	)

44 
	#WRITE_DMA
 0xCA

	)

45 
	#WRITE_DMA_EXT
 0x35

	)

46 
	#WRITE_DMA_FUA_EXT
 0x3D

	)

47 
	#WRITE_DMA_QUEUED
 0xCC

	)

48 
	#WRITE_DMA_QUEUED_EXT
 0x36

	)

49 
	#WRITE_DMA_QUEUED_FUA_EXT
 0x3E

	)

50 
	#WRITE_LOG_EXT
 0x3F

	)

51 
	#WRITE_MULTIPLE
 0xC5

	)

52 
	#WRITE_MULTIPLE_EXT
 0x39

	)

53 
	#WRITE_MULTIPLE_FUA_EXT
 0xCE

	)

54 
	#WRITE_SECTORS
 0x30

	)

55 
	#WRITE_SECTORS_EXT
 0x34

	)

56 
	#WRITE_STREAM_DMA_EXT
 0x3A

	)

57 
	#WRITE_STREAM_EXT
 0x3B

	)

68 
	#SECURITY_DISABLE_PASSWORD
 0xF6

	)

69 
	#SECURITY_ERASE_PREPARE
 0xF3

	)

70 
	#SECURITY_ERASE_UNIT
 0xF4

	)

71 
	#SECURITY_FREEZE_LOCK
 0xF5

	)

72 
	#SECURITY_SET_PASSWORD
 0xF1

	)

73 
	#SECURITY_UNLOCK
 0xF2

	)

74 
	#CONFIGURE_STREAM
 0x51

	)

75 
	#SERVICE
 0xA2

	)

76 
	#EXECUTE_DEVICE_DIAGNOSTIC
 0x90

	)

77 
	#IDENTIFY_DEVICE
 0xEC

	)

78 
	#SET_FEATURES
 0xEF

	)

79 
	#SET_MAX
 0xF9

	)

80 
	#SET_MAX_ADDRESS_EXT
 0x37

	)

81 
	#SET_MULTIPLE_MODE
 0xC6

	)

82 
	#FLUSH_CACHE
 0xE7

	)

83 
	#FLUSH_CACHE_EXT
 0xEA

	)

84 
	#DEVICE_CONFIGURATION_FREEZE_LOCK
 0xB1

	)

85 
	#DEVICE_CONFIGURATION_IDENTIFY
 0xB1

	)

86 
	#DEVICE_CONFIGURATION_RESTORE
 0xB1

	)

87 
	#DEVICE_CONFIGURATION_SET
 0xB1

	)

88 
	#DOWNLOAD_MICROCODE
 0x92

	)

90 
	#PACKET
 0xA0

	)

91 
	#DEVICE_RESET
 0x08

	)

92 
	#IDENTIFY_PACKET_DEVICE
 0xA1

	)

93 
	#CFA_ERASE_SECTORS
 0xC0

	)

94 
	#CFA_REQUEST_EXTENDED_ERROR
 0x03

	)

95 
	#CFA_TRANSLATE_SECTOR
 0x87

	)

96 
	#CFA_WRITE_MULTIPLE_WITHOUT_ERASE
 0xCD

	)

97 
	#CFA_WRITE_SECTORS_WITHOUT_ERASE
 0x38

	)

98 
	#MEDIA_EJECT
 0xED

	)

99 
	#MEDIA_LOCK
 0xDE

	)

100 
	#MEDIA_UNLOCK
 0xDF

	)

101 
	#CHECK_MEDIA_CARD_TYPE
 0xD1

	)

102 
	#GET_MEDIA_STATUS
 0xDA

	)

107 
	#ID_SERIAL_NUMBER
 10

	)

108 
	#ID_SERIAL_NUMBER_SZ
 10

	)

109 
	#ID_FIRMWARE_REVISION
 23

	)

110 
	#ID_FIRMWARE_REVISION_SZ
 4

	)

111 
	#ID_MODEL_NUMBER
 27

	)

112 
	#ID_MODEL_NUMBER_SZ
 20

	)

113 
	#ID_USER_SECTORS_28
 60

114 
	#ID_MAJOR_VERSION
 80

	)

115 
	#ID_USER_SECTORS_48
 100

	@installer/installer.c

19 #¥agm®
⁄˚


20 #i‚de‡
WINVER


21 
	#WINVER
 0x0501

23 #i‚de‡
_WIN32_WINNT


24 
	#_WIN32_WINNT
 0x0501

26 #i‚de‡
_WIN32_WINDOWS


27 
	#_WIN32_WINDOWS
 0x0410

29 #i‚de‡
_WIN32_IE


30 
	#_WIN32_IE
 0x0600

32 

	)

33 
	#_CRT_SECURE_NO_WARNINGS


	)

34 
	#_CRT_SECURE_NO_DEPRECATE


	)

36 #i‡
_MSC_VER
 <= 1400

37 
	~<°dio.h
>

38 
	~<tch¨.h
>

39 
	#_ATL_CSTRING_EXPLICIT_CONSTRUCTORS


40 

	)

41 
	~<afx.h
>

42 
	~<afxwö.h
>

43 
	~<afxext.h
>

44 #i‚de‡
_AFX_NO_OLE_SUPPORT


45 
	~<afxdt˘l.h
>

47 #i‚de‡
_AFX_NO_AFXCMN_SUPPORT


48 
	~<afxcmn.h
>

51 
	~<io°ªam
>

52 
	~"¡dd°‹.h
"

53 
	~<Wöio˘l.h
>

54 
	~<¡ddscsi.h
>

55 
	~<öåö.h
>

56 
	~<c⁄io.h
>

58 
	~<wödows.h
>

59 
	~<°dio.h
>

60 
	~<tch¨.h
>

61 
	~<time.h
>

62 
	~<io°ªam
>

63 
	~<Wöio˘l.h
>

64 
	~"¡dd°‹.h
"

65 
	~<¡ddscsi.h
>

66 
	~<öåö.h
>

67 
	~<c⁄io.h
>

70 
	~"jasmöe.h
"

71 
	~"rom.h
"

72 
	~"©a_7.h
"

74 
	#PAUSE
 { 
	`¥ötf
("¥es†™y keyÅÿc⁄töue"); 
	`_gëch
();Örötf("\n"); 
	`fÊush
(
°dö
); fÊush(
°dout
); }

	)

76 
	#FW_BUF_BYTES
 (96 * 1024)

	)

78 
	#BLANK_CHK_BYTES
 16

	)

80 
	#SCAN_LIST_NOT_LOADED
 0

	)

81 
	#SCAN_LIST_OLD
 1

	)

82 
	#SCAN_LIST_NEW
 2

	)

84 
	#ERR_CORRUPT
 (
OK
 + 3)

	)

85 
	#ERR_BLANK
 (
OK
 + 4)

	)

87 
	#STOSD
(
ADDR
, 
VAL
, 
SIZE
Ë
	`__°osd
((*Ë(ADDR), (VAL), (SIZE))

	)

91 
Á˘‹y_cmd_t
 
	mÁc
;

93 
UINT8
 
	m∑d
[
BYTES_PER_SECTOR
 - (
Á˘‹y_cmd_t
)];

94 
sˇn_li°_t
 
	msˇn_li°
[
NUM_BANKS_MAX
];

95 
UINT8
 
	mfúmw¨e_image_buf
[
FW_BUF_BYTES
];

96 
UINT32
 
	mfúmw¨e_image_byãs
;

97 
HANDLE
 
	mh™dÀ
;

98 
BOOL32
 
	mup
;

99 
UINT32
 
	mtŸÆ_bad_vblks
;

100 
BOOL8
 
	msˇn_li°_lﬂded
;

101 } 
	tö°ÆÀr_c⁄ãxt_t
;

103 
Á˘‹y_cmd_t
* 
	gÁc
;

105 #ifde‡
ASSERT


106 #unde‡
ASSERT


109 
	#ASSERT
(
X
Ë\

	)

111 i‡(!(
	gX
)) \

113 
¥ötf
("\ndebugássertion failure\n%s : %d\n", \

114 
__FILE__
, 
__LINE__
); \

115 
_ÊushÆl
(); \

116 
_gëch
(); \

117 
exô
(0); \

121 
	#ERR_EXIT
 \

	)

123 
¥ötf
("îr‹áà%†%u\n", 
__FILE__
, 
__LINE__
); \

124 
_gëch
(); \

125 
exô
(1); \

128 
íabÀ_Á˘‹y_mode
(
UINT32
);

129 
UINT32
 
dëe˘_sdøm_size
();

130 
UINT32
 
check_Êash_id
(
UINT16
* c⁄° 
id
);

131 
ªp‹t_sy°em_îr‹
();

132 
BOOL32
 
›í_èrgë_drv
();

133 
ª£t_b™ks
();

134 
ª£t_f˘æ
(
BOOL32
 
big_ecc
);

135 
BOOL32
 
öô
();

136 
sˇn_bad_blks
();

137 
ö°Æl
();

138 
BOOL32
 
îa£_Êash
(
UINT32
 
°¨t_pblk_off£t
, UINT32 
íd_pblk_off£t
);

139 
BOOL32
 
lﬂd_sˇn_li°_‰om_«nd
();

140 
UINT32
 
ªad
(UINT32 
rb™k
, UINT32 
row
, UINT32 
num_byãs
, 
UINT8
* 
buf
);

141 
UINT8
* 
gë_b•_öå
();

142 
¥öt_b™k_numbî
(
UINT32
 
rb™k
);

143 
¥öt_sˇn_li°
(
FILE
* 
fûe
);

144 
£nd_to_dev
(* c⁄° 
buf
, 
UINT32
 c⁄° 
£˘_˙t
);

145 
ªcv_‰om_dev
(* c⁄° 
buf
, 
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
£˘_˙t
);

146 
ßve_sˇn
();

147 
BOOL32
 
lﬂd_sˇn_li°_‰om_fûe
();

148 
·l_ö°Æl_m≠pög_èbÀ
();

150 
UINT8
 
GETCH
(* 
msg
, * 
li°
);

152 íum { 
	mFLASH_ID_OK
, 
	mFLASH_ID_VOID
, 
	mFLASH_ID_ERROR
 };

155 c⁄° 
UINT8
 
	gc_b™k_m≠
[
NUM_BANKS
] = 
BANK_MAP
;

157 
ö°ÆÀr_c⁄ãxt_t
* 
	ghc
;

159 
UINT8
 
	$GETCH
(* 
msg
, * 
li°
)

161 
UINT32
 
i
;

163 i‡(
msg
)

164 
	`¥ötf
(
msg
);

168 
ch
 = (Ë
	`_gëch
();

170 i‡(
ch
 >= 'A' && ch <= 'Z')

172 
ch
 -= 'A' - 'a';

175 i‡(
li°
 =
NULL
)

176  (
UINT8
Ë
ch
;

179 
i
 = 0; i < 
	`°æí
(
li°
); i++)

181 i‡(
li°
[
i
] =
ch
)

183 
	`¥ötf
("%c\n", 
ch
);

184 
	`fÊush
(
°dö
);

185 
	`fÊush
(
°dout
);

186  (
UINT8
Ë
ch
;

191 
	}
}

193 
	$ªp‹t_sy°em_îr‹
()

195 
LPVOID
 
ÕMsgBuf
;

197 
	`F‹m©Mesßge
(
FORMAT_MESSAGE_ALLOCATE_BUFFER
 | 
FORMAT_MESSAGE_FROM_SYSTEM
 | 
FORMAT_MESSAGE_IGNORE_INSERTS
,

198 
NULL
, 
	`GëLa°Eº‹
(), 
	`MAKELANGID
(
LANG_ENGLISH
, 
SUBLANG_DEFAULT
), (
LPTSTR
Ë&
ÕMsgBuf
, 0, NULL);

200 
	`¥ötf
("\nSYSTEM ERROR: %s\n", (
LPCTSTR
Ë
ÕMsgBuf
);

202 
	`LoˇlFªe
(
ÕMsgBuf
);

203 
	}
}

205 
	$ªcv_‰om_dev
(* c⁄° 
buf
, 
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
£˘_˙t
)

207 
BOOL
 
ªsu…
;

208 
DWORD
 
byã_˙t
;

209 
UINT8
* 
buf_±r
 = (UINT8*Ë
buf
;

210 
UINT32
 
ªmaö
 = 
£˘_˙t
;

212 i‡((((
UINT32
Ë
buf
Ë% 
BYTES_PER_SECTOR
) != 0)

214 
	`¥ötf
("ERROR: bufferáddress isÇotáligned\n");

215 
ERR_EXIT
;

218 
	`SëFûePoöãr
(
hc
->
h™dÀ
, 
lba
 * 
BYTES_PER_SECTOR
, 0, 
FILE_BEGIN
);

220 
ªmaö
 != 0)

222 
UINT32
 
num_£˘‹s
 = 
	`MIN
(
ªmaö
, 256);

224 
ªsu…
 = 
	`RódFûe
(
hc
->
h™dÀ
, 
buf_±r
, 
num_£˘‹s
 * 
BYTES_PER_SECTOR
, &
byã_˙t
, 
NULL
);

226 i‡(!
ªsu…
)

228 
	`¥ötf
("\nERROR:ÇoÑesponse from drive\t\t\n");

229 
ERR_EXIT
;

232 
buf_±r
 +
num_£˘‹s
 * 
BYTES_PER_SECTOR
;

233 
ªmaö
 -
num_£˘‹s
;

235 
	}
}

237 
	$£nd_to_dev
(* c⁄° 
buf
, 
UINT32
 c⁄° 
£˘_˙t
)

239 
DWORD
 
byã_˙t
;

241 i‡((((
UINT32
Ë
buf
Ë% 
BYTES_PER_SECTOR
) != 0)

243 
	`¥ötf
("ERROR: bufferáddress isÇotáligned\n");

244 
ERR_EXIT
;

247 i‡(
buf
 !
NULL
)

249 
UINT8
* 
buf_±r
 = (UINT8*Ë
buf
;

250 
UINT32
 
ªmaö
 = 
£˘_˙t
;

252 i‡(
£˘_˙t
 == 0)

254 
ERR_EXIT
;

257 i‡(
ROM_DRAM_BUF_LBA
 + 
£˘_˙t
 >
DRAM_SIZE
)

259 
	`¥ötf
("ERROR: sect_cnt isÅooÜarge\n");

260 
ERR_EXIT
;

263 
	`SëFûePoöãr
(
hc
->
h™dÀ
, 
ROM_DRAM_BUF_LBA
 * 
BYTES_PER_SECTOR
, 0, 
FILE_BEGIN
);

265 
ªmaö
 != 0)

267 
UINT32
 
num_£˘‹s
 = 
	`MIN
(
ªmaö
, 256);

269 i‡(!
	`WrôeFûe
(
hc
->
h™dÀ
, (*Ë
buf_±r
, 
num_£˘‹s
 * 
BYTES_PER_SECTOR
, &
byã_˙t
, 
NULL
))

271 
	`¥ötf
("ERROR:ÇoÑesponse from drive\t\t\n");

272 
ERR_EXIT
;

275 
buf_±r
 +
num_£˘‹s
 * 
BYTES_PER_SECTOR
;

276 
ªmaö
 -
num_£˘‹s
;

280 
	`§™d
((
UINT32
Ë
	`time
(
NULL
));

282 
Ác
->
key_1
 = 
	`ønd
();

283 
Ác
->
key_2
 = 0 - fac->
key_1
;

285 
	`SëFûePoöãr
(
hc
->
h™dÀ
, 0, 0, 
FILE_BEGIN
);

287 i‡(!
	`WrôeFûe
(
hc
->
h™dÀ
, (*Ë&hc->
Ác
, 
BYTES_PER_SECTOR
, &
byã_˙t
, 
NULL
))

289 
	`¥ötf
("ERROR:ÇoÑesponse from drive\t\t\n");

290 
ERR_EXIT
;

292 
	}
}

294 
	$¥öt_b™k_numbî
(
UINT32
 
rb™k
)

296 
UINT8
 
c_b™k_rm≠
[
NUM_BANKS_MAX
] = 
BANK_RMAP
;

297 
rb™k
 =Ñbank;

298 
	`¥ötf
("b™k %u=%c%u\t\n", 
rb™k
,Ñb™k % 
NUM_CHNLS_MAX
 + 'A',Ñbank / NUM_CHNLS_MAX);

299 
	}
}

301 
UINT32
 
	$check_Êash_id
(
UINT16
* c⁄° 
id
)

303 
UINT32
 
makî_code
 = 0;

304 
UINT32
 
id_d©a
;

305 
UINT32
 
i
;

306 
UINT32
 
ßme_cou¡
;

308 
id_d©a
 = 0;

309 
ßme_cou¡
 = 0;

311 
i
 = 0; i < 5; i++)

313 
UINT32
 
high
 = 
id
[
i
] & 0xFF;

314 
UINT32
 
low
 = (
id
[
i
] >> 8) & 0xFF;

316 i‡(
high
 !
low
)

318  
FLASH_ID_ERROR
;

321 i‡(
id
[
i
] == id[0])

323 
ßme_cou¡
++;

326 i‡(
i
 == 0)

328 
makî_code
 = 
low
;

332 
id_d©a
 = id_d©®| (
low
 << (8*(
i
 - 1)));

336 i‡(
ßme_cou¡
 == 5)

338  
FLASH_ID_VOID
;

341 i‡(
makî_code
 !
NAND_SPEC_MF
)

343  
FLASH_ID_ERROR
;

345 i‡((
id_d©a
 & 
NAND_SPEC_ID_MASK
Ë!
NAND_SPEC_ID
)

347  
FLASH_ID_ERROR
;

351  
FLASH_ID_OK
;

353 
	}
}

355 
BOOL32
 
	$öô
()

357 
UINT32
 
i
;

358 
UINT8
* 
buf
;

359 
UINT32
 
rb™k
;

360 
UINT32
 
b™k_bmp
;

362 i‡(
hc
->
h™dÀ
 =
INVALID_HANDLE_VALUE
)

364 
	`¥ötf
("ERROR:Åarget deviceÇot opened\n");

365  
FAIL
;

368 
buf
 = (
UINT8
*Ë
	`_Æig√d_mÆloc
(
BYTES_PER_SECTOR
, BYTES_PER_SECTOR);

370 
	`ª£t_f˘æ
(
FALSE
);

371 
	`ª£t_b™ks
();

373 
b™k_bmp
 = 0;

375 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

378 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

379 
Ác
->
subcmd
 = 
FC_READ_ID
;

380 
Ác
->
rb™k
 =Ñbank;

381 
Ác
->
›ti⁄
 = 0;

382 
Ác
->
dma_addr
 = 
INVALID32
;

383 
Ác
->
dma_˙t
 = 16;

384 
Ác
->
cﬁ
 = 0;

385 
Ác
->
row_l
 = 0;

386 
Ác
->
row_h
 = 0;

387 
Ác
->
waô
 = 
TRUE
;

388 
Ác
->
˛ór
 = 
TRUE
;

389 
	`£nd_to_dev
(
NULL
, 0);

392 
Ác
->
cmd
 = 
ROM_CMD_MU_CMD
;

393 
Ác
->
subcmd
 = 
MU_CMD_COPY
;

394 
Ác
->
mu_§c_addr
 = 
INVALID32
;

395 
Ác
->
mu_d°_addr
 = 
DRAM_BASE
;

396 
Ác
->
mu_size
 = 16;

397 
	`£nd_to_dev
(
NULL
, 0);

400 
	`ªcv_‰om_dev
(
buf
, 0, 1);

402 
	`¥ötf
("b™k %02u(%c%uËlow:", 
rb™k
,Ñb™k % 
NUM_CHNLS_MAX
 + 'A',Ñbank / NUM_CHNLS_MAX);

404 
i
 = 0; i < 5; i++)

405 
	`¥ötf
(" %02X", 
buf
[
i
*2]);

407 
	`¥ötf
(" high:", 
rb™k
);

409 
i
 = 0; i < 5; i++)

410 
	`¥ötf
(" %02X", 
buf
[
i
*2 + 1]);

412 
	`¥ötf
("\n");

414 i‡(
	`check_Êash_id
((
UINT16
*Ë
buf
Ë=
FLASH_ID_OK
)

416 
b™k_bmp
 |(1 << 
rb™k
);

420 
	`¥ötf
("b™k_bm∞%08X\n", 
b™k_bmp
);

422 
	`_Æig√d_‰ì
(
buf
);

424 
hc
->
up
 = 
FALSE
;

426 i‡(
b™k_bmp
 =
BANK_BMP
)

428 
hc
->
up
 = 
TRUE
;

430 i‡((
b™k_bmp
 & 
BANK_BMP
) == BANK_BMP)

432 
	`¥ötf
("WARNING: Fœsh c⁄figuøti⁄ mism©ch. Thêfúmw¨êwa†buûàf‹ %08X.\n", 
BANK_BMP
);

434 i‡(
	`GETCH
("Proceedányway?", "yn") == 'y')

436 
hc
->
up
 = 
TRUE
;

441 
	`¥ötf
("ERROR: Fœsh c⁄figuøti⁄ mism©ch. Thêfúmw¨êwa†buûàf‹ %08X.\n", 
BANK_BMP
);

444  
hc
->
up
 ? 
OK
 : 
FAIL
;

445 
	}
}

447 
	$íabÀ_Á˘‹y_mode
(
UINT32
 
sdøm_size
)

449 
UINT32
 
sum
, 
i
;

450 
Á˘‹y_cmd_t
* 
Ác
 = &
hc
->fac;

451 
UINT32
* c⁄° 
buf
 = (UINT32*Ë
Ác
;

453 
i
 = 0; i < 
BYTES_PER_SECTOR
 / (
UINT32
); i++)

455 
buf
[
i
] = 0;

458 
Ác
->
sdøm_sig«tuª_1
 = 0x0c23bb10;

459 
Ác
->
sdøm_sig«tuª_2_±r
 = (
BYTES_PER_SECTOR
 - 1Ë/ (
UINT32
);

460 *(
buf
 + 
Ác
->
sdøm_sig«tuª_2_±r
Ë
SDRAM_PARAM_SIGNATURE
 - fac->
sdøm_sig«tuª_1
;

462 
Ác
->
cmd
 = 
ROM_CMD_FACTORY_MODE
;

464 if(
sdøm_size
 =
SDRAM_16MB
)

465 
Ác
->
sdøm
.
öô
 = 
SDRAM_PARAM_75_16_INIT
 ;

466 if(
sdøm_size
 =
SDRAM_32MB
)

467 
Ác
->
sdøm
.
öô
 = 
SDRAM_PARAM_75_32_INIT
 ;

468 if(
sdøm_size
 =
SDRAM_64MB
)

469 
Ác
->
sdøm
.
öô
 = 
SDRAM_PARAM_75_64_INIT
 ;

471 
Ác
->
sdøm
.
öô
 = 
SDRAM_PARAM_ROM_CODE_INIT
 ;

473 
Ác
->
sdøm
.
ª‰esh
 = 
SDRAM_PARAM_ROM_CODE_REFRESH
;

474 
Ác
->
sdøm
.
timög
 = 
SDRAM_PARAM_ROM_CODE_TIMING
;

475 
Ác
->
sdøm
.
mrs
 = 
SDRAM_PARAM_ROM_CODE_MRS
;

476 
Ác
->
sdøm
.
byãs
 = 
DRAM_SIZE
;

478 
Ác
->
key_1
 = 0;

479 
Ác
->
key_2
 = 0;

480 
Ác
->
œ°_membî
 = 0;

481 
sum
 = 0;

483 
i
 = 0; i < 
BYTES_PER_SECTOR
 / (
UINT32
); i++)

485 
sum
 +
buf
[
i
];

488 
Ác
->
œ°_membî
 = 
FACTORY_CMD_SIGNATURE
 - 
sum
;

490 
	`£nd_to_dev
(
NULL
, 0);

492 
Ác
->
cmd
 = 
ROM_CMD_WRITE_MEM
;

493 
Ác
->
mem_addr
 = 
PHY_DEBUG
;

494 
Ác
->
mem_vÆ
 = 0x40000139;

495 
	`£nd_to_dev
(
NULL
, 0);

497 
	`SÀï
(600);

499 
Ác
->
cmd
 = 
ROM_CMD_WRITE_MEM
;

500 
Ác
->
mem_addr
 = 
PHY_DEBUG
;

501 
Ác
->
mem_vÆ
 = 0x400A040E;

502 
	`£nd_to_dev
(
NULL
, 0);

504 
	`SÀï
(600);

505 
	}
}

508 
	#SDRAM_SIZE_TEST_16_VAL
 0x16161616

	)

509 
	#SDRAM_SIZE_TEST_32_VAL
 0x32323232

	)

510 
	#SDRAM_SIZE_TEST_BASE
 0x40000800

	)

511 
	#SDRAM_SIZE_16_TEST_BASE
 0x40000C00

	)

512 
	#SDRAM_SIZE_32_TEST_BASE
 0x42000800

	)

514 
UINT32
 
	$dëe˘_sdøm_size
()

516 
UINT8
* 
buf
 = (UINT8*Ë
	`_Æig√d_mÆloc
(64 * 1024 * 1024, 
BYTES_PER_SECTOR
);

517 
UINT32
 
ªad_vÆue
;

518 
UINT32
 
sdøm_size
 = 
INVALID32
;

520 i‡(
buf
 =
NULL
)

522 
	`¥ötf
("ERROR: memoryállocation failure\n");

523 
ERR_EXIT


528 
Ác
->
cmd
 = 
ROM_CMD_WRITE_MEM
;

529 
Ác
->
mem_addr
 = 
SDRAM_SIZE_TEST_BASE
;

530 
Ác
->
mem_vÆ
 = 0x0;

531 
	`£nd_to_dev
(
NULL
, 0);

533 
Ác
->
cmd
 = 
ROM_CMD_WRITE_MEM
;

534 
Ác
->
mem_addr
 = 
SDRAM_SIZE_16_TEST_BASE
;

535 
Ác
->
mem_vÆ
 = 
SDRAM_SIZE_TEST_16_VAL
;

536 
	`£nd_to_dev
(
NULL
, 0);

539 
Ác
->
cmd
 = 
ROM_CMD_READ_MEM
;

540 
Ác
->
mem_addr
 = 
SDRAM_SIZE_TEST_BASE
;

541 
	`£nd_to_dev
(
NULL
, 0);

542 
	`ªcv_‰om_dev
(
buf
, 0, 1);

543 
ªad_vÆue
 = *(
UINT32
 *)
buf
;

545 if(
SDRAM_SIZE_TEST_16_VAL
 =
ªad_vÆue
)

547 
sdøm_size
 = 
SDRAM_16MB
;

548 
dëe˘_íd
;

553 
Ác
->
cmd
 = 
ROM_CMD_WRITE_MEM
;

554 
Ác
->
mem_addr
 = 
SDRAM_SIZE_TEST_BASE
;

555 
Ác
->
mem_vÆ
 = 0x0;

556 
	`£nd_to_dev
(
NULL
, 0);

558 
Ác
->
cmd
 = 
ROM_CMD_WRITE_MEM
;

559 
Ác
->
mem_addr
 = 
SDRAM_SIZE_32_TEST_BASE
;

560 
Ác
->
mem_vÆ
 = 
SDRAM_SIZE_TEST_32_VAL
;

561 
	`£nd_to_dev
(
NULL
, 0);

564 
Ác
->
cmd
 = 
ROM_CMD_READ_MEM
;

565 
Ác
->
mem_addr
 = 
SDRAM_SIZE_32_TEST_BASE
;

566 
	`£nd_to_dev
(
NULL
, 0);

567 
	`ªcv_‰om_dev
(
buf
, 0, 1);

568 
ªad_vÆue
 = *(
UINT32
 *)
buf
;

570 if(
SDRAM_SIZE_TEST_32_VAL
 !
ªad_vÆue
)

572 
sdøm_size
 = 
SDRAM_32MB
;

573 
dëe˘_íd
;

577 
Ác
->
cmd
 = 
ROM_CMD_READ_MEM
;

578 
Ác
->
mem_addr
 = 
SDRAM_SIZE_TEST_BASE
;

579 
	`£nd_to_dev
(
NULL
, 0);

580 
	`ªcv_‰om_dev
(
buf
, 0, 1);

581 
ªad_vÆue
 = *(
UINT32
 *)
buf
;

583 if(
SDRAM_SIZE_TEST_32_VAL
 =
ªad_vÆue
)

585 
sdøm_size
 = 
SDRAM_32MB
;

586 
dëe˘_íd
;

589 
sdøm_size
 = 
SDRAM_64MB
;

591 
dëe˘_íd
:

593 
	`_Æig√d_‰ì
(
buf
);

595  
sdøm_size
;

596 
	}
}

598 
BOOL32
 
	$quîy_devi˚
(
HANDLE
 
h™dÀ
)

600 
	#BUF_SIZE
 4096

	)

601 
	#BUF_ALIGN
 4096

	)

603 
UINT8
* 
buf„r
 = (UINT8*Ë
	`_Æig√d_mÆloc
(
BUF_SIZE
, 
BUF_ALIGN
);

604 
ULONG
 
dummy
;

606 
STORAGE_PROPERTY_QUERY
 
quîy
;

607 
quîy
.
QuîyTy≥
 = 
Pr›îtySènd¨dQuîy
;

608 
quîy
.
Pr›îtyId
 = 
St‹ageDevi˚Pr›îty
;

610 
UINT32
 
ªsu…
;

612 i‡(
	`Devi˚IoC⁄åﬁ
(
h™dÀ
, 
IOCTL_STORAGE_QUERY_PROPERTY
, &
quîy
, (quîy), (*Ë
buf„r
, 
BUF_SIZE
, &
dummy
, 
NULL
) == 0)

614 
ªsu…
 = 
FAIL
;

618 
PSTORAGE_DEVICE_DESCRIPTOR
 
desc
 = (PSTORAGE_DEVICE_DESCRIPTORË
buf„r
;

620 i‡(
desc
->
Produ˘IdOff£t
 != 0 && desc->ProductIdOffset != -1)

622 * 
¥odu˘_id
 = (*Ë(
buf„r
 + 
desc
->
Produ˘IdOff£t
);

624 i‡(
	`memcmp
(
¥odu˘_id
, "YATAPDON", 8) == 0)

626 
ªsu…
 = 
OK
;

630 
ªsu…
 = 
FAIL
;

635 
ªsu…
 = 
FAIL
;

638 i‡(
ªsu…
 =
FAIL
)

640 i‡(
desc
->
Víd‹IdOff£t
 != 0 && desc->VendorIdOffset != -1)

642 * 
víd‹_id
 = (*Ë(
buf„r
 + 
desc
->
Víd‹IdOff£t
);

644 i‡(
	`memcmp
(
víd‹_id
, "YATAPDON", 8) == 0)

646 
ªsu…
 = 
OK
;

652 
	`_Æig√d_‰ì
(
buf„r
);

654  
ªsu…
;

655 
	}
}

657 
BOOL32
 
	$›í_èrgë_drv
()

659 
UINT32
 
i
, 
drive_id
, 
sdøm_size
;

660 
HANDLE
 
h™dÀ
;

661 
drive_«me
[100];

663 i‡(
hc
->
h™dÀ
 !
INVALID_HANDLE_VALUE
)

665 
	`Clo£H™dÀ
(
hc
->
h™dÀ
);

666 
hc
->
h™dÀ
 = 
INVALID_HANDLE_VALUE
;

669 
drive_id
 = 0xFFFFFFFF;

671 
i
 = 0; i < 10; i++)

673 
	`•rötf
(
drive_«me
, "\\\\.\\PHYSICALDRIVE%u", 
i
);

675 
h™dÀ
 = 
	`Cª©eFûe
((
LPCSTR
Ë
drive_«me
,

676 
GENERIC_READ
 | 
GENERIC_WRITE
,

677 
FILE_SHARE_READ
 | 
FILE_SHARE_WRITE
,

678 
NULL
,

679 
OPEN_EXISTING
,

680 
FILE_FLAG_RANDOM_ACCESS
 | 
FILE_FLAG_NO_BUFFERING
 | 
FILE_FLAG_WRITE_THROUGH
,

681 
NULL
);

683 i‡(
h™dÀ
 =
INVALID_HANDLE_VALUE
)

686 i‡(
	`quîy_devi˚
(
h™dÀ
Ë=
OK
)

688 
drive_id
 = 
i
;

689 
	`Clo£H™dÀ
(
h™dÀ
);

694 
	`Clo£H™dÀ
(
h™dÀ
);

698 i‡(
drive_id
 == 0xFFFFFFFF)

700 
	`¥ötf
("ERROR: JasmineÇot found\n");

701  
FAIL
;

704 
	`•rötf
(
drive_«me
, "\\\\.\\PHYSICALDRIVE%u", 
drive_id
);

706 
hc
->
h™dÀ
 = 
	`Cª©eFûe
(
drive_«me
,

707 
GENERIC_READ
 | 
GENERIC_WRITE
,

708 
FILE_SHARE_READ
 | 
FILE_SHARE_WRITE
,

709 
NULL
,

710 
OPEN_EXISTING
,

711 
FILE_FLAG_RANDOM_ACCESS
 | 
FILE_FLAG_NO_BUFFERING
 | 
FILE_FLAG_WRITE_THROUGH
,

712 
NULL
);

714 i‡(
hc
->
h™dÀ
 =
INVALID_HANDLE_VALUE
)

716 
	`ªp‹t_sy°em_îr‹
();

717 
ERR_EXIT
;

720 
	`¥ötf
("enabling factory mode...");

722 
	`íabÀ_Á˘‹y_mode
(
SDRAM_64MB
);

723 
sdøm_size
 = 
	`dëe˘_sdøm_size
();

724 
	`¥ötf
("\ndëe˘ed SDRAM sizê%d MB\n", (
SDRAM_16MB
 =
sdøm_size
Ë? 16 : ((
SDRAM_32MB
 == sdram_size) ? 32 : 64) );

726 i‡(((
DRAM_SIZE
 =65075200Ë&& (
sdøm_size
 !
SDRAM_64MB
)) ||

727 ((
DRAM_SIZE
 =32537600Ë&& (
sdøm_size
 !
SDRAM_32MB
)) ||

728 ((
DRAM_SIZE
 =16268800Ë&& (
sdøm_size
 !
SDRAM_16MB
)))

730 
	`¥ötf
("ERROR: fúmw¨êbuûàf‹ %d MB\n", (
DRAM_SIZE
 == 16268800) ? 16 : ((DRAM_SIZE == 32537600) ? 32 : 64));

731 
ERR_EXIT
;

734 
	`íabÀ_Á˘‹y_mode
(
sdøm_size
);

736  
OK
;

737 
	}
}

739 
	$ª£t_f˘æ
(
BOOL32
 
°r⁄g_ecc
)

741 
UINT32
 
«nd_cfg_1
, 
«nd_cfg_2
, 
ecc_size
;

743 i‡(
°r⁄g_ecc
)

745 
ecc_size
 = 2;

749 #i‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 28

752 
ecc_size
 = 2;

754 #ñi‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 23

757 
ecc_size
 = 1;

759 #ñi‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 16

762 
ecc_size
 = 0;

769 
«nd_cfg_2
 = 
	`PG_SIZE
(
SECTORS_PER_PHYPAGE
 >> 3)

770 | 
	`BLK_SIZE
(
PAGES_PER_VBLK
 >> 7)

771 | 
	`CHK_CMD
(
NAND_SPEC_MF
 =
NAND_SPEC_TOSHIBA
 && 
OPTION_2_PLANE
)

772 | 
	`CHK_CODE
(0xC0)

773 | 
	`CHK_MASK
(0xC1)

774 | 
	`BCH
((
NAND_SPEC_CELL
 =
NAND_SPEC_CELL_MLC
Ë|| 
°r⁄g_ecc
)

775 | 
	`ECC_SIZE
(
ecc_size
);

777 #i‡
FLASH_TYPE
 =
H27UCG8UDMYR
 || FLASH_TYPE =
H27UBG8T2MYR
 || FLASH_TYPE =
H27UDG8VEMYR
 || \

778 
FLASH_TYPE
 =
H27UCG8VFATR
 || FLASH_TYPE =
H27UBG8U5ATR
 || FLASH_TYPE =
H27UBG8T2ATR
 || \

779 
FLASH_TYPE
 =
K9GAG08U0D
 || FLASH_TYPE =
K9LBG08U0D
 || FLASH_TYPE =
K9HCG08U1D
 || \

780 
FLASH_TYPE
 =
K9GBG08U0M
 || FLASH_TYPE =
K9PFG08U5M


781 
«nd_cfg_1
 = 0x18;

782 #ñi‡
NAND_SPEC_MF
 =
NAND_SPEC_SAMSUNG
 || NAND_SPEC_MF =
NAND_SPEC_HYNIX


784 #i‡
NAND_SPEC_DIE
 =
NAND_SPEC_DIE_2
 && 
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_2
 && 
OPTION_2_PLANE


786 #i‡
ROWS_PER_BANK
 == 262144

787 
«nd_cfg_1
 = 0x10 | (1 << 12);

789 #ñi‡
ROWS_PER_BANK
 == 524288

790 
«nd_cfg_1
 = 0x10 | (2 << 12);

792 #ñi‡
ROWS_PER_BANK
 == 1048576

793 
«nd_cfg_1
 = 0x10 | (3 << 12);

795 #ñi‡
ROWS_PER_BANK
 == 2097152

796 
«nd_cfg_1
 = 0x10 | (4 << 12);

798 #ñi‡
ROWS_PER_BANK
 == 4194304

799 
«nd_cfg_1
 = 0x10 | (5 << 12);

806 
«nd_cfg_1
 = 0x10;

809 #ñi‡
NAND_SPEC_MF
 =
NAND_SPEC_MICRON
 || NAND_SPEC_MF =
NAND_SPEC_INTEL


810 #i‡
NAND_SPEC_READ
 =
NAND_SPEC_READ_CYCLE_2


811 
«nd_cfg_1
 = 0x21;

813 
«nd_cfg_1
 = 0x11;

815 #ñi‡
NAND_SPEC_MF
 =
NAND_SPEC_TOSHIBA


816 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_2


817 
«nd_cfg_1
 = 0x12 | 0x08;

819 
«nd_cfg_1
 = 0x12;

822 
«nd_cfg_1
 = 0x10;

825 
Ác
->
cmd
 = 
ROM_CMD_RESET_FLASH
;

826 
Ác
->
«nd_cfg_2
 =Çand_cfg_2;

827 
Ác
->
time_cy˛e
 = 
FLASH_PARAM_TIMECYCLE_SAFE
;

828 
Ác
->
«nd_cfg_1
 =Çand_cfg_1;

830 
	`£nd_to_dev
(
NULL
, 0);

832 
Ác
->
cmd
 = 
ROM_CMD_WRITE_MEM
;

833 
Ác
->
mem_addr
 = 
SATA_BUF_PAGE_SIZE
;

834 
Ác
->
mem_vÆ
 = 
BYTES_PER_PAGE
;

835 
	`£nd_to_dev
(
NULL
, 0);

836 
	}
}

838 
	$ª£t_b™ks
()

840 
UINT32
 
rb™k
;

842 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

844 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

845 
Ác
->
subcmd
 = 
FC_GENERIC
;

846 
Ác
->
rb™k
 =Ñbank;

847 
Ác
->
cﬁ
 = 0xFF;

848 
Ác
->
›ti⁄
 = 0;

849 
Ác
->
waô
 = 
TRUE
;

850 
Ác
->
˛ór
 = 
TRUE
;

852 
	`£nd_to_dev
(
NULL
, 0);

855 
	`SÀï
(100);

856 
	}
}

858 
	$¥öt_sˇn_li°
(
FILE
* 
fûe
)

860 
UINT32
 
i
, 
num_bad_pblks
, 
num_bad_pblks_h
, 
num_bad_pblks_l
, 
rb™k
, 
num_tŸÆ_íåõs
;

862 
num_tŸÆ_íåõs
 = 0;

864 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

866 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

869 
num_tŸÆ_íåõs
 +
hc
->
sˇn_li°
[
rb™k
].
num_íåõs
;

872 
	`Ârötf
(
fûe
, "list of initial bad blocks :\n");

874 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

876 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

879 
num_bad_pblks
 = 
hc
->
sˇn_li°
[
rb™k
].
num_íåõs
;

881 
num_bad_pblks_l
 = 0;

883 
i
 = 0; i < 
num_bad_pblks
; i++)

885 i‡((
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
] & 0x8000) == 0)

886 
num_bad_pblks_l
++;

889 
	`Ârötf
(
fûe
, "\nb™k %u(%c%uËL: %u o‡%u (%.2f%%)\n", 
rb™k
,Ñb™k % 
NUM_CHNLS_MAX
 + 'A',Ñbank / NUM_CHNLS_MAX,

890 
num_bad_pblks_l
, 
PBLKS_PER_BANK
, ()Çum_bad_pblks_l / PBLKS_PER_BANK * 100);

892 
i
 = 0; i < 
num_bad_pblks
; i++)

894 i‡((
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
] & 0x8000) == 0)

895 
	`Ârötf
(
fûe
, "%u ", 
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
]);

898 
num_bad_pblks_h
 = 0;

900 
i
 = 0; i < 
num_bad_pblks
; i++)

902 i‡(
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
] & 0x8000)

903 
num_bad_pblks_h
++;

906 
	`Ârötf
(
fûe
, "\nb™k %u(%c%uËH: %u o‡%u (%.2f%%)\n", 
rb™k
,Ñb™k % 
NUM_CHNLS_MAX
 + 'A',Ñbank / NUM_CHNLS_MAX,

907 
num_bad_pblks_h
, 
PBLKS_PER_BANK
, ()Çum_bad_pblks_h / PBLKS_PER_BANK * 100);

909 
i
 = 0; i < 
num_bad_pblks
; i++)

911 i‡(
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
] & 0x8000)

912 
	`Ârötf
(
fûe
, "%u ", 
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
] & (~0x8000));

915 i‡(
num_bad_pblks_l
 + 
num_bad_pblks_h
 !
num_bad_pblks
)

917 
	`GETCH
("\nWARNING: sˇ¿li° sìm†tÿbêc‹ru± f‹Åhi†b™k\n", 
NULL
);

921 
	`Ârötf
(
fûe
, "\n");

922 
	}
}

924 
	$sˇn_bad_blks
()

926 
UINT32
 
tŸÆ_bad_blk_íåõs
;

927 
UINT32
* 
öput
;

928 
UINT32
* 
buf
;

929 
UINT32
 
tŸÆ_bad_blks
;

931 i‡(
hc
->
up
 =
FALSE
)

933 
	`¥ötf
("ERROR:Çot initialized\n");

937 
buf
 = (
UINT32
*Ë
	`_Æig√d_mÆloc
(
ROM_SCAN_BUF_SIZE
, 
BYTES_PER_SECTOR
);

938 
öput
 = 
buf
;

940 
Ác
->
°¨t_blk
 = 1;

941 
Ác
->
blks_≥r_b™k
 = 
PBLKS_PER_BANK
;

943 
	`_BôSˇnF‹w¨d
((
DWORD
*Ë&
Ác
->
shi·_Ωb
, 
PAGES_PER_VBLK
);

945 
Ác
->
cmd
 = 
ROM_CMD_SCAN
;

946 
Ác
->
cﬁ
 = 
BYTES_PER_PHYPAGE
;

947 
Ác
->
dma_˙t
 = 4;

948 
Ác
->
rows_≥r_blk
 = 
PAGES_PER_VBLK
;

949 
Ác
->
b™k_bmp
 = 
BANK_BMP
;

951 
	`£nd_to_dev
(
NULL
, 0);

953 
	`SÀï
(1000);

955 
	`ªcv_‰om_dev
(
buf
, 
ROM_DRAM_BUF_LBA
, 
ROM_SCAN_BUF_SIZE
 / 
BYTES_PER_SECTOR
);

959 
tŸÆ_bad_blk_íåõs
 = *
öput
++;

960 
tŸÆ_bad_blks
 = *
öput
++;

962 
	`¥ötf
("tŸÆÇumbî o‡bad block†ªp‹ãd = %u\n", 
tŸÆ_bad_blks
);

964 i‡(
tŸÆ_bad_blks
 > (
ROM_SCAN_BUF_SIZE
 / (
UINT32
) - 2))

966 
	`¥ötf
("ERROR: Too many bad blocks. Device-side buffer can hold %uÉntries.\n",

967 
ROM_SCAN_BUF_SIZE
 / (
UINT32
) - 2);

969 
ERR_EXIT
;

972 
tŸÆ_bad_blk_íåõs
-- != 0)

974 
UINT32
 
li°_íåy
 = *
öput
++;

975 
UINT32
 
rb™k
 = (
li°_íåy
 >> 24) & 0x3F;

976 
UINT32
 
blk
 = 
li°_íåy
 & 0x00FFFFFF;

978 i‡((
li°_íåy
 & 0xC0000000) == 0)

980 
	`¥ötf
("ERROR: scanÑesult hasÉrror\n");

981 
ERR_EXIT
;

985 i‡(
li°_íåy
 & 0x80000000)

987 
UINT32
 
num_íåõs
 = 
hc
->
sˇn_li°
[
rb™k
].num_entries++;

988 
hc
->
sˇn_li°
[
rb™k
].
li°
[
num_íåõs
] = ((
UINT16
Ë
blk
) | 0x8000;

991 i‡(
li°_íåy
 & 0x40000000)

993 
UINT32
 
num_íåõs
 = 
hc
->
sˇn_li°
[
rb™k
].num_entries++;

994 
hc
->
sˇn_li°
[
rb™k
].
li°
[
num_íåõs
] = (
UINT16
Ë
blk
;

999 i‡(*
öput
 != 0xFFFFFFFF)

1003 
	`¥ötf
("ERROR:Åermination markÇot found fromÜistÉnd\n");

1004 
ERR_EXIT
;

1007 
hc
->
sˇn_li°_lﬂded
 = 
TRUE
;

1009 
	`_Æig√d_‰ì
(
buf
);

1010 
	}
}

1012 
BOOL32
 
	$îa£_Êash
(
UINT32
 
°¨t_pblk_off£t
, UINT32 
íd_pblk_off£t
)

1014 
UINT32
 
pblk_off£t
;

1015 
UINT32
 
rb™k
;

1017 i‡(
íd_pblk_off£t
 =(
UINT32
) -1)

1018 
íd_pblk_off£t
 = 
PBLKS_PER_BANK
;

1020 
pblk_off£t
 = 
°¨t_pblk_off£t
;Öblk_off£à<
íd_pblk_off£t
;Öblk_offset++)

1022 
BOOL8
 
îa£d
[
NUM_BANKS_MAX
];

1024 
Ác
->
˛ór
 = 
TRUE
;

1026 
	`¥ötf
("îasög block %u\r", 
pblk_off£t
);

1028 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1030 
UINT32
 
i
;

1031 
BOOL32
 
bad_h
, 
bad_l
;

1033 
îa£d
[
rb™k
] = 
FALSE
;

1035 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1038 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

1039 
Ác
->
subcmd
 = 
FC_ERASE
;

1040 
Ác
->
rb™k
 =Ñbank;

1041 
Ác
->
›ti⁄
 = 0;

1042 
Ác
->
cﬁ
 = 0;

1043 
Ác
->
waô
 = 
FALSE
;

1044 
Ác
->
row_l
 = 
pblk_off£t
 * 
PAGES_PER_VBLK
;

1045 
Ác
->
row_h
 = 
pblk_off£t
 * 
PAGES_PER_VBLK
;

1047 
bad_h
 = 
bad_l
 = 
FALSE
;

1049 
i
 = 0; i < 
hc
->
sˇn_li°
[
rb™k
].
num_íåõs
; i++)

1051 
UINT16
 
bad_pblk_off£t
 = 
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
] & (~0x8000);

1052 
UINT16
 
high_chù_Êag
 = 
hc
->
sˇn_li°
[
rb™k
].
li°
[
i
] & 0x8000;

1054 i‡(
pblk_off£t
 =
bad_pblk_off£t
)

1056 i‡(
high_chù_Êag
)

1057 
bad_h
 = 
TRUE
;

1059 
bad_l
 = 
TRUE
;

1063 i‡(
bad_h
 && 
bad_l
)

1072 
Ác
->
›ti⁄
 = (
bad_h
 * 0x20Ë| (
bad_l
 * 0x10);

1074 
	`£nd_to_dev
(
NULL
, 0);

1076 
Ác
->
˛ór
 = 
FALSE
;

1078 
îa£d
[
rb™k
] = 
TRUE
;

1082 
Ác
->
cmd
 = 
ROM_CMD_FLASH_FINISH
;

1083 
	`£nd_to_dev
(
NULL
, 0);

1085 
	`¥ötf
("\t\t\t\t\n");

1087  
OK
;

1088 
	}
}

1090 
	$ßve_sˇn
()

1092 
UINT32
 
rb™k
;

1093 
FILE
* 
fûe
;

1094 
dúe˘‹y
[100];

1095 
fûe_«me
[150];

1097 i‡(
hc
->
sˇn_li°_lﬂded
 =
FALSE
)

1099 
	`¥ötf
("ERROR: haveÇothingÅo save\n");

1103 
	`¥ötf
("new directory = ");

1104 
	`sˇnf
("%s", 
dúe˘‹y
);

1106 i‡(
	`Cª©eDúe˘‹y
(
dúe˘‹y
, 
NULL
) == 0)

1108 
	`¥ötf
("ERROR: directory creation failed\n");

1112 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1114 
UINT32
 
ãmp
;

1115 
UINT32
 
size
;

1117 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1120 
	`•rötf
(
fûe_«me
, "%s\\sˇn_%u.bö", 
dúe˘‹y
, 
rb™k
);

1122 
fûe
 = 
	`f›í
(
fûe_«me
, "w+b");

1124 i‡(
fûe
 =
NULL
)

1126 
ERR_EXIT
;

1129 
size
 = 
SCAN_LIST_SIZE
;

1130 
ãmp
 = 
	`fwrôe
((*Ë(
hc
->
sˇn_li°
 + 
rb™k
), 1, 
size
, 
fûe
);

1132 i‡(
ãmp
 !
size
)

1134 
ERR_EXIT
;

1137 
	`f˛o£
(
fûe
);

1140 
	`•rötf
(
fûe_«me
, "%s\\sˇn.txt", 
dúe˘‹y
);

1142 
fûe
 = 
	`f›í
(
fûe_«me
, "w+t");

1144 i‡(
fûe
 =
NULL
)

1146 
ERR_EXIT
;

1149 
	`¥öt_sˇn_li°
(
fûe
);

1151 
	`f˛o£
(
fûe
);

1152 
	}
}

1154 
BOOL32
 
	$lﬂd_sˇn_li°_‰om_fûe
()

1156 
UINT32
 
rb™k
;

1157 
FILE
* 
fûe
;

1158 
dúe˘‹y
[100];

1159 
fûe_«me
[150];

1161 
	`¥ötf
("directory = ");

1162 
	`sˇnf
("%s", 
dúe˘‹y
);

1164 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1166 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1169 
	`•rötf
(
fûe_«me
, "%s\\sˇn_%u.bö", 
dúe˘‹y
, 
rb™k
);

1171 
fûe
 = 
	`f›í
(
fûe_«me
, "rb");

1173 i‡(
fûe
 =
NULL
)

1175 
	`¥ötf
("ERROR: c™nŸ o≥¿fûê%s\n", 
fûe_«me
);

1176  
FAIL
;

1179 
	`‰ód
((*Ë(
hc
->
sˇn_li°
 + 
rb™k
), 1, 
SCAN_LIST_SIZE
, 
fûe
);

1181 
	`f˛o£
(
fûe
);

1183 
hc
->
sˇn_li°_lﬂded
 = 
TRUE
;

1186 
	`¥öt_sˇn_li°
(
°dout
);

1188  
OK
;

1189 
	}
}

1191 
BOOL32
 
	$lﬂd_sˇn_li°_‰om_«nd
()

1193 
UINT32
 
rb™k
, 
∑ge_ªad_ªsu…
, 
ªsu…
;

1194 
UINT32
* 
buf
;

1196 i‡(
hc
->
up
 =
FALSE
)

1198 
	`¥ötf
("ERROR:Çot initialized\n");

1199  
FAIL
;

1202 
ªsu…
 = 
OK
;

1203 
buf
 = (
UINT32
*Ë
	`_Æig√d_mÆloc
(
BYTES_PER_SMALL_PAGE
, 
BYTES_PER_SECTOR
);

1205 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1207 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1210 
∑ge_ªad_ªsu…
 = 
	`ªad
(
rb™k
, 
SCAN_LIST_PAGE_OFFSET
, 
SCAN_LIST_SIZE
, (
UINT8
*Ë
buf
);

1212 i‡(
∑ge_ªad_ªsu…
 =
OK
)

1214 
	`¥ötf
("scanÜist found on ");

1215 
	`¥öt_b™k_numbî
(
rb™k
);

1217 
	`mem˝y
(
hc
->
sˇn_li°
 + 
rb™k
, 
buf
, 
SCAN_LIST_SIZE
);

1219 i‡(
∑ge_ªad_ªsu…
 =
ERR_CORRUPT
)

1221 
	`¥ötf
("ERROR: corrupted scanÜist (or unknownÅype of data) on ");

1222 
	`¥öt_b™k_numbî
(
rb™k
);

1224 
ªsu…
 = 
FAIL
;

1228 
	`¥ötf
("ERROR: cannot find scanÜist on ");

1229 
	`¥öt_b™k_numbî
(
rb™k
);

1230 
ªsu…
 = 
FAIL
;

1234 
	`_Æig√d_‰ì
(
buf
);

1236 i‡(
ªsu…
 =
OK
)

1238 
hc
->
sˇn_li°_lﬂded
 = 
TRUE
;

1241  
ªsu…
;

1242 
	}
}

1244 
UINT32
 
	$ªad
(
UINT32
 
rb™k
, UINT32 
row
, UINT32 
num_byãs
, 
UINT8
* 
buf
)

1246 i‡(
hc
->
up
 =
FALSE
)

1248 
	`¥ötf
("ERROR:Çot initialized\n");

1249  
FAIL
;

1252 i‡(
rb™k
 =
INVALID32
)

1254 
	`¥ötf
("bank = ");

1255 
	`sˇnf
("%u", &
rb™k
);

1257 
	`¥ötf
("row (real) = ");

1258 
	`sˇnf
("%u", &
row
);

1260 
	`¥ötf
("bytes = ");

1261 
	`sˇnf
("%u", &
num_byãs
);

1264 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1266 
	`¥ötf
("ERROR: specified bank doesÇotÉxist\n");

1267 
	`¥öt_b™k_numbî
(
rb™k
);

1268  
FAIL
;

1271 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

1272 
Ác
->
subcmd
 = 
FC_COL_ROW_READ_OUT
;

1273 
Ác
->
rb™k
 =Ñbank;

1274 
Ác
->
›ti⁄
 = 
FO_E
;

1275 
Ác
->
dma_addr
 = 
ROM_DRAM_BUF_ADDR
;

1276 
Ác
->
dma_˙t
 = 
num_byãs
;

1277 
Ác
->
cﬁ
 = 0;

1278 
Ác
->
row_l
 = 
row
;

1279 
Ác
->
row_h
 = 
row
;

1280 
Ác
->
waô
 = 
TRUE
;

1281 
Ác
->
˛ór
 = 
TRUE
;

1282 
	`£nd_to_dev
(
NULL
, 0);

1284 
UINT8
* 
b•_öå
 = 
	`gë_b•_öå
();

1286 
	`ªcv_‰om_dev
(
buf
, 
ROM_DRAM_BUF_LBA
, 
num_byãs
 / 
BYTES_PER_SECTOR
);

1288 i‡(
b•_öå
[
rb™k
] & 
FIRQ_DATA_CORRUPT
)

1290  
ERR_CORRUPT
;

1292 i‡(
b•_öå
[
rb™k
] & 
FIRQ_ALL_FF
)

1294  
ERR_BLANK
;

1298  
OK
;

1300 
	}
}

1302 
UINT8
* 
	$gë_b•_öå
()

1304 
UINT32
 
b•_öå
[8];

1305 
UINT32
 
i
;

1306 
UINT32
* 
buf
 = (UINT32*Ë
	`_Æig√d_mÆloc
(
BYTES_PER_SECTOR
, BYTES_PER_SECTOR);

1308 
i
 = 0; i < 
NUM_BANKS_MAX
; i += 4)

1310 
Ác
->
cmd
 = 
ROM_CMD_READ_MEM
;

1311 
Ác
->
mem_addr
 = 
BSP_INTR_BASE
 + 
i
;

1312 
	`£nd_to_dev
(
NULL
, 0);

1313 
	`ªcv_‰om_dev
(
buf
, 0, 1);

1314 
b•_öå
[
i
 / 4] = *
buf
;

1317 
	`_Æig√d_‰ì
(
buf
);

1319  (
UINT8
*Ë
b•_öå
;

1320 
	}
}

1322 
BOOL32
 
	$wrôe_to_Êash
(* 
buf
, 
UINT32
 
rb™k
, UINT32 
∑ge_addr
, UINT32 
num_byãs
)

1324 * 
ªad_buf
;

1325 
BOOL32
 
ªsu…
 = 
OK
;

1326 
UINT32
 
num_£˘‹s
;

1328 
num_£˘‹s
 = 
num_byãs
 / 
BYTES_PER_SECTOR
;

1330 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

1331 
Ác
->
subcmd
 = 
FC_COL_ROW_IN_PROG
;

1332 
Ác
->
rb™k
 =Ñbank;

1333 
Ác
->
›ti⁄
 = 
FO_E
 | 
FO_B_W_DRDY
;

1334 
Ác
->
dma_addr
 = 
ROM_DRAM_BUF_ADDR
;

1335 
Ác
->
dma_˙t
 = 
num_byãs
;

1336 
Ác
->
cﬁ
 = 0;

1337 
Ác
->
row_l
 = 
∑ge_addr
;

1338 
Ác
->
row_h
 = 
∑ge_addr
;

1339 
Ác
->
waô
 = 
TRUE
;

1340 
Ác
->
˛ór
 = 
TRUE
;

1342 
	`£nd_to_dev
(
buf
, 
num_£˘‹s
);

1344 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

1345 
Ác
->
subcmd
 = 
FC_COL_ROW_READ_OUT
;

1346 
Ác
->
rb™k
 =Ñbank;

1347 
Ác
->
›ti⁄
 = 
FO_E
;

1348 
Ác
->
dma_addr
 = 
ROM_DRAM_BUF_ADDR
;

1349 
Ác
->
dma_˙t
 = 
num_byãs
;

1350 
Ác
->
cﬁ
 = 0;

1351 
Ác
->
row_l
 = 
∑ge_addr
;

1352 
Ác
->
row_h
 = 
∑ge_addr
;

1353 
Ác
->
waô
 = 
TRUE
;

1354 
Ác
->
˛ór
 = 
TRUE
;

1356 
	`£nd_to_dev
(
NULL
, 0);

1358 
ªad_buf
 = 
	`_Æig√d_mÆloc
(
num_byãs
, 
BYTES_PER_SECTOR
);

1359 
	`ªcv_‰om_dev
(
ªad_buf
, 
ROM_DRAM_BUF_LBA
, 
num_£˘‹s
);

1361 i‡(
	`memcmp
(
ªad_buf
, 
buf
, 
num_byãs
) != 0)

1363 
FILE
* 
fûe
;

1364 
fûe_«me
[20];

1366 
	`¥ötf
("\nERROR: data corruption. see good.binánd bad.bin\n");

1367 
	`¥öt_b™k_numbî
(
rb™k
);

1369 
fûe
 = 
	`f›í
("good.bin", "w+b");

1370 
	`fwrôe
(
buf
, 1, 
num_byãs
, 
fûe
);

1371 
	`f˛o£
(
fûe
);

1373 
	`•rötf
(
fûe_«me
, "bad%u.bö", 
rb™k
);

1374 
fûe
 = 
	`f›í
(
fûe_«me
, "w+b");

1375 
	`fwrôe
(
ªad_buf
, 1, 
num_byãs
, 
fûe
);

1376 
	`f˛o£
(
fûe
);

1378 
ªsu…
 = 
FAIL
;

1381 
	`_Æig√d_‰ì
(
ªad_buf
);

1383  
ªsu…
;

1384 
	}
}

1386 
BOOL32
 
	$ö°Æl_block_zîo
()

1388 
UINT32
 
num_fw_∑ges
, 
∑ge_off£t
 = 
NULL
, 
rb™k
;

1389 
UINT32
* 
buf
;

1390 
UINT32
* 
ªad_buf
;

1391 
BOOL32
 
ªsu…
;

1392 
UINT32
 c⁄° 
tŸÆ_byãs
 = 
NUM_BANKS_MAX
 * 
BYTES_PER_SMALL_PAGE
;

1394 
ªsu…
 = 
OK
;

1398 
	`ª£t_f˘æ
(
FALSE
);

1400 
ªad_buf
 = (
UINT32
*Ë
	`_Æig√d_mÆloc
(
tŸÆ_byãs
, 
BYTES_PER_SECTOR
);

1402 
Ác
->
cmd
 = 
ROM_CMD_DO_NOTHING
;

1403 
	`£nd_to_dev
((*Ë
hc
->
sˇn_li°
, 
NUM_BANKS_MAX
 * 
SECTORS_PER_SMALL_PAGE
);

1405 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1407 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1410 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

1411 
Ác
->
subcmd
 = 
FC_COL_ROW_IN_PROG
;

1412 
Ác
->
rb™k
 =Ñbank;

1413 
Ác
->
dma_addr
 = 
ROM_DRAM_BUF_ADDR
 + 
rb™k
 * 
BYTES_PER_SMALL_PAGE
;

1414 
Ác
->
›ti⁄
 = 
FO_E
 | 
FO_B_W_DRDY
;

1415 
Ác
->
dma_˙t
 = 
BYTES_PER_SMALL_PAGE
;

1416 
Ác
->
cﬁ
 = 0;

1417 
Ác
->
row_l
 = 
SCAN_LIST_PAGE_OFFSET
;

1418 
Ác
->
row_h
 = 
SCAN_LIST_PAGE_OFFSET
;

1419 
Ác
->
waô
 = 
FALSE
;

1420 
Ác
->
˛ór
 = 
TRUE
;

1421 
	`£nd_to_dev
(
NULL
, 0);

1424 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1426 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1429 
Ác
->
cmd
 = 
ROM_CMD_FLASH_CMD
;

1430 
Ác
->
subcmd
 = 
FC_COL_ROW_READ_OUT
;

1431 
Ác
->
rb™k
 =Ñbank;

1432 
Ác
->
dma_addr
 = 
ROM_DRAM_BUF_ADDR
 + 
rb™k
 * 
BYTES_PER_SMALL_PAGE
;

1433 
Ác
->
›ti⁄
 = 
FO_E
;

1434 
Ác
->
dma_˙t
 = 
BYTES_PER_SMALL_PAGE
;

1435 
Ác
->
cﬁ
 = 0;

1436 
Ác
->
row_l
 = 
SCAN_LIST_PAGE_OFFSET
;

1437 
Ác
->
row_h
 = 
SCAN_LIST_PAGE_OFFSET
;

1438 
Ác
->
waô
 = 
FALSE
;

1439 
Ác
->
˛ór
 = 
TRUE
;

1440 
	`£nd_to_dev
(
NULL
, 0);

1443 
Ác
->
cmd
 = 
ROM_CMD_FLASH_FINISH
;

1444 
	`£nd_to_dev
(
NULL
, 0);

1446 
	`ªcv_‰om_dev
(
ªad_buf
, 
ROM_DRAM_BUF_LBA
, 
NUM_BANKS_MAX
 * 
SECTORS_PER_SMALL_PAGE
);

1448 i‡(
	`memcmp
(
ªad_buf
, (*Ë
hc
->
sˇn_li°
, 
tŸÆ_byãs
))

1450 
FILE
* 
fûe
;

1452 
	`¥ötf
("\nERROR: data corruption. see good.binánd bad.bin\n");

1454 
fûe
 = 
	`f›í
("good.bin", "w+b");

1455 
	`fwrôe
((*Ë
hc
->
sˇn_li°
, 1, 
tŸÆ_byãs
, 
fûe
);

1456 
	`f˛o£
(
fûe
);

1458 
fûe
 = 
	`f›í
("bad.bin", "w+b");

1459 
	`fwrôe
(
ªad_buf
, 1, 
tŸÆ_byãs
, 
fûe
);

1460 
	`f˛o£
(
fûe
);

1462 
ªsu…
 = 
FAIL
;

1465 
	`_Æig√d_‰ì
(
ªad_buf
);

1467 i‡(
ªsu…
 =
FAIL
)

1469  
FAIL
;

1474 
buf
 = (
UINT32
*)
	`_Æig√d_mÆloc
(
BYTES_PER_SECTOR
, BYTES_PER_SECTOR);

1475 
	`STOSD
(
buf
, 0xFFFFFFFF, 
BYTES_PER_SECTOR
 / (
UINT32
));

1477 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1479 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1482 
∑ge_off£t
 = 
SCAN_LIST_PAGE_OFFSET
 + 1;Öage_off£à< 
STAMP_PAGE_OFFSET
;Öage_offset++)

1484 i‡(
	`wrôe_to_Êash
(
buf
, 
rb™k
, 
∑ge_off£t
, 
BYTES_PER_SECTOR
Ë=
FAIL
)

1486  
FAIL
;

1494 
	`ª£t_f˘æ
(
TRUE
);

1496 
	`STOSD
(
buf
, 0, 
BYTES_PER_SECTOR
 / (
UINT32
));

1498 
buf
[0] = 0xC0C2E003;

1499 
buf
[1] = 
hc
->
fúmw¨e_image_byãs
;

1501 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1503 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1506 i‡(
	`wrôe_to_Êash
(
buf
, 
rb™k
, 
STAMP_PAGE_OFFSET
, 
BYTES_PER_SECTOR
Ë=
FAIL
)

1508 
ªsu…
 = 
FAIL
;

1512 
	`_Æig√d_‰ì
(
buf
);

1514 i‡(
ªsu…
 =
FAIL
)

1516  
FAIL
;

1526 
num_fw_∑ges
 = (
hc
->
fúmw¨e_image_byãs
 + 
BYTES_PER_FW_PAGE
 - 1) / BYTES_PER_FW_PAGE;

1528 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

1530 i‡((
BANK_BMP
 & (1 << 
rb™k
)) == 0)

1533 
buf
 = (
UINT32
*Ë
hc
->
fúmw¨e_image_buf
;

1535 
∑ge_off£t
 = 
FW_PAGE_OFFSET
;Öage_off£à< FW_PAGE_OFFSET + 
num_fw_∑ges
;Öage_offset++)

1537 i‡(
	`wrôe_to_Êash
(
buf
, 
rb™k
, 
∑ge_off£t
, 
BYTES_PER_FW_PAGE
Ë=
FAIL
)

1539  
FAIL
;

1542 
buf
 +
BYTES_PER_FW_PAGE
 / (
UINT32
);

1546 
	`¥ötf
("fúmw¨êimagêwrôã¿tÿ∑ge†%uÅhrough %u\n", 
FW_PAGE_OFFSET
, 
∑ge_off£t
 - 1);

1548 
	`ª£t_f˘æ
(
FALSE
);

1550  
OK
;

1551 
	}
}

1553 
BOOL32
 
	$lﬂd_fúmw¨e_image
()

1555 
FILE
* 
fûe
;

1556 
UINT32
 
num_byãs
;

1558 
fûe
 = 
	`f›í
("firmware.bin", "rb");

1560 i‡(
fûe
 =
NULL
)

1562 
	`¥ötf
("ERROR: cannot open firmware.bin forÑeading\n");

1563  
FAIL
;

1566 
num_byãs
 = 
	`‰ód
(
hc
->
fúmw¨e_image_buf
, 1, 
FW_BUF_BYTES
, 
fûe
);

1568 
	`f˛o£
(
fûe
);

1570 i‡(
num_byãs
 == 0)

1572 
	`¥ötf
("ERROR: cannotÑead firmware.bin\n");

1573  
FAIL
;

1576 i‡(
num_byãs
 =
FW_BUF_BYTES
)

1578 
	`¥ötf
("ERROR: firmware imageÅooÜarge\n");

1579  
FAIL
;

1582 
hc
->
fúmw¨e_image_byãs
 = 
num_byãs
;

1584  
OK
;

1585 
	}
}

1587 
	$ö°Æl
()

1589 i‡(
hc
->
up
 =
FALSE
)

1591 
	`¥ötf
("ERROR:Åarget deviceÇot initialized\n");

1595 i‡(
hc
->
sˇn_li°_lﬂded
 =
FALSE
)

1597 
	`¥ötf
("ERROR: scanÜistÇotÜoaded.\n");

1601 i‡(
	`lﬂd_fúmw¨e_image
(Ë=
FAIL
)

1604 i‡(
	`îa£_Êash
(0, 0Ë=
FAIL
)

1607 i‡(
	`ö°Æl_block_zîo
(Ë=
FAIL
)

1612 
Ác
->
cmd
 = 
ROM_CMD_RESET
;

1613 
	`£nd_to_dev
(
NULL
, 0);

1615 
	`GETCH
("fúmw¨êö°Æœti⁄ com∂ëe", 
NULL
);

1617 
	`exô
(0);

1618 
	}
}

1622 
	mMENU_INIT
 = 1,

1623 
	mMENU_LOAD_SCAN_DEV
,

1624 
	mMENU_INSTALL
,

1625 
	mMENU_SCAN
,

1626 
	mMENU_ERASE_ALL
,

1627 
	mMENU_SAVE_SCAN
,

1628 
	mMENU_LOAD_SCAN
,

1629 
	mMENU_EXIT
,

1630 
	mNUM_FAC_MENU_ITEMS


1633 
UINT32
 
	$¥öt_míu
()

1635 * 
míu_ãxt
[
NUM_FAC_MENU_ITEMS
];

1637 
	`STOSD
(
míu_ãxt
, 
NULL
, 
NUM_FAC_MENU_ITEMS
);

1639 
míu_ãxt
[
MENU_INIT
] = "initialize";

1640 
míu_ãxt
[
MENU_SCAN
] = "scan init bad blks";

1641 
míu_ãxt
[
MENU_LOAD_SCAN_DEV
] = "read scanÜist from flash block 0";

1642 
míu_ãxt
[
MENU_ERASE_ALL
] = "erase flasháll";

1643 
míu_ãxt
[
MENU_INSTALL
] = "install FW";

1644 
míu_ãxt
[
MENU_SAVE_SCAN
] = "save scanÜistÅo file";

1645 
míu_ãxt
[
MENU_LOAD_SCAN
] = "read scanÜist from file";

1646 
míu_ãxt
[
MENU_EXIT
] = "exit";

1648 
UINT32
 
i
;

1649 
UINT32
 
míu_£l
;

1651 
	`fÊush
(
°dö
);

1653 
	`¥ötf
("\n");

1655 
i
 = 0; i < 
NUM_FAC_MENU_ITEMS
; i++)

1657 i‡(
míu_ãxt
[
i
] !
NULL
)

1659 
	`¥ötf
("%2u %s\n", 
i
, 
míu_ãxt
[i]);

1665 
	`¥ötf
("\nselect :");

1666 
	`sˇnf
("%u", &
míu_£l
);

1668 
míu_£l
 >
NUM_FAC_MENU_ITEMS
);

1670 
	`¥ötf
("%s\n\n", 
míu_ãxt
[
míu_£l
]);

1672  
míu_£l
;

1673 
	}
}

1675 #i‡
_MSC_VER
 <= 1400

1676 
CWöAµ
 
	g≠p
;

1679 
	$maö
()

1681 #i‡
_MSC_VER
 <= 1400

1682 
	`AfxWöInô
(::
	`GëModuÀH™dÀ
(
NULL
), NULL, ::
	`GëComm™dLöe
(), 0);

1685 
hc
 = (
ö°ÆÀr_c⁄ãxt_t
*Ë
	`VútuÆAŒoc
(
NULL
, (ö°ÆÀr_c⁄ãxt_t), 
MEM_COMMIT
, 
PAGE_READWRITE
);

1686 
Ác
 = &(
hc
->fac);

1688 
	`ASSERT
((
Á˘‹y_cmd_t
Ë<
BYTES_PER_SECTOR
);

1690 
hc
->
h™dÀ
 = 
INVALID_HANDLE_VALUE
;

1691 
hc
->
up
 = 
FALSE
;

1692 
hc
->
sˇn_li°_lﬂded
 = 
FALSE
;

1694 
	`STOSD
(
hc
->
sˇn_li°
, 0x00000000, (hc->sˇn_li°Ë/ (
UINT32
));

1696 i‡(
	`›í_èrgë_drv
(Ë=
FAIL
)

1703 
UINT32
 
míu_£l
;

1705 
míu_£l
 = 
	`¥öt_míu
();

1707 i‡(
míu_£l
 =
MENU_EXIT
)

1710 
míu_£l
)

1712 
MENU_INIT
:

1713 
	`öô
();

1716 
MENU_SCAN
:

1717 
	`sˇn_bad_blks
();

1720 
MENU_LOAD_SCAN_DEV
:

1721 
	`lﬂd_sˇn_li°_‰om_«nd
();

1724 
MENU_ERASE_ALL
:

1726 i‡(
hc
->
sˇn_li°_lﬂded
)

1728 i‡(
	`GETCH
("WARNING: AllÅhe blocks will beÉrased.\nScanÜist willálso beÜost.\nContinue?", "yn") == 'y')

1730 
	`îa£_Êash
(0, (
UINT32
)-1);

1735 i‡(
	`GETCH
("WARNING: AllÅhe blocks will beÉrased.\nBecause you haveÇotÑeadá scanÜist,\ninitial bad blocks willálso beÉrased.\nContinue?", "yn") == 'y')

1737 
	`îa£_Êash
(0, (
UINT32
)-1);

1742 
MENU_INSTALL
:

1743 
	`ö°Æl
();

1746 
MENU_SAVE_SCAN
:

1747 
	`ßve_sˇn
();

1750 
MENU_LOAD_SCAN
:

1751 
	`lﬂd_sˇn_li°_‰om_fûe
();

1757 i‡(
hc
->
h™dÀ
 !
INVALID_HANDLE_VALUE
)

1759 
	`Clo£H™dÀ
(
hc
->
h™dÀ
);

1762 
	`VútuÆFªe
(
hc
, 0, 
MEM_RELEASE
);

1765 
	}
}

	@installer/ntddstor.h

31 #ifde‡
DEFINE_GUID


35 #i‚de‡
FAR


36 #ifde‡
_WIN32


37 
	#FAR


	)

39 
	#FAR
 
_Ár


	)

44 
DEFINE_GUID
(
GUID_DEVINTERFACE_DISK
, 0x53f56307L, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

45 
DEFINE_GUID
(
GUID_DEVINTERFACE_CDROM
, 0x53f56308L, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

46 
DEFINE_GUID
(
GUID_DEVINTERFACE_PARTITION
, 0x53f5630aL, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

47 
DEFINE_GUID
(
GUID_DEVINTERFACE_TAPE
, 0x53f5630bL, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

48 
DEFINE_GUID
(
GUID_DEVINTERFACE_WRITEONCEDISK
, 0x53f5630cL, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

49 
DEFINE_GUID
(
GUID_DEVINTERFACE_VOLUME
, 0x53f5630dL, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

50 
DEFINE_GUID
(
GUID_DEVINTERFACE_MEDIUMCHANGER
, 0x53f56310L, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

51 
DEFINE_GUID
(
GUID_DEVINTERFACE_FLOPPY
, 0x53f56311L, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

52 
DEFINE_GUID
(
GUID_DEVINTERFACE_CDCHANGER
, 0x53f56312L, 0xb6bf, 0x11d0, 0x94, 0xf2, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

53 
DEFINE_GUID
(
GUID_DEVINTERFACE_STORAGEPORT
, 0x2accfe60L, 0xc130, 0x11d2, 0xb0, 0x82, 0x00, 0xa0, 0xc9, 0x1e, 0xfb, 0x8b);

57 
	#DiskCœssGuid
 
GUID_DEVINTERFACE_DISK


	)

58 
	#CdRomCœssGuid
 
GUID_DEVINTERFACE_CDROM


	)

59 
	#P¨tôi⁄CœssGuid
 
GUID_DEVINTERFACE_PARTITION


	)

60 
	#T≠eCœssGuid
 
GUID_DEVINTERFACE_TAPE


	)

61 
	#WrôeOn˚DiskCœssGuid
 
GUID_DEVINTERFACE_WRITEONCEDISK


	)

62 
	#VﬁumeCœssGuid
 
GUID_DEVINTERFACE_VOLUME


	)

63 
	#MediumCh™gîCœssGuid
 
GUID_DEVINTERFACE_MEDIUMCHANGER


	)

64 
	#Fl›pyCœssGuid
 
GUID_DEVINTERFACE_FLOPPY


	)

65 
	#CdCh™gîCœssGuid
 
GUID_DEVINTERFACE_CDCHANGER


	)

66 
	#St‹ageP‹tCœssGuid
 
GUID_DEVINTERFACE_STORAGEPORT


	)

72 #i‚de‡
_NTDDSTOR_H_


73 
	#_NTDDSTOR_H_


	)

75 #ifde‡
__˝lu•lus


83 
	#IOCTL_STORAGE_BASE
 
FILE_DEVICE_MASS_STORAGE


	)

91 
	#IOCTL_STORAGE_CHECK_VERIFY
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0200, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

92 
	#IOCTL_STORAGE_CHECK_VERIFY2
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0200, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

93 
	#IOCTL_STORAGE_MEDIA_REMOVAL
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0201, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

94 
	#IOCTL_STORAGE_EJECT_MEDIA
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0202, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

95 
	#IOCTL_STORAGE_LOAD_MEDIA
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0203, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

96 
	#IOCTL_STORAGE_LOAD_MEDIA2
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0203, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

97 
	#IOCTL_STORAGE_RESERVE
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0204, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

98 
	#IOCTL_STORAGE_RELEASE
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0205, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

99 
	#IOCTL_STORAGE_FIND_NEW_DEVICES
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0206, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

101 
	#IOCTL_STORAGE_EJECTION_CONTROL
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0250, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

102 
	#IOCTL_STORAGE_MCN_CONTROL
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0251, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

104 
	#IOCTL_STORAGE_GET_MEDIA_TYPES
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0300, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

105 
	#IOCTL_STORAGE_GET_MEDIA_TYPES_EX
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0301, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

106 
	#IOCTL_STORAGE_GET_MEDIA_SERIAL_NUMBER
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0304, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

107 
	#IOCTL_STORAGE_GET_HOTPLUG_INFO
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0305, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

108 
	#IOCTL_STORAGE_SET_HOTPLUG_INFO
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0306, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
 | 
FILE_WRITE_ACCESS
)

	)

110 
	#IOCTL_STORAGE_RESET_BUS
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0400, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

111 
	#IOCTL_STORAGE_RESET_DEVICE
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0401, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

112 
	#IOCTL_STORAGE_BREAK_RESERVATION
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0405, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
)

	)

114 
	#IOCTL_STORAGE_GET_DEVICE_NUMBER
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0420, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

115 
	#IOCTL_STORAGE_PREDICT_FAILURE
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0440, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

120 
	#IOCTL_STORAGE_QUERY_PROPERTY
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0500, 
METHOD_BUFFERED
, 
FILE_ANY_ACCESS
)

	)

130 
	#OBSOLETE_IOCTL_STORAGE_RESET_BUS
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0400, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
 | 
FILE_WRITE_ACCESS
)

	)

131 
	#OBSOLETE_IOCTL_STORAGE_RESET_DEVICE
 
	`CTL_CODE
(
IOCTL_STORAGE_BASE
, 0x0401, 
METHOD_BUFFERED
, 
FILE_READ_ACCESS
 | 
FILE_WRITE_ACCESS
)

	)

138 
	s_STORAGE_HOTPLUG_INFO
 {

139 
ULONG
 
Size
;

140 
BOOLEAN
 
MedüRemovabÀ
;

141 
BOOLEAN
 
MedüHŸ∂ug
;

142 
BOOLEAN
 
Devi˚HŸ∂ug
;

143 
BOOLEAN
 
WrôeCacheE«bÀOvîride
;

144 } 
	tSTORAGE_HOTPLUG_INFO
, *
	tPSTORAGE_HOTPLUG_INFO
;

157 
	s_STORAGE_DEVICE_NUMBER
 {

163 
DWORD
 
Devi˚Ty≥
;

169 
ULONG
 
Devi˚Numbî
;

176 
ULONG
 
P¨tôi⁄Numbî
;

177 } 
	tSTORAGE_DEVICE_NUMBER
, *
	tPSTORAGE_DEVICE_NUMBER
;

183 
	s_STORAGE_BUS_RESET_REQUEST
 {

184 
UCHAR
 
P©hId
;

185 } 
	tSTORAGE_BUS_RESET_REQUEST
, *
	tPSTORAGE_BUS_RESET_REQUEST
;

197 
	s_PREVENT_MEDIA_REMOVAL
 {

198 
BOOLEAN
 
PªvítMedüRemovÆ
;

199 } 
	tPREVENT_MEDIA_REMOVAL
, *
	tPPREVENT_MEDIA_REMOVAL
;

204 
	s_TAPE_STATISTICS
 {

205 
ULONG
 
Vîsi⁄
;

206 
ULONG
 
Fœgs
;

207 
LARGE_INTEGER
 
RecovîedWrôes
;

208 
LARGE_INTEGER
 
UƒecovîedWrôes
;

209 
LARGE_INTEGER
 
RecovîedRóds
;

210 
LARGE_INTEGER
 
UƒecovîedRóds
;

211 
UCHAR
 
Com¥essi⁄R©ioRóds
;

212 
UCHAR
 
Com¥essi⁄R©ioWrôes
;

213 } 
	tTAPE_STATISTICS
, *
	tPTAPE_STATISTICS
;

215 
	#RECOVERED_WRITES_VALID
 0x00000001

	)

216 
	#UNRECOVERED_WRITES_VALID
 0x00000002

	)

217 
	#RECOVERED_READS_VALID
 0x00000004

	)

218 
	#UNRECOVERED_READS_VALID
 0x00000008

	)

219 
	#WRITE_COMPRESSION_INFO_VALID
 0x00000010

	)

220 
	#READ_COMPRESSION_INFO_VALID
 0x00000020

	)

222 
	s_TAPE_GET_STATISTICS
 {

223 
ULONG
 
O≥øti⁄
;

224 } 
	tTAPE_GET_STATISTICS
, *
	tPTAPE_GET_STATISTICS
;

226 
	#TAPE_RETURN_STATISTICS
 0L

	)

227 
	#TAPE_RETURN_ENV_INFO
 1L

	)

228 
	#TAPE_RESET_STATISTICS
 2L

	)

235 
	e_STORAGE_MEDIA_TYPE
 {

265 
DDS_4mm
 = 0x20,

266 
MöiQic
,

267 
Tøv™
,

268 
QIC
,

269 
MP_8mm
,

270 
AME_8mm
,

271 
AIT1_8mm
,

272 
DLT
,

273 
NCTP
,

274 
IBM_3480
,

275 
IBM_3490E
,

276 
IBM_Mag°¨_3590
,

277 
IBM_Mag°¨_MP
,

278 
STK_DATA_D3
,

279 
SONY_DTF
,

280 
DV_6mm
,

281 
DMI
,

282 
SONY_D2
,

283 
CLEANER_CARTRIDGE
,

284 
CD_ROM
,

285 
CD_R
,

286 
CD_RW
,

287 
DVD_ROM
,

288 
DVD_R
,

289 
DVD_RW
,

290 
MO_3_RW
,

291 
MO_5_WO
,

292 
MO_5_RW
,

293 
MO_5_LIMDOW
,

294 
PC_5_WO
,

295 
PC_5_RW
,

296 
PD_5_RW
,

297 
ABL_5_WO
,

298 
PINNACLE_APEX_5_RW
,

299 
SONY_12_WO
,

300 
PHILIPS_12_WO
,

301 
HITACHI_12_WO
,

302 
CYGNET_12_WO
,

303 
KODAK_14_WO
,

304 
MO_NFR_525
,

305 
NIKON_12_RW
,

306 
IOMEGA_ZIP
,

307 
IOMEGA_JAZ
,

308 
SYQUEST_EZ135
,

309 
SYQUEST_EZFLYER
,

310 
SYQUEST_SYJET
,

311 
AVATAR_F2
,

312 
MP2_8mm
,

313 
DST_S
,

314 
DST_M
,

315 
DST_L
,

316 
VXAT≠e_1
,

317 
VXAT≠e_2
,

318 
STK_9840
,

319 
LTO_U…rium
,

320 
LTO_Ac˚lis
,

321 
DVD_RAM
,

322 
AIT_8mm
,

323 
ADR_1
,

324 
ADR_2
,

325 
STK_9940
,

326 
SAIT


327 } 
	tSTORAGE_MEDIA_TYPE
, *
	tPSTORAGE_MEDIA_TYPE
;

329 
	#MEDIA_ERASEABLE
 0x00000001

	)

330 
	#MEDIA_WRITE_ONCE
 0x00000002

	)

331 
	#MEDIA_READ_ONLY
 0x00000004

	)

332 
	#MEDIA_READ_WRITE
 0x00000008

	)

334 
	#MEDIA_WRITE_PROTECTED
 0x00000100

	)

335 
	#MEDIA_CURRENTLY_MOUNTED
 0x80000000

	)

342 
	e_STORAGE_BUS_TYPE
 {

343 
BusTy≥Unknown
 = 0x00,

344 
BusTy≥Scsi
,

345 
BusTy≥Aèpi
,

346 
BusTy≥Aè
,

347 
BusTy≥1394
,

348 
BusTy≥Sß
,

349 
BusTy≥Fibª
,

350 
BusTy≥Usb
,

351 
BusTy≥RAID
,

352 
BusTy≥MaxRe£rved
 = 0x7F

353 } 
	tSTORAGE_BUS_TYPE
, *
	tPSTORAGE_BUS_TYPE
;

355 
	s_DEVICE_MEDIA_INFO
 {

358 
LARGE_INTEGER
 
Cylödîs
;

359 
STORAGE_MEDIA_TYPE
 
MedüTy≥
;

360 
ULONG
 
TøcksPîCylödî
;

361 
ULONG
 
Se˘‹sPîTøck
;

362 
ULONG
 
ByãsPîSe˘‹
;

363 
ULONG
 
NumbîMedüSides
;

364 
ULONG
 
MedüCh¨a˘îi°ics
;

365 } 
DiskInfo
;

368 
LARGE_INTEGER
 
Cylödîs
;

369 
STORAGE_MEDIA_TYPE
 
MedüTy≥
;

370 
ULONG
 
TøcksPîCylödî
;

371 
ULONG
 
Se˘‹sPîTøck
;

372 
ULONG
 
ByãsPîSe˘‹
;

373 
ULONG
 
NumbîMedüSides
;

374 
ULONG
 
MedüCh¨a˘îi°ics
;

375 } 
RemovabÀDiskInfo
;

378 
STORAGE_MEDIA_TYPE
 
MedüTy≥
;

379 
ULONG
 
MedüCh¨a˘îi°ics
;

380 
ULONG
 
CuºítBlockSize
;

381 
STORAGE_BUS_TYPE
 
BusTy≥
;

389 
UCHAR
 
MediumTy≥
;

390 
UCHAR
 
DísôyCode
;

391 } 
ScsiInf‹m©i⁄
;

392 } 
BusS≥cificD©a
;

394 } 
T≠eInfo
;

395 } 
Devi˚S≥cific
;

396 } 
	tDEVICE_MEDIA_INFO
, *
	tPDEVICE_MEDIA_INFO
;

398 
	s_GET_MEDIA_TYPES
 {

399 
ULONG
 
Devi˚Ty≥
;

400 
ULONG
 
MedüInfoCou¡
;

401 
DEVICE_MEDIA_INFO
 
MedüInfo
[1];

402 } 
	tGET_MEDIA_TYPES
, *
	tPGET_MEDIA_TYPES
;

417 
	s_STORAGE_PREDICT_FAILURE


419 
ULONG
 
Pªdi˘Faûuª
;

420 
UCHAR
 
Víd‹S≥cific
[512];

421 } 
	tSTORAGE_PREDICT_FAILURE
, *
	tPSTORAGE_PREDICT_FAILURE
;

450 
	e_STORAGE_QUERY_TYPE
 {

451 
Pr›îtySènd¨dQuîy
 = 0,

452 
Pr›îtyExi°sQuîy
,

453 
Pr›îtyMaskQuîy
,

454 
Pr›îtyQuîyMaxDeföed


455 } 
	tSTORAGE_QUERY_TYPE
, *
	tPSTORAGE_QUERY_TYPE
;

461 
	e_STORAGE_PROPERTY_ID
 {

462 
St‹ageDevi˚Pr›îty
 = 0,

463 
St‹ageAd≠ãrPr›îty
,

464 
St‹ageDevi˚IdPr›îty


465 } 
	tSTORAGE_PROPERTY_ID
, *
	tPSTORAGE_PROPERTY_ID
;

472 
	s_STORAGE_PROPERTY_QUERY
 {

478 
STORAGE_PROPERTY_ID
 
Pr›îtyId
;

484 
STORAGE_QUERY_TYPE
 
QuîyTy≥
;

490 
UCHAR
 
Addôi⁄ÆP¨amëîs
[1];

492 } 
	tSTORAGE_PROPERTY_QUERY
, *
	tPSTORAGE_PROPERTY_QUERY
;

499 
	s_STORAGE_DESCRIPTOR_HEADER
 {

501 
ULONG
 
Vîsi⁄
;

503 
ULONG
 
Size
;

505 } 
	tSTORAGE_DESCRIPTOR_HEADER
, *
	tPSTORAGE_DESCRIPTOR_HEADER
;

515 
	s_STORAGE_DEVICE_DESCRIPTOR
 {

521 
ULONG
 
Vîsi⁄
;

528 
ULONG
 
Size
;

534 
UCHAR
 
Devi˚Ty≥
;

540 
UCHAR
 
Devi˚Ty≥Modifõr
;

547 
BOOLEAN
 
RemovabÀMedü
;

555 
BOOLEAN
 
Comm™dQueueög
;

562 
ULONG
 
Víd‹IdOff£t
;

569 
ULONG
 
Produ˘IdOff£t
;

577 
ULONG
 
Produ˘Revisi⁄Off£t
;

584 
ULONG
 
SîülNumbîOff£t
;

592 
STORAGE_BUS_TYPE
 
BusTy≥
;

599 
ULONG
 
RawPr›îtõsLígth
;

605 
UCHAR
 
RawDevi˚Pr›îtõs
[1];

607 } 
	tSTORAGE_DEVICE_DESCRIPTOR
, *
	tPSTORAGE_DEVICE_DESCRIPTOR
;

618 
	s_STORAGE_ADAPTER_DESCRIPTOR
 {

620 
ULONG
 
Vîsi⁄
;

622 
ULONG
 
Size
;

624 
ULONG
 
MaximumTøns„rLígth
;

626 
ULONG
 
MaximumPhysiˇlPages
;

628 
ULONG
 
AlignmítMask
;

630 
BOOLEAN
 
Ad≠ãrU£sPio
;

632 
BOOLEAN
 
Ad≠ãrSˇnsDown
;

634 
BOOLEAN
 
Comm™dQueueög
;

636 
BOOLEAN
 
Ac˚ÀøãdTøns„r
;

638 
UCHAR
 
BusTy≥
;

640 
USHORT
 
BusMaj‹Vîsi⁄
;

642 
USHORT
 
BusMö‹Vîsi⁄
;

644 } 
	tSTORAGE_ADAPTER_DESCRIPTOR
, *
	tPSTORAGE_ADAPTER_DESCRIPTOR
;

652 
	e_STORAGE_IDENTIFIER_CODE_SET
 {

653 
St‹ageIdCodeSëRe£rved
 = 0,

654 
St‹ageIdCodeSëBö¨y
 = 1,

655 
St‹ageIdCodeSëAscii
 = 2

656 } 
	tSTORAGE_IDENTIFIER_CODE_SET
, *
	tPSTORAGE_IDENTIFIER_CODE_SET
;

658 
	e_STORAGE_IDENTIFIER_TYPE
 {

659 
St‹ageIdTy≥Víd‹S≥cific
 = 0,

660 
St‹ageIdTy≥Víd‹Id
 = 1,

661 
St‹ageIdTy≥EUI64
 = 2,

662 
St‹ageIdTy≥FCPHName
 = 3,

663 
St‹ageIdTy≥P‹tRñ©ive
 = 4

664 } 
	tSTORAGE_IDENTIFIER_TYPE
, *
	tPSTORAGE_IDENTIFIER_TYPE
;

666 
	e_STORAGE_ASSOCIATION_TYPE
 {

667 
St‹ageIdAssocDevi˚
 = 0,

668 
St‹ageIdAssocP‹t
 = 1

669 } 
	tSTORAGE_ASSOCIATION_TYPE
, *
	tPSTORAGE_ASSOCIATION_TYPE
;

671 
	s_STORAGE_IDENTIFIER
 {

672 
STORAGE_IDENTIFIER_CODE_SET
 
CodeSë
;

673 
STORAGE_IDENTIFIER_TYPE
 
Ty≥
;

674 
USHORT
 
IdítifõrSize
;

675 
USHORT
 
NextOff£t
;

682 
STORAGE_ASSOCIATION_TYPE
 
Assocüti⁄
;

688 
UCHAR
 
Idítifõr
[1];

689 } 
	tSTORAGE_IDENTIFIER
, *
	tPSTORAGE_IDENTIFIER
;

691 
	s_STORAGE_DEVICE_ID_DESCRIPTOR
 {

693 
ULONG
 
Vîsi⁄
;

695 
ULONG
 
Size
;

701 
ULONG
 
NumbîOfIdítifõrs
;

709 
UCHAR
 
Idítifõrs
[1];

710 } 
	tSTORAGE_DEVICE_ID_DESCRIPTOR
, *
	tPSTORAGE_DEVICE_ID_DESCRIPTOR
;

713 #¥agm®
w¨nög
(
push
)

714 #¥agm®
w¨nög
(
dißbÀ
:4200)

715 
	s_STORAGE_MEDIA_SERIAL_NUMBER_DATA
 {

717 
USHORT
 
Re£rved
;

725 
USHORT
 
SîülNumbîLígth
;

733 
UCHAR
 
SîülNumbî
[0];

735 } 
	tSTORAGE_MEDIA_SERIAL_NUMBER_DATA
, *
	tPSTORAGE_MEDIA_SERIAL_NUMBER_DATA
;

736 #¥agm®
w¨nög
(
push
)

741 #ifde‡
__˝lu•lus


	@sata/sata_cmd.c

20 
	~"jasmöe.h
"

23 
	$©a_check_powî_mode
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

25 
UINT32
 
fis_ty≥
 = 
FISTYPE_REGISTER_D2H
;

26 
UINT32
 
Êags
 = 
B_IRQ
;

27 
UINT32
 
°©us
 = 
B_DRDY
 | 
BIT4
;

29 
	`SETREG
(
SATA_FIS_D2H_0
, 
fis_ty≥
 | (
Êags
 << 8Ë| (
°©us
 << 16));

30 
	`SETREG
(
SATA_FIS_D2H_1
, 
	`GETREG
(
SATA_FIS_H2D_1
));

31 
	`SETREG
(
SATA_FIS_D2H_2
, 
	`GETREG
(
SATA_FIS_H2D_2
) & 0x00FFFFFF);

32 
	`SETREG
(
SATA_FIS_D2H_3
, 0x000000FF);

33 
	`SETREG
(
SATA_FIS_D2H_4
, 0);

34 
	`SETREG
(
SATA_FIS_D2H_LEN
, 5);

36 i‡((
	`GETREG
(
SATA_PHY_STATUS
) & 0xF0F) != 0x103)

41 
	`SETREG
(
SATA_CTRL_2
, 
SEND_NON_DATA_FIS
);

42 
	}
}

44 
	$©a_Êush_ˇche
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

46 
	`·l_Êush
();

47 
	`£nd_°©us_to_ho°
(0);

48 
	}
}

50 
	$©a_ªad_vîify_£˘‹s
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
£˘‹_cou¡
)

52 
	`£nd_°©us_to_ho°
(0);

53 
	}
}

55 
	$©a_£t_„©uªs
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

57 
BOOL8
 
övÆid
 = 
FALSE
;

59 
	`GETREG
(
SATA_FIS_H2D_0
) >> 24)

61 
FEATURE_ENABLE_WRITE_CACHE
:

62 
g_ßè_c⁄ãxt
.
wrôe_ˇche_íabÀd
 = 
TRUE
;

64 
FEATURE_SET_TRANSFER_MODE
:

66 
FEATURE_ENABLE_USE_OF_SATA
:

67 i‡((
£˘‹_cou¡
 & 0xFF) == 0x02)

69 
g_ßè_c⁄ãxt
.
dma_£tup_auto_a˘iv©e
 = 
TRUE
;

72 
FEATURE_DISABLE_READ_LOOK_AHEAD
:

73 
g_ßè_c⁄ãxt
.
ªad_look_ahód_íabÀd
 = 
FALSE
;

75 
FEATURE_DISABLE_WRITE_CACHE
:

76 
g_ßè_c⁄ãxt
.
wrôe_ˇche_íabÀd
 = 
FALSE
;

78 
FEATURE_DISABLE_USE_OF_SATA
:

79 i‡((
£˘‹_cou¡
 & 0xFF) == 0x02)

81 
g_ßè_c⁄ãxt
.
dma_£tup_auto_a˘iv©e
 = 
FALSE
;

84 
FEATURE_ENABLE_READ_LOOK_AHEAD
:

85 
g_ßè_c⁄ãxt
.
ªad_look_ahód_íabÀd
 = 
TRUE
;

89 
övÆid
 = 
TRUE
;

93 i‡(
övÆid
)

95 
	`£nd_°©us_to_ho°
(
B_ABRT
);

99 
	`£nd_°©us_to_ho°
(0);

101 
	}
}

103 
	$©a_£ek
(
UINT32
 c⁄° 
lba
, UINT32 c⁄° 
£˘‹_cou¡
)

105 i‡(
lba
 > 
MAX_LBA
)

107 
	`£nd_°©us_to_ho°
(
B_IDNF
);

111 
	`£nd_°©us_to_ho°
(0);

113 
	}
}

115 
	$©a_£t_mu…ùÀ_mode
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

117 
	`£nd_°©us_to_ho°
(0);

118 
	}
}

120 
	$©a_ªad_buf„r
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

122 
	`pio_£˘‹_å™s„r
(
HIL_BUF_ADDR
, 
PIO_D2H
);

123 
	}
}

125 
	$©a_wrôe_buf„r
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

127 
	`pio_£˘‹_å™s„r
(
HIL_BUF_ADDR
, 
PIO_H2D
);

128 
	}
}

130 
	$©a_°™dby
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

132 
	`·l_Êush
();

134 
	`£nd_°©us_to_ho°
(0);

135 
	}
}

137 
	$©a_°™dby_immedüã
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

139 
	`·l_Êush
();

141 
	`£nd_°©us_to_ho°
(0);

142 
	}
}

144 
	$©a_idÀ
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

146 
	`·l_Êush
();

148 
	`£nd_°©us_to_ho°
(0);

149 
	}
}

151 
	$©a_idÀ_immedüã
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

153 
	`·l_Êush
();

155 
	`£nd_°©us_to_ho°
(0);

156 
	}
}

158 
	$©a_¶ìp
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

160 
	`£nd_°©us_to_ho°
(0);

161 
	}
}

163 
	$©a_ªad_«tive_max_addªss
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

165 
UINT32
 
fis_ty≥
 = 
FISTYPE_REGISTER_D2H
;

166 
UINT32
 
Êags
 = 
B_IRQ
;

167 
UINT32
 
°©us
 = 
B_DRDY
 | 
BIT4
;

169 
	`SETREG
(
SATA_FIS_D2H_0
, 
fis_ty≥
 | (
Êags
 << 8Ë| (
°©us
 << 16));

171 
UINT32
 
fis_d1
 = 
	`GETREG
(
SATA_FIS_H2D_1
);

173 i‡(
g_ßè_c⁄ãxt
.
¶ow_cmd
.
code
 =
ATA_READ_NATIVE_MAX_ADDRESS_EXT
)

175 
	`SETREG
(
SATA_FIS_D2H_1
, (
fis_d1
 & 0xFF000000Ë| (
MAX_LBA
 & 0x00FFFFFF));

176 
	`SETREG
(
SATA_FIS_D2H_2
, 
MAX_LBA
 >> 24);

178 i‡((
fis_d1
 & 
BIT30
) == 0)

180 
	`SETREG
(
SATA_FIS_D2H_1
, 0x003FFF3F | (((
UINT32
Ë
CHS_HEADS
 - 1) << 24));

181 
	`SETREG
(
SATA_FIS_D2H_2
, 0);

185 
	`SETREG
(
SATA_FIS_D2H_1
, (
MAX_LBA
 & 0x0FFFFFFFË| (
fis_d1
 & 0xF0000000));

186 
	`SETREG
(
SATA_FIS_D2H_2
, 0);

189 
	`SETREG
(
SATA_FIS_D2H_3
, 
	`GETREG
(
SATA_FIS_H2D_3
) & 0x0000FFFF);

190 
	`SETREG
(
SATA_FIS_D2H_4
, 0);

191 
	`SETREG
(
SATA_FIS_D2H_LEN
, 5);

193 i‡((
	`GETREG
(
SATA_PHY_STATUS
) & 0xF0F) != 0x103)

198 
	`SETREG
(
SATA_CTRL_2
, 
SEND_NON_DATA_FIS
);

199 
	}
}

201 
	$©a_n›
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

203 
	`£nd_°©us_to_ho°
(
B_ABRT
);

204 
	}
}

206 
	$©a_öôülize_devi˚_∑ømëîs
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

208 i‡((
£˘‹_cou¡
 & 0xFF) == 0)

210 
	`£nd_°©us_to_ho°
(
B_ABRT
);

214 
g_ßè_c⁄ãxt
.
chs_cur_hóds
 = ((
	`GETREG
(
SATA_FIS_H2D_1
) & 0x0F000000) >> 24) + 1;

215 
g_ßè_c⁄ãxt
.
chs_cur_£˘‹s
 = 
£˘‹_cou¡
 & 0xFF;

217 #i‡
MAX_LBA
 >
CHS_MAX_ADDR


219 
g_ßè_c⁄ãxt
.
chs_cur_cylödîs
 = 
	`MIN
–
CHS_MAX_ADDR
/(g_ßè_c⁄ãxt.
chs_cur_hóds
*g_ßè_c⁄ãxt.
chs_cur_£˘‹s
), 65535 );

223 
g_ßè_c⁄ãxt
.
chs_cur_cylödîs
 = 
	`MIN
–
MAX_LBA
/(g_ßè_c⁄ãxt.
chs_cur_hóds
*g_ßè_c⁄ãxt.
chs_cur_£˘‹s
), 65535 );

227 
	`£nd_°©us_to_ho°
(0);

229 
	}
}

231 
	$©a_ªˇlibøã
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

233 
	`£nd_°©us_to_ho°
(0);

234 
	}
}

236 
	$©a_nŸ_suµ‹ãd
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

238 
	`£nd_°©us_to_ho°
(
B_ABRT
);

239 
	}
}

241 
	$£nd_°©us_to_ho°
(
UINT32
 c⁄° 
îr_code
)

243 
UINT32
 
fis_ty≥
 = 
FISTYPE_REGISTER_D2H
;

244 
UINT32
 
Êags
 = 
B_IRQ
;

245 
UINT32
 
°©us
 = (
îr_code
 =0Ë? (
B_DRDY
|
BIT4
Ë: (B_DRDY|BIT4|
B_ERR
);

247 
	`SETREG
(
SATA_FIS_D2H_0
, 
fis_ty≥
 | (
Êags
 << 8Ë| (
°©us
 << 16Ë| (
îr_code
 << 24));

248 
	`SETREG
(
SATA_FIS_D2H_1
, 
	`GETREG
(
SATA_FIS_H2D_1
));

249 
	`SETREG
(
SATA_FIS_D2H_2
, 
	`GETREG
(
SATA_FIS_H2D_2
) & 0x00FFFFFF);

250 
	`SETREG
(
SATA_FIS_D2H_3
, 
	`GETREG
(
SATA_FIS_H2D_3
) & 0x0000FFFF);

251 
	`SETREG
(
SATA_FIS_D2H_4
, 0);

252 
	`SETREG
(
SATA_FIS_D2H_LEN
, 5);

254 i‡((
	`GETREG
(
SATA_PHY_STATUS
) & 0xF0F) != 0x103)

259 
	`SETREG
(
SATA_CTRL_2
, 
SEND_NON_DATA_FIS
);

260 
	}
}

262 
	$©a_execuã_drive_dügno°ics
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

264 
	`©a_§°
(
TRUE
, 
NULL
);

265 
	}
}

267 
	$©a_§°
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

269 
BOOL32
 
öãºu±
 = (
lba
 != 0);

271 
	`SETREG
(
SATA_FIS_D2H_0
, 0x01500000 | (
öãºu±
 << 14Ë| 
FISTYPE_REGISTER_D2H
);

272 
	`SETREG
(
SATA_FIS_D2H_1
, 0x00000001);

273 
	`SETREG
(
SATA_FIS_D2H_2
, 0x00000000);

274 
	`SETREG
(
SATA_FIS_D2H_3
, 0x00000001);

275 
	`SETREG
(
SATA_FIS_D2H_4
, 0x00000000);

276 
	`SETREG
(
SATA_FIS_D2H_LEN
, 5);

278 
	`dñay
(5000);

280 i‡((
	`GETREG
(
SATA_PHY_STATUS
) & 0xF0F) != 0x103)

285 
	`SETREG
(
SATA_CTRL_2
, 
SEND_NON_DATA_FIS
);

286 
	}
}

289 
	$pio_£˘‹_å™s„r
(
UINT32
 c⁄° 
døm_addr
, UINT32 c⁄° 
¥Ÿocﬁ
)

291 
	`dißbÀ_fiq
();

293 
	`SETREG
(
SATA_CTRL_3
, 
BIT3
);

294 
	`SETREG
(
SATA_MANUAL_MODE_ADDR
, 
døm_addr
 - 
DRAM_BASE
);

296 
UINT32
 
fis_ty≥
 = 
FISTYPE_PIO_SETUP
;

297 
UINT32
 
Êags
 = 
B_IRQ
;

298 
UINT32
 
°©us
 = 
B_DRDY
 | 
BIT4
 | 
B_DRQ
;

299 
UINT32
 
e_°©us
 = 
B_DRDY
 | 
BIT4
;

301 
	`SETREG
(
SATA_FIS_D2H_0
, 
fis_ty≥
 | (
Êags
 << 8Ë| (
°©us
 << 16));

302 
	`SETREG
(
SATA_FIS_D2H_1
, 
	`GETREG
(
SATA_FIS_H2D_1
));

303 
	`SETREG
(
SATA_FIS_D2H_2
, 
	`GETREG
(
SATA_FIS_H2D_2
) & 0x00FFFFFF);

304 
	`SETREG
(
SATA_FIS_D2H_3
, (
e_°©us
 << 24Ë| (
	`GETREG
(
SATA_FIS_H2D_3
) & 0x0000FFFF));

305 
	`SETREG
(
SATA_FIS_D2H_4
, 
BYTES_PER_SECTOR
);

307 
	`SETREG
(
SATA_FIS_D2H_LEN
, 5);

308 
	`SETREG
(
SATA_XFER_BYTES
, 
BYTES_PER_SECTOR
);

310 
	`SETREG
(
SATA_INT_STAT
, 
OPERATION_OK
 | 
OPERATION_ERR
);

312 i‡(
PIO_D2H
 =
¥Ÿocﬁ
)

314 
	`SETREG
(
SATA_CTRL_2
, 
PIO_READ
 | 
CLR_STAT_PIO_SETUP
);

318 
	`SETREG
(
SATA_CTRL_2
, 
PIO_WRITE
);

321 (
	`GETREG
(
SATA_INT_STAT
Ë& (
OPERATION_OK
 | 
OPERATION_ERR
)) == 0);

323 i‡(
PIO_H2D
 =
¥Ÿocﬁ
)

327 
	`GETREG
(
SATA_FIFO_1_STATUS
) & 0x007F0000);

330 
	`SETREG
(
SATA_INT_STAT
, 
OPERATION_OK
 | 
OPERATION_ERR
);

331 
	`SETREG
(
APB_INT_STS
, 
INTR_SATA
);

333 
	`íabÀ_fiq
();

336 
	`SETREG
(
SATA_CTRL_3
, 0);

338 i‡(
¥Ÿocﬁ
 =
PIO_H2D
)

340 
	`£nd_°©us_to_ho°
(0);

342 
	}
}

	@sata/sata_identify.c

20 
	~"jasmöe.h
"

21 
	~"ßè.h
"

23 
	#SERIAL
 0,0,0,0,0,0,0,0,0,0

	)

24 
	#FW_REV
 0,0,0,0

	)

25 
	#MODEL
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

	)

27 #ifde‡
__GNUC__


28 
UINT16
 
	ght_idítify_d©a
[256] 
__©åibuã__
((
Æig√d
(4))) =

30 
	$__Æign
(4Ë
UINT16
 
ht_idítify_d©a
[256] =

45 
CHS_HEADS
,

50 
SERIAL
,

54 
FW_REV
,

55 
MODEL
,

102 (
NCQ_SIZE
 - 1),

273 
	}
};

275 
UINT16
 
	$gë_öãgrôy_w‹d
()

277 
UINT8
 
checksum
 = 0;

278 
UINT16
 
i
;

279 
UINT16
 
ªtvÆ
;

281 
i
 = 0; i < 
BYTES_PER_SECTOR
 - 2; i++)

283 
checksum
 +
g_ãmp_mem
[
i
];

286 
checksum
 += 0xA5;

288 
ªtvÆ
 = ((
UINT16
)(~
checksum
 + 1)) << 8;

289 
ªtvÆ
 |= 0xA5;

290  
ªtvÆ
;

291 
	}
}

293 
	$£t_°rög_d©a
(
UINT16
 *
id_buf„r
, * 
§c_d©a
, 
UINT32
 
whﬁe_w‹d_size
)

295 
BOOL32
 
fûl_•a˚
 = 
FALSE
;

296 
UINT32
 
i
=0;

298 
i
=0; i<
whﬁe_w‹d_size
; i++)

300 if(
FALSE
 =
fûl_•a˚
)

302 if(
NULL
 =
§c_d©a
[
i
*2])

304 
fûl_•a˚
 = 
TRUE
;

305 
id_buf„r
[
i
] = 0x2020;

307 if(
NULL
 =
§c_d©a
[
i
*2+1])

309 
fûl_•a˚
 = 
TRUE
;

310 
id_buf„r
[
i
] = 0x20 | (
§c_d©a
[i*2]<<8);

314 
id_buf„r
[
i
] = 
§c_d©a
[i*2+1] | (src_data[i*2]<<8);

319 
id_buf„r
[
i
]= 0x2020;

322 
	}
}

324 
	$©a_idítify_devi˚
(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
)

326 
UINT16
* c⁄° 
addr
 = 
ht_idítify_d©a
;

327 
UINT32
 
ˇ∑côy
;

329 
	`£t_°rög_d©a
(&
addr
[10], "0123456789", 10);

330 
	`£t_°rög_d©a
(&
addr
[23], "0001", 4);

331 
	`£t_°rög_d©a
(&
addr
[27], "OpenSSD Jasmine ", 20);

333 
addr
[54] = 
g_ßè_c⁄ãxt
.
chs_cur_cylödîs
;

334 
addr
[55] = 
g_ßè_c⁄ãxt
.
chs_cur_hóds
;

335 
addr
[56] = 
g_ßè_c⁄ãxt
.
chs_cur_£˘‹s
;

337 
ˇ∑côy
 = 
g_ßè_c⁄ãxt
.
chs_cur_cylödîs
 * g_ßè_c⁄ãxt.
chs_cur_hóds
 * g_ßè_c⁄ãxt.
chs_cur_£˘‹s
;

338 
addr
[57] = 
ˇ∑côy
 & 0xFFFF;

339 
addr
[58] = 
ˇ∑côy
 >> 16;

341 #i‡
DRAM_SIZE
 == 16268800

342 
addr
[21] = 0x8000;

345 #i‡
NUM_LSECTORS
 >= 0x0FFFFFFF

347 
addr
[60] = 0xFFFF;

348 
addr
[61] = 0x0FFF;

352 
addr
[60] = (
UINT16
Ë(
NUM_LSECTORS
 & 0xFFFF);

353 
addr
[61] = (
UINT16
Ë(
NUM_LSECTORS
 >> 16);

357 #i‡
OPTION_SLOW_SATA


358 
addr
[76] &(
UINT16
)(~
BIT2
);

361 #i‡
OPTION_SUPPORT_NCQ


362 
addr
[76] |(
UINT16
Ë
BIT8
;

365 if(
g_ßè_c⁄ãxt
.
dma_£tup_auto_a˘iv©e
)

367 
addr
[79] |(
UINT16
)(
BIT2
);

370 
addr
[100] = (
UINT16
Ë(
NUM_LSECTORS
 & 0xFFFF);

371 
addr
[101] = (
UINT16
Ë(
NUM_LSECTORS
 >> 16);

372 
addr
[106] = 0x4000;

373 
addr
[217] = 0x0001;

375 
addr
[255] = 
	`gë_öãgrôy_w‹d
();

377 
	`mem_c›y
(
HIL_BUF_ADDR
, 
addr
, 
BYTES_PER_SECTOR
);

379 
	`pio_£˘‹_å™s„r
(
HIL_BUF_ADDR
, 
PIO_D2H
);

380 
	}
}

	@sata/sata_isr.c

20 
	~"jasmöe.h
"

23 
__ölöe
 
	$£nd_¥imôive_R_XX
(
UINT32
 
ª•⁄£
)

25 
UINT32
 
timeout_vÆue
;

26 
UINT32
 
g_R_OK_ªåy_cou¡
 = 2;

28 i‡((
	`GETREG
(
SATA_PHY_STATUS
) >> 4) & 0x01)

30 
timeout_vÆue
 = ((((
UINT32
)
CLOCK_SPEED
 / 2 / 1000000Ë* 300Ë/ 
	`PRESCALE_TO_DIV
(
TIMER_PRESCALE_0
));

34 
timeout_vÆue
 = ((((
UINT32
)
CLOCK_SPEED
 / 2 / 1000000Ë* 10Ë/ 
	`PRESCALE_TO_DIV
(
TIMER_PRESCALE_0
));

37 
	`SET_TIMER_LOAD
(
TIMER_CH4
, 
timeout_vÆue
);

38 
	`SET_TIMER_CONTROL
(
TIMER_CH4
, 
TM_ENABLE
 | 
TM_SHOT
 | 
TM_BIT_32
 | 
TIMER_PRESCALE_0
);

40 
SEND_RETRY
:

42 
	`SETREG
(
SATA_CTRL_2
, 
ª•⁄£
);

44 (
	`GETREG
(
SATA_INT_STAT
Ë& 
OPERATION_OK
) == 0)

46 i‡(
	`GET_TIMER_VALUE
(
TIMER_CH4
) == 0)

48 
	`SETREG
(
SATA_CTRL_1
, 
BIT31
 | 
BIT25
 | 
BIT24
 | 
BIT29
);

49 
	`SETREG
(
SATA_CTRL_1
, 
BIT31
 | 
BIT25
 | 
BIT24
);

51 
	`SETREG
(
SATA_RESET_FIFO_1
, 1);

52 
	`GETREG
(
SATA_FIFO_1_STATUS
) & 0x007F0000);

54 if(--
g_R_OK_ªåy_cou¡
 == 0) ;

56 
	`SET_TIMER_LOAD
(
TIMER_CH4
, 
timeout_vÆue
);

57 
SEND_RETRY
;

61 
	`SET_TIMER_CONTROL
(
TIMER_CH4
, 0);

62 
	}
}

64 
__ölöe
 
	$h™dÀ_§°
()

66 
	`£nd_¥imôive_R_XX
(
SEND_R_OK
);

68 
	`SETREG
(
SATA_INT_STAT
, 
REG_FIS_RECV
 | 
OPERATION_OK
);

70 i‡(
	`GETREG
(
SATA_FIS_H2D_3
Ë& 
BIT26
)

72 
g_ßè_c⁄ãxt
.
§°
 = 
TRUE
;

74 i‡(
g_ßè_c⁄ãxt
.
§°
)

76 
g_ßè_c⁄ãxt
.
§°
 = 
FALSE
;

78 
	`SETREG
(
SATA_NCQ_CTRL
, 
AUTOINC
 | 
FLUSH_NCQ
);

79 
	`SETREG
(
SATA_NCQ_CTRL
, 
AUTOINC
);

81 
	`SETREG
(
SATA_RESET_FIFO_1
, 1);

82 
	`GETREG
(
SATA_FIFO_1_STATUS
) & 0x007F0000);

84 
	`SETREG
(
SATA_CTRL_1
, 
BIT31
 | 
BIT25
 | 
BIT24
 | 
BIT29
);

85 
	`SETREG
(
SATA_CTRL_1
, 
BIT31
 | 
BIT25
 | 
BIT24
);

87 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
code
 = 
ATA_SRST
;

88 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
°©us
 = 
SLOW_CMD_STATUS_PENDING
;

89 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
lba
 = 
FALSE
;

93 
	`SETREG
(
SATA_INT_STAT
, 
REG_FIS_RECV
);

95 
	}
}

97 
__ölöe
 
	$h™dÀ_gŸ_cfis
()

99 
UINT32
 
lba
, 
£˘‹_cou¡
, 
cmd_code
, 
cmd_ty≥
, 
fis_d1
, 
fis_d3
;

101 
cmd_code
 = (
	`GETREG
(
SATA_FIS_H2D_0
) & 0x00FF0000) >> 16;

102 
cmd_ty≥
 = 
©a_cmd_˛ass_èbÀ
[
cmd_code
];

103 
fis_d1
 = 
	`GETREG
(
SATA_FIS_H2D_1
);

104 
fis_d3
 = 
	`GETREG
(
SATA_FIS_H2D_3
);

106 i‡(
cmd_ty≥
 & 
ATR_LBA_NOR
)

108 i‡((
fis_d1
 & 
BIT30
) == 0)

110 
UINT32
 
cylödî
 = (
fis_d1
 & 0x00FFFF00) >> 8;

111 
UINT32
 
hód
 = (
fis_d1
 & 0x0F000000) >> 24;

112 
UINT32
 
£˘‹
 = 
fis_d1
 & 0x000000FF;

114 
lba
 = (
cylödî
 * 
g_ßè_c⁄ãxt
.
chs_cur_hóds
 + 
hód
Ë* g_ßè_c⁄ãxt.
chs_cur_£˘‹s
 + 
£˘‹
 - 1;

118 
lba
 = 
fis_d1
 & 0x0FFFFFFF;

121 
£˘‹_cou¡
 = 
fis_d3
 & 0x000000FF;

123 i‡(
£˘‹_cou¡
 =0 && (
cmd_ty≥
 & 
ATR_NO_SECT
) == 0)

125 
£˘‹_cou¡
 = 0x100;

128 i‡(
cmd_ty≥
 & 
ATR_LBA_EXT
)

130 
lba
 = (
fis_d1
 & 0x00FFFFFFË| (
	`GETREG
(
SATA_FIS_H2D_2
) << 24);

131 
£˘‹_cou¡
 = 
fis_d3
 & 0x0000FFFF;

133 i‡(
£˘‹_cou¡
 =0 && (
cmd_ty≥
 & 
ATR_NO_SECT
) == 0)

135 
£˘‹_cou¡
 = 0x10000;

140 
lba
 = 0;

141 
£˘‹_cou¡
 = 0;

144 i‡(
lba
 + 
£˘‹_cou¡
 > 
MAX_LBA
 + 1 && (
cmd_ty≥
 & 
ATR_NO_SECT
) == 0)

146 
	`£nd_°©us_to_ho°
(
B_IDNF
);

148 i‡(
cmd_ty≥
 & (
CCL_FTL_H2D
 | 
CCL_FTL_D2H
))

150 
UINT32
 
a˘i⁄_Êags
;

152 
	`SETREG
(
SATA_LBA
, 
lba
);

153 
	`SETREG
(
SATA_SECT_CNT
, 
£˘‹_cou¡
);

155 i‡(
cmd_ty≥
 & 
CCL_FTL_H2D
)

157 
	`SETREG
(
SATA_INSERT_EQ_W
, 1);

159 i‡(
cmd_code
 =
ATA_WRITE_DMA
 || cmd_codê=
ATA_WRITE_DMA_EXT
)

161 
a˘i⁄_Êags
 = 
DMA_WRITE
 | 
COMPLETE
;

165 
UINT32
 
fis_ty≥
 = 
FISTYPE_PIO_SETUP
;

166 
UINT32
 
Êags
 = 
B_IRQ
;

167 
UINT32
 
°©us
 = 
B_DRDY
 | 
BIT4
 | 
B_DRQ
;

168 
UINT32
 
e_°©us
 = 
B_DRDY
 | 
BIT4
;

170 
	`SETREG
(
SATA_FIS_D2H_0
, 
fis_ty≥
 | (
Êags
 << 8Ë| (
°©us
 << 16));

171 
	`SETREG
(
SATA_FIS_D2H_1
, 
	`GETREG
(
SATA_FIS_H2D_1
));

172 
	`SETREG
(
SATA_FIS_D2H_2
, 
	`GETREG
(
SATA_FIS_H2D_2
) & 0x00FFFFFF);

173 
	`SETREG
(
SATA_FIS_D2H_3
, (
e_°©us
 << 24Ë| (
	`GETREG
(
SATA_FIS_H2D_3
) & 0x0000FFFF));

174 
	`SETREG
(
SATA_FIS_D2H_4
, 
BYTES_PER_SECTOR
);

176 
	`SETREG
(
SATA_FIS_D2H_LEN
, 5);

178 
a˘i⁄_Êags
 = 
PIO_WRITE
 | 
COMPLETE
;

183 
	`SETREG
(
SATA_INSERT_EQ_R
, 1);

185 i‡(
cmd_code
 =
ATA_READ_DMA
 || cmd_codê=
ATA_READ_DMA_EXT
)

187 
a˘i⁄_Êags
 = 
DMA_READ
 | 
COMPLETE
;

191 
UINT32
 
fis_ty≥
 = 
FISTYPE_PIO_SETUP
;

192 
UINT32
 
Êags
 = 
B_IRQ
;

193 
UINT32
 
°©us
 = 
B_DRDY
 | 
BIT4
 | 
B_DRQ
;

194 
UINT32
 
e_°©us
 = 
B_DRDY
 | 
BIT4
;

196 
	`SETREG
(
SATA_FIS_D2H_0
, 
fis_ty≥
 | (
Êags
 << 8Ë| (
°©us
 << 16));

197 
	`SETREG
(
SATA_FIS_D2H_1
, 
	`GETREG
(
SATA_FIS_H2D_1
));

198 
	`SETREG
(
SATA_FIS_D2H_2
, 
	`GETREG
(
SATA_FIS_H2D_2
) & 0x00FFFFFF);

199 
	`SETREG
(
SATA_FIS_D2H_3
, (
e_°©us
 << 24Ë| (
	`GETREG
(
SATA_FIS_H2D_3
) & 0x0000FFFF));

200 
	`SETREG
(
SATA_FIS_D2H_4
, 
BYTES_PER_SECTOR
);

202 
	`SETREG
(
SATA_FIS_D2H_LEN
, 5);

204 
a˘i⁄_Êags
 = 
PIO_READ
 | 
COMPLETE
 | 
CLR_STAT_PIO_SETUP
;

208 
	`SETREG
(
SATA_XFER_BYTES
, 
£˘‹_cou¡
 * 
BYTES_PER_SECTOR
);

209 
	`SETREG
(
SATA_SECT_OFFSET
, 
lba
);

211 i‡(
	`GETREG
(
SATA_EQ_STATUS
) >> 31)

213 
g_ßè_c⁄ãxt
.
eq_fuŒ
 = 
TRUE
;

214 
g_ßè_a˘i⁄_Êags
 = 
a˘i⁄_Êags
;

218 
	`SETREG
(
SATA_CTRL_2
, 
a˘i⁄_Êags
);

223 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
°©us
 = 
SLOW_CMD_STATUS_PENDING
;

224 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
code
 = 
cmd_code
;

225 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
lba
 =Üba;

226 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
£˘‹_cou¡
 = sector_count;

228 
	}
}

230 #ifde‡
__GNUC__


231 
	$fiq_h™dÀr
(Ë
	`__©åibuã__
 ((
	`öãºu±
 ("FIQ")));

232 
	$fiq_h™dÀr
()

234 
__úq
 
	$fiq_h™dÀr
()

237 
UINT32
 
unmasked_öt_°©
 = 
	`GETREG
(
SATA_INT_STAT
);

238 
UINT32
 
masked_öt_°©
 = 
unmasked_öt_°©
 & 
	`GETREG
(
SATA_INT_ENABLE
);

239 
UINT32
 
öå_¥o˚s£d
 = 0;

241 i‡(
masked_öt_°©
 & 
CMD_RECV
)

243 
	`h™dÀ_gŸ_cfis
();

244 
öå_¥o˚s£d
 = 
CMD_RECV
;

246 i‡(
masked_öt_°©
 & 
OPERATION_ERR
)

248 
	`Àd_blök
();

250 i‡(
masked_öt_°©
 & 
REG_FIS_RECV
)

252 i‡((
	`GETREG
(
SATA_FIS_H2D_0
Ë& 0x000000FFË=
FISTYPE_REGISTER_H2D
)

254 
	`h™dÀ_§°
();

255 
öå_¥o˚s£d
 = 0;

259 i‡(
	`GETREG
(
SATA_ERROR
Ë& 
BIT25
)

261 
	`£nd_¥imôive_R_XX
(
SEND_R_ERR
);

262 
	`SETREG
(
SATA_ERROR
, 0xFFFFFFFF);

266 
	`£nd_¥imôive_R_XX
(
SEND_R_OK
);

269 
öå_¥o˚s£d
 = 
REG_FIS_RECV
;

272 i‡(
masked_öt_°©
 & 
PHY_ONLINE
)

274 
öå_¥o˚s£d
 = 0xFFFFFFFF;

276 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
code
 = 
ATA_SRST
;

277 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
°©us
 = 
SLOW_CMD_STATUS_PENDING
;

278 
g_ßè_c⁄ãxt
.
¶ow_cmd
.
lba
 = 
FALSE
;

280 
	`SETREG
(
SATA_INT_ENABLE
, 
PHY_ONLINE
 | 
CMD_RECV
 | 
REG_FIS_RECV
 | 
NCQ_CMD_RECV
);

284 
öå_¥o˚s£d
 = 
masked_öt_°©
;

287 
	`SETREG
(
SATA_INT_STAT
, 
öå_¥o˚s£d
);

288 
	`SETREG
(
APB_INT_STS
, 
INTR_SATA
);

289 
	}
}

	@sata/sata_main.c

20 
	~"jasmöe.h
"

22 
ßè_c⁄ãxt_t
 
	gg_ßè_c⁄ãxt
;

23 
ßè_ncq_t
 
	gg_ßè_ncq
;

24 vﬁ©ûê
UINT32
 
	gg_ßè_a˘i⁄_Êags
;

26 
	#HW_EQ_SIZE
 128

	)

27 
	#HW_EQ_MARGIN
 4

	)

29 
UINT32
 
	$evítq_gë_cou¡
()

31  (
	`GETREG
(
SATA_EQ_STATUS
) >> 16) & 0xFF;

32 
	}
}

34 
	$evítq_gë
(
CMD_T
* 
cmd
)

36 
	`dißbÀ_fiq
();

38 
	`SETREG
(
SATA_EQ_CTRL
, 1);

40 (
	`GETREG
(
SATA_EQ_DATA_2
) & 8) != 0);

42 
UINT32
 
EQRódD©a0
 = 
	`GETREG
(
SATA_EQ_DATA_0
);

43 
UINT32
 
EQRódD©a1
 = 
	`GETREG
(
SATA_EQ_DATA_1
);

45 
cmd
->
lba
 = 
EQRódD©a1
 & 0x3FFFFFFF;

46 
cmd
->
£˘‹_cou¡
 = 
EQRódD©a0
 >> 16;

47 
cmd
->
cmd_ty≥
 = 
EQRódD©a1
 >> 31;

49 if(
cmd
->
£˘‹_cou¡
 == 0)

50 
cmd
->
£˘‹_cou¡
 = 0x10000;

52 i‡(
g_ßè_c⁄ãxt
.
eq_fuŒ
)

54 
g_ßè_c⁄ãxt
.
eq_fuŒ
 = 
FALSE
;

56 i‡((
	`GETREG
(
SATA_PHY_STATUS
) & 0xF0F) == 0x103)

58 
	`SETREG
(
SATA_CTRL_2
, 
g_ßè_a˘i⁄_Êags
);

62 
	`íabÀ_fiq
();

63 
	}
}

65 
__ölöe
 
ATA_FUNCTION_T
 
	$£¨ch_©a_fun˘i⁄
(
UINT32
 
comm™d_code
)

67 
UINT32
 
ödex
;

68 
ATA_FUNCTION_T
 
©a_fun˘i⁄
;

70 
ödex
 = 
	`mem_£¨ch_equ
(
©a_comm™d_code_èbÀ
, (
UINT8
), 
CMD_TABLE_SIZE
, 
MU_CMD_SEARCH_EQU_SRAM
, 
comm™d_code
);

72 
©a_fun˘i⁄
 = (
ödex
 =
CMD_TABLE_SIZE
Ë? 
©a_nŸ_suµ‹ãd
 : 
©a_fun˘i⁄_èbÀ
[index];

74 i‡(
©a_fun˘i⁄
 =(
ATA_FUNCTION_T
Ë
INVALID32
)

75 
©a_fun˘i⁄
 = 
©a_nŸ_suµ‹ãd
;

77  
©a_fun˘i⁄
;

78 
	}
}

80 
	$Maö
()

84 i‡(
	`evítq_gë_cou¡
())

86 
CMD_T
 
cmd
;

88 
	`evítq_gë
(&
cmd
);

90 i‡(
cmd
.
cmd_ty≥
 =
READ
)

92 
	`·l_ªad
(
cmd
.
lba
, cmd.
£˘‹_cou¡
);

96 
	`·l_wrôe
(
cmd
.
lba
, cmd.
£˘‹_cou¡
);

99 i‡(
g_ßè_c⁄ãxt
.
¶ow_cmd
.
°©us
 =
SLOW_CMD_STATUS_PENDING
)

101 (*
©a_fun˘i⁄
)(
UINT32
 
lba
, UINT32 
£˘‹_cou¡
);

103 
¶ow_cmd_t
* 
¶ow_cmd
 = &
g_ßè_c⁄ãxt
.slow_cmd;

104 
¶ow_cmd
->
°©us
 = 
SLOW_CMD_STATUS_BUSY
;

106 
©a_fun˘i⁄
 = 
	`£¨ch_©a_fun˘i⁄
(
¶ow_cmd
->
code
);

107 
	`©a_fun˘i⁄
(
¶ow_cmd
->
lba
, slow_cmd->
£˘‹_cou¡
);

109 
¶ow_cmd
->
°©us
 = 
SLOW_CMD_STATUS_NONE
;

116 
	}
}

118 
	$ßè_ª£t
()

120 
	`dißbÀ_öãºu±
();

122 
	`mem_£t_§am
(&
g_ßè_c⁄ãxt
, 0, (g_sata_context));

124 
g_ßè_c⁄ãxt
.
wrôe_ˇche_íabÀd
 = 
TRUE
;

125 
g_ßè_c⁄ãxt
.
ªad_look_ahód_íabÀd
 = 
TRUE
;

127 
	`SETREG
(
PMU_Re£tC⁄
, 
RESET_SATA
 | 
RESET_SATADWCLK
 | 
RESET_SATAHCLK
 | 
RESET_PMCLK
 | 
RESET_PHYDOMAIN
);

128 
	`dñay
(100);

130 
	`SETREG
(
PHY_DEBUG
, 0x400A040E);

131 (
	`GETREG
(
PHY_DEBUG
Ë& 
BIT30
) == 1);

133 
	`SETREG
(
SATA_BUF_PAGE_SIZE
, 
BYTES_PER_PAGE
);

134 
	`SETREG
(
SATA_WBUF_BASE
, (
WR_BUF_ADDR
 - 
DRAM_BASE
));

135 
	`SETREG
(
SATA_RBUF_BASE
, (
RD_BUF_ADDR
 - 
DRAM_BASE
));

136 
	`SETREG
(
SATA_WBUF_SIZE
, 
NUM_WR_BUFFERS
);

137 
	`SETREG
(
SATA_RBUF_SIZE
, 
NUM_RD_BUFFERS
);

138 
	`SETREG
(
SATA_WBUF_MARGIN
, 16);

139 
	`SETREG
(
SATA_RESET_WBUF_PTR
, 
BIT0
);

140 
	`SETREG
(
SATA_RESET_RBUF_PTR
, 
BIT0
);

142 
	`SETREG
(
SATA_NCQ_BASE
, 
g_ßè_ncq
.
queue
);

144 
	`SETREG
(
SATA_EQ_CFG_1
, 
BIT0
 | 
BIT14
 | 
BIT9
 | 
BIT16
 | ((
NUM_BANKS
 / 2) << 24));

145 
	`SETREG
(
SATA_EQ_CFG_2
, (
EQ_MARGIN
 & 0xF) << 16);

147 
	`SETREG
(
SATA_CFG_10
, 
BIT0
);

149 
	`SETREG
(
SATA_NCQ_CTRL
, 
AUTOINC
 | 
FLUSH_NCQ
);

150 
	`SETREG
(
SATA_NCQ_CTRL
, 
AUTOINC
);

151 
	`SETREG
(
SATA_CFG_5
, 
BIT12
 | 
BIT11
*
BSO_RX_SSC
 | (
BIT9
|
BIT10
)*
BSO_TX_SSC
 | 
BIT4
*0x05);

152 
	`SETREG
(
SATA_CFG_8
, 0);

153 
	`SETREG
(
SATA_CFG_9
, 
BIT20
);

155 
	`SETREG
(
SATA_MAX_LBA
, 
MAX_LBA
);

157 
	`SETREG
(
APB_INT_STS
, 
INTR_SATA
);

159 #i‡
OPTION_SLOW_SATA


160 
	`SETREG
(
SATA_PHY_CTRL
, 0x00000310);

162 
	`SETREG
(
SATA_PHY_CTRL
, 0x00000300);

165 
	`SETREG
(
SATA_ERROR
, 0xFFFFFFFF);

166 
	`SETREG
(
SATA_INT_STAT
, 0xFFFFFFFF);

168 
	`SETREG
(
SATA_CTRL_1
, 
BIT31
);

170 (
	`GETREG
(
SATA_INT_STAT
Ë& 
PHY_ONLINE
) == 0);

172 
	`SETREG
(
SATA_CTRL_1
, 
BIT31
 | 
BIT25
 | 
BIT24
);

174 
	`SETREG
(
SATA_INT_ENABLE
, 
PHY_ONLINE
);

176 
	`íabÀ_öãºu±
();

177 
	}
}

179 
	$dñay
(
UINT32
 c⁄° 
cou¡
)

181 vﬁ©ûê
UINT32
 
ãmp
;

182 
UINT32
 
i
;

184 
i
 = 0; i < 
cou¡
; i++)

186 
ãmp
 = 
i
;

188 
	}
}

	@sata/sata_table.c

20 
	~"jasmöe.h
"

21 
	~"ßè.h
"

22 
	~"ßè_cmd.h
"

25 c⁄° 
UINT8
 
	g©a_cmd_˛ass_èbÀ
[256] = {

26 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

27 
CCL_UNDEFINED
,

28 
CCL_UNDEFINED
,

29 
CCL_UNDEFINED
,

30 
CCL_UNDEFINED
,

31 
CCL_UNDEFINED
,

32 
ATR_LBA_EXT
 | 
CCL_OTHER
,

33 
CCL_UNDEFINED
,

34 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

35 
CCL_UNDEFINED
,

36 
CCL_UNDEFINED
,

37 
CCL_UNDEFINED
,

38 
CCL_UNDEFINED
,

39 
CCL_UNDEFINED
,

40 
CCL_UNDEFINED
,

41 
CCL_UNDEFINED
,

42 
CCL_OTHER
,

43 
CCL_UNDEFINED
,

44 
CCL_UNDEFINED
,

45 
CCL_UNDEFINED
,

46 
CCL_UNDEFINED
,

47 
CCL_UNDEFINED
,

48 
CCL_UNDEFINED
,

49 
CCL_UNDEFINED
,

50 
CCL_UNDEFINED
,

51 
CCL_UNDEFINED
,

52 
CCL_UNDEFINED
,

53 
CCL_UNDEFINED
,

54 
CCL_UNDEFINED
,

55 
CCL_UNDEFINED
,

56 
CCL_UNDEFINED
,

57 
CCL_UNDEFINED
,

58 
ATR_LBA_NOR
 | 
CCL_FTL_D2H
,

59 
CCL_UNDEFINED
,

60 
CCL_UNDEFINED
,

61 
CCL_UNDEFINED
,

62 
ATR_LBA_EXT
 | 
CCL_FTL_D2H
,

63 
ATR_LBA_EXT
 | 
CCL_FTL_D2H
,

64 
CCL_UNDEFINED
,

65 
ATR_LOCK_FREE
| 
CCL_OTHER
,

66 
CCL_UNDEFINED
,

67 
ATR_LBA_EXT
 | 
CCL_FTL_D2H
,

68 
CCL_UNDEFINED
,

69 
CCL_UNDEFINED
,

70 
CCL_UNDEFINED
,

71 
CCL_UNDEFINED
,

72 
CCL_UNDEFINED
,

73 
ATR_LBA_EXT
 | 
CCL_OTHER
,

74 
ATR_LBA_NOR
 | 
CCL_FTL_H2D
,

75 
CCL_UNDEFINED
,

76 
CCL_UNDEFINED
,

77 
CCL_UNDEFINED
,

78 
ATR_LBA_EXT
 | 
CCL_FTL_H2D
,

79 
ATR_LBA_EXT
 | 
CCL_FTL_H2D
,

80 
CCL_UNDEFINED
,

81 
ATR_NO_SECT
|
ATR_LBA_EXT
 | 
CCL_OTHER
,

82 
CCL_UNDEFINED
,

83 
ATR_LBA_EXT
 | 
CCL_FTL_H2D
,

84 
CCL_UNDEFINED
,

85 
CCL_UNDEFINED
,

86 
CCL_UNDEFINED
,

87 
CCL_UNDEFINED
,

88 
CCL_UNDEFINED
,

89 
ATR_LBA_EXT
 | 
CCL_OTHER
,

90 
ATR_LBA_NOR
 | 
CCL_OTHER
,

91 
CCL_UNDEFINED
,

92 
ATR_LBA_EXT
 | 
CCL_OTHER
,

93 
CCL_UNDEFINED
,

94 
CCL_UNDEFINED
,

95 
CCL_UNDEFINED
,

96 
CCL_UNDEFINED
,

97 
CCL_UNDEFINED
,

98 
CCL_UNDEFINED
,

99 
CCL_UNDEFINED
,

100 
CCL_UNDEFINED
,

101 
CCL_UNDEFINED
,

102 
CCL_UNDEFINED
,

103 
CCL_UNDEFINED
,

104 
CCL_UNDEFINED
,

105 
CCL_UNDEFINED
,

106 
CCL_UNDEFINED
,

107 
CCL_UNDEFINED
,

108 
CCL_UNDEFINED
,

109 
CCL_UNDEFINED
,

110 
CCL_UNDEFINED
,

111 
CCL_UNDEFINED
,

112 
CCL_UNDEFINED
,

113 
CCL_UNDEFINED
,

114 
CCL_UNDEFINED
,

115 
CCL_UNDEFINED
,

116 
CCL_UNDEFINED
,

117 
CCL_UNDEFINED
,

118 
CCL_UNDEFINED
,

119 
CCL_UNDEFINED
,

120 
CCL_UNDEFINED
,

121 
CCL_UNDEFINED
,

122 
CCL_FTL_D2H
,

123 
CCL_FTL_H2D
,

124 
CCL_UNDEFINED
,

125 
CCL_UNDEFINED
,

126 
CCL_UNDEFINED
,

127 
CCL_UNDEFINED
,

128 
CCL_UNDEFINED
,

129 
CCL_UNDEFINED
,

130 
CCL_UNDEFINED
,

131 
CCL_UNDEFINED
,

132 
CCL_UNDEFINED
,

133 
CCL_UNDEFINED
,

134 
CCL_UNDEFINED
,

135 
CCL_UNDEFINED
,

136 
CCL_UNDEFINED
,

137 
CCL_UNDEFINED
,

138 
CCL_OTHER
,

139 
CCL_UNDEFINED
,

140 
CCL_UNDEFINED
,

141 
CCL_UNDEFINED
,

142 
CCL_UNDEFINED
,

143 
CCL_UNDEFINED
,

144 
CCL_UNDEFINED
,

145 
CCL_UNDEFINED
,

146 
CCL_UNDEFINED
,

147 
CCL_UNDEFINED
,

148 
CCL_UNDEFINED
,

149 
CCL_UNDEFINED
,

150 
CCL_UNDEFINED
,

151 
CCL_UNDEFINED
,

152 
CCL_UNDEFINED
,

153 
CCL_UNDEFINED
,

154 
CCL_UNDEFINED
,

155 
CCL_UNDEFINED
,

156 
CCL_UNDEFINED
,

157 
CCL_UNDEFINED
,

158 
CCL_UNDEFINED
,

159 
CCL_UNDEFINED
,

160 
CCL_UNDEFINED
,

161 
CCL_UNDEFINED
,

162 
CCL_UNDEFINED
,

163 
CCL_UNDEFINED
,

164 
CCL_UNDEFINED
,

165 
CCL_UNDEFINED
,

166 
CCL_UNDEFINED
,

167 
CCL_UNDEFINED
,

168 
CCL_UNDEFINED
,

169 
CCL_UNDEFINED
,

170 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

171 
CCL_OTHER
,

172 
ATR_LBA_NOR
 | 
CCL_OTHER
,

173 
CCL_UNDEFINED
,

174 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

175 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

176 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

177 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

178 
CCL_UNDEFINED
,

179 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

180 
CCL_UNDEFINED
,

181 
CCL_UNDEFINED
,

182 
CCL_UNDEFINED
,

183 
CCL_UNDEFINED
,

184 
CCL_UNDEFINED
,

185 
CCL_UNDEFINED
,

186 
CCL_UNDEFINED
,

187 
CCL_UNDEFINED
,

188 
CCL_UNDEFINED
,

189 
CCL_UNDEFINED
,

190 
CCL_UNDEFINED
,

191 
CCL_UNDEFINED
,

192 
CCL_UNDEFINED
,

193 
CCL_UNDEFINED
,

194 
CCL_UNDEFINED
,

195 
CCL_UNDEFINED
,

196 
CCL_UNDEFINED
,

197 
CCL_UNDEFINED
,

198 
CCL_UNDEFINED
,

199 
CCL_UNDEFINED
,

200 
CCL_UNDEFINED
,

201 
CCL_UNDEFINED
,

202 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

203 
CCL_OTHER
,

204 
CCL_UNDEFINED
,

205 
CCL_UNDEFINED
,

206 
CCL_UNDEFINED
,

207 
CCL_UNDEFINED
,

208 
CCL_UNDEFINED
,

209 
CCL_UNDEFINED
,

210 
CCL_UNDEFINED
,

211 
CCL_UNDEFINED
,

212 
CCL_UNDEFINED
,

213 
CCL_UNDEFINED
,

214 
CCL_UNDEFINED
,

215 
CCL_UNDEFINED
,

216 
CCL_UNDEFINED
,

217 
CCL_UNDEFINED
,

218 
CCL_UNDEFINED
,

219 
CCL_UNDEFINED
,

220 
CCL_UNDEFINED
,

221 
CCL_UNDEFINED
,

222 
ATR_LBA_NOR
 | 
CCL_FTL_D2H
,

223 
ATR_LBA_NOR
 | 
CCL_FTL_H2D
,

224 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

225 
CCL_UNDEFINED
,

226 
ATR_LBA_NOR
 | 
CCL_FTL_D2H
,

227 
CCL_UNDEFINED
,

228 
ATR_LBA_NOR
 | 
CCL_FTL_H2D
,

229 
CCL_UNDEFINED
,

230 
CCL_UNDEFINED
,

231 
CCL_UNDEFINED
,

232 
CCL_UNDEFINED
,

233 
CCL_UNDEFINED
,

234 
CCL_UNDEFINED
,

235 
CCL_UNDEFINED
,

236 
CCL_UNDEFINED
,

237 
CCL_UNDEFINED
,

238 
CCL_UNDEFINED
,

239 
CCL_UNDEFINED
,

240 
CCL_UNDEFINED
,

241 
CCL_UNDEFINED
,

242 
CCL_UNDEFINED
,

243 
CCL_UNDEFINED
,

244 
CCL_UNDEFINED
,

245 
CCL_UNDEFINED
,

246 
CCL_UNDEFINED
,

247 
CCL_UNDEFINED
,

248 
CCL_UNDEFINED
,

249 
CCL_UNDEFINED
,

250 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

251 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

252 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

253 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

254 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

255 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

256 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

257 
CCL_OTHER
,

258 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

259 
CCL_UNDEFINED
,

260 
CCL_OTHER
,

261 
CCL_UNDEFINED
,

262 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

263 
CCL_UNDEFINED
,

264 
CCL_UNDEFINED
,

265 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

266 
CCL_UNDEFINED
,

267 
CCL_OTHER
,

268 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

269 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

270 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

271 
CCL_OTHER
,

272 
CCL_OTHER
,

273 
CCL_UNDEFINED
,

274 
ATR_LOCK_FREE
 | 
CCL_OTHER
,

275 
ATR_NO_SECT
|
ATR_LBA_NOR
 | 
CCL_OTHER
,

276 
CCL_UNDEFINED
,

277 
CCL_UNDEFINED
,

278 
ATR_LBA_NOR
 | 
CCL_OTHER
,

279 
ATR_LBA_EXT
 | 
CCL_OTHER
,

280 
CCL_UNDEFINED
,

281 
ATR_NO_SECT
|
ATR_LOCK_FREE
 | 
CCL_OTHER


285 c⁄° 
UINT8
 
	g©a_comm™d_code_èbÀ
[] =

349 c⁄° 
ATA_FUNCTION_T
 
	g©a_fun˘i⁄_èbÀ
[] =

351 
©a_n›
,

352 (
ATA_FUNCTION_T
Ë
INVALID32
,

353 (
ATA_FUNCTION_T
Ë
INVALID32
,

354 
©a_ªˇlibøã
,

355 (
ATA_FUNCTION_T
Ë
INVALID32
,

356 (
ATA_FUNCTION_T
Ë
INVALID32
,

357 (
ATA_FUNCTION_T
Ë
INVALID32
,

358 (
ATA_FUNCTION_T
Ë
INVALID32
,

359 
©a_ªad_«tive_max_addªss
,

360 (
ATA_FUNCTION_T
Ë
INVALID32
,

361 (
ATA_FUNCTION_T
Ë
INVALID32
,

362 (
ATA_FUNCTION_T
Ë
INVALID32
,

363 (
ATA_FUNCTION_T
Ë
INVALID32
,

364 (
ATA_FUNCTION_T
Ë
INVALID32
,

365 (
ATA_FUNCTION_T
Ë
INVALID32
,

366 (
ATA_FUNCTION_T
Ë
INVALID32
,

367 
©a_ªad_vîify_£˘‹s
,

368 
©a_ªad_vîify_£˘‹s
,

369 
©a_£ek
,

370 
©a_execuã_drive_dügno°ics
,

371 
©a_öôülize_devi˚_∑ømëîs
,

372 (
ATA_FUNCTION_T
Ë
INVALID32
,

373 
©a_°™dby_immedüã
,

374 
©a_idÀ_immedüã
,

375 
©a_°™dby
,

376 
©a_idÀ
,

377 
©a_check_powî_mode
,

378 
©a_¶ìp
,

379 (
ATA_FUNCTION_T
Ë
INVALID32
,

380 (
ATA_FUNCTION_T
Ë
INVALID32
,

381 (
ATA_FUNCTION_T
Ë
INVALID32
,

382 (
ATA_FUNCTION_T
Ë
INVALID32
,

383 (
ATA_FUNCTION_T
Ë
INVALID32
,

384 (
ATA_FUNCTION_T
Ë
INVALID32
,

385 
©a_£t_mu…ùÀ_mode
,

386 (
ATA_FUNCTION_T
Ë
INVALID32
,

387 
©a_°™dby_immedüã
,

388 
©a_idÀ_immedüã
,

389 
©a_°™dby
,

390 
©a_idÀ
,

391 
©a_ªad_buf„r
,

392 
©a_check_powî_mode
,

393 
©a_¶ìp
,

394 
©a_Êush_ˇche
,

395 
©a_wrôe_buf„r
,

396 
©a_Êush_ˇche
,

397 
©a_idítify_devi˚
,

398 
©a_£t_„©uªs
,

399 (
ATA_FUNCTION_T
Ë
INVALID32
,

400 (
ATA_FUNCTION_T
Ë
INVALID32
,

401 (
ATA_FUNCTION_T
Ë
INVALID32
,

402 (
ATA_FUNCTION_T
Ë
INVALID32
,

403 (
ATA_FUNCTION_T
Ë
INVALID32
,

404 (
ATA_FUNCTION_T
Ë
INVALID32
,

405 
©a_ªad_«tive_max_addªss
,

406 (
ATA_FUNCTION_T
Ë
INVALID32
,

407 (
ATA_FUNCTION_T
Ë
INVALID32
,

408 (
ATA_FUNCTION_T
Ë
INVALID32
,

409 
©a_§°
,

	@target_spw/flash.c

20 
	~"jasmöe.h
"

22 c⁄° 
UINT8
 
	gc_b™k_m≠
[
NUM_BANKS
] = 
BANK_MAP
;

23 
UINT8
 
	gc_b™k_rm≠
[
NUM_BANKS_MAX
] = 
BANK_RMAP
;

25 
	$Êash_issue_cmd
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
sync
)

27 
UINT32
 
rb™k
 = 
	`REAL_BANK
(
b™k
);

29 
	`SETREG
(
FCP_BANK
, 
rb™k
);

32 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

38 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

40 i‡(
sync
 =
RETURN_ON_ISSUE
)

44 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

46 i‡(
sync
 =
RETURN_ON_ACCEPT
)

50 
	`_BSP_FSM
(
rb™k
Ë!
BANK_IDLE
);

51 
	}
}

53 
	$Êash_c›y
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
d°_row
, UINT32 c⁄° 
§c_row
)

55 
	`SETREG
(
FCP_CMD
, 
FC_COPYBACK
);

56 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

57 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

58 
	`SETREG
(
FCP_COL
, 0);

59 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
§c_row
);

60 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
§c_row
);

61 
	`SETREG
(
FCP_DST_COL
, 0);

62 
	`SETREG
(
FCP_DST_ROW_H
, 
d°_row
);

63 
	`SETREG
(
FCP_DST_ROW_L
, 
d°_row
);

64 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

65 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

66 
	}
}

68 
	$Êash_modify_c›y
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
d°_row
, UINT32 c⁄° 
§c_row
,

69 
UINT32
 c⁄° 
s˘_off£t
, UINT32 
dma_addr
, UINT32 c⁄° 
dma_cou¡
)

71 
dma_addr
 -
s˘_off£t
*
BYTES_PER_SECTOR
;

73 
	`SETREG
(
FCP_CMD
, 
FC_MODIFY_COPYBACK
);

74 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

75 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

76 
	`SETREG
(
FCP_DMA_ADDR
, 
dma_addr
);

77 
	`SETREG
(
FCP_DMA_CNT
, 
dma_cou¡
);

78 
	`SETREG
(
FCP_COL
, 0);

79 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
§c_row
);

80 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
§c_row
);

81 
	`SETREG
(
FCP_DST_COL
, 
s˘_off£t
);

82 
	`SETREG
(
FCP_DST_ROW_H
, 
d°_row
);

83 
	`SETREG
(
FCP_DST_ROW_L
, 
d°_row
);

84 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

85 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

86 
	}
}

88 
	$Êash_îa£
(
UINT32
 c⁄° 
b™k
, 
UINT16
 c⁄° 
vblk_off£t
)

90 
	`ASSERT
(
vblk_off£t
 > 0 && vblk_off£à< 
VBLKS_PER_BANK
);

92 
	`SETREG
(
FCP_CMD
, 
FC_ERASE
);

93 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

94 
	`SETREG
(
FCP_OPTION
, 
FO_P
);

95 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
);

96 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
);

97 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

98 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

99 
	}
}

101 
	$Êash_föish
()

104 
	`GETREG
(
MON_CHABANKIDLE
) != 0);

105 
	}
}

107 
	$Êash_˛ór_úq
()

109 
UINT32
 
i
;

111 
i
 = 0; i < 
NUM_BANKS_MAX
; i += 4)

113 
	`SETREG
(
BSP_INTR_BASE
 + 
i
, 0xFFFFFFFF);

116 
	`SETREG
(
APB_INT_STS
, 
INTR_FLASH
);

117 
	}
}

119 
	$Êash_ª£t
()

121 
UINT32
 
b™k
, 
rb™k
, 
ecc_size
, 
«nd_cfg_2
;

123 
	`SETREG
(
PMU_Re£tC⁄
, 
RESET_FLASH
);

127 #i‡
FLASH_TYPE
 =
H27UCG8UDMYR
 || FLASH_TYPE =
H27UBG8T2MYR
 || FLASH_TYPE =
H27UDG8VEMYR
 || \

128 
FLASH_TYPE
 =
H27UCG8VFATR
 || FLASH_TYPE =
H27UBG8U5ATR
 || FLASH_TYPE =
H27UBG8T2ATR
 || \

129 
FLASH_TYPE
 =
K9GAG08U0D
 || FLASH_TYPE =
K9LBG08U0D
 || FLASH_TYPE =
K9HCG08U1D
 || \

130 
FLASH_TYPE
 =
K9GBG08U0M
 || FLASH_TYPE =
K9PFG08U5M


131 
	`SETREG
(
FCONF_NANDCFG_1
, 0x18);

132 #ñi‡
NAND_SPEC_MF
 =
NAND_SPEC_SAMSUNG
 || NAND_SPEC_MF =
NAND_SPEC_HYNIX


134 #i‡
NAND_SPEC_DIE
 =
NAND_SPEC_DIE_2
 && 
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_2
 && 
OPTION_2_PLANE


136 #i‡
ROWS_PER_BANK
 == 262144

137 
	`SETREG
(
FCONF_NANDCFG_1
, 0x10 | (1 << 12));

139 #ñi‡
ROWS_PER_BANK
 == 524288

140 
	`SETREG
(
FCONF_NANDCFG_1
, 0x10 | (2 << 12));

142 #ñi‡
ROWS_PER_BANK
 == 1048576

143 
	`SETREG
(
FCONF_NANDCFG_1
, 0x10 | (3 << 12));

145 #ñi‡
ROWS_PER_BANK
 == 2097152

146 
	`SETREG
(
FCONF_NANDCFG_1
, 0x10 | (4 << 12));

148 #ñi‡
ROWS_PER_BANK
 == 4194304

149 
	`SETREG
(
FCONF_NANDCFG_1
, 0x10 | (5 << 12));

156 
	`SETREG
(
FCONF_NANDCFG_1
, 0x10);

159 #ñi‡
NAND_SPEC_MF
 =
NAND_SPEC_MICRON
 || NAND_SPEC_MF =
NAND_SPEC_INTEL


160 #i‡
NAND_SPEC_READ
 =
NAND_SPEC_READ_CYCLE_2


161 
	`SETREG
(
FCONF_NANDCFG_1
, 0x21);

163 
	`SETREG
(
FCONF_NANDCFG_1
, 0x11);

165 #ñi‡
NAND_SPEC_MF
 =
NAND_SPEC_TOSHIBA


166 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_2


167 
	`SETREG
(
FCONF_NANDCFG_1
, 0x12 | 0x08);

169 
	`SETREG
(
FCONF_NANDCFG_1
, 0x12);

175 #i‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 28

178 
ecc_size
 = 2;

180 #ñi‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 22

183 
ecc_size
 = 1;

185 #ñi‡
SPARE_PER_PHYPAGE
 / 
SECTORS_PER_PHYPAGE
 >= 16

188 
ecc_size
 = 0;

194 
«nd_cfg_2
 = 
	`BCH
(
NAND_SPEC_CELL
 =
NAND_SPEC_CELL_MLC
)

195 | 
	`PG_SIZE
(
SECTORS_PER_PHYPAGE
 >> 3)

196 | 
	`BLK_SIZE
(
PAGES_PER_VBLK
 >> 7)

197 | 
	`ECC_SIZE
(
ecc_size
)

198 | 
	`CHK_CMD
(
NAND_SPEC_MF
 =
NAND_SPEC_TOSHIBA
 && 
OPTION_2_PLANE
)

199 | 
	`CHK_CODE
(0xC0)

200 | 
	`CHK_MASK
(0xC1);

202 
	`SETREG
(
FCONF_NANDCFG_2
, 
«nd_cfg_2
);

203 
	`SETREG
(
FCONF_TIMECYCLE
, 
FLASH_PARAM_TIMECYCLE_SAFE
);

204 
	`SETREG
(
FCONF_BUFSIZE
, 
BYTES_PER_PAGE
);

205 
	`SETREG
(
FCONF_PAUSE
, 0);

206 
	`SETREG
(
FCONF_CPBDMABASE
, 
COPY_BUF_ADDR
);

208 
	`SETREG
(
WR_STAT
, 0xFFFFFFFF);

210 
	`SETREG
(
BM_STACK_RDSET
, 0);

211 
	`SETREG
(
BM_STACK_WRSET
, 0);

212 
	`SETREG
(
BM_STACK_RESET
, 0x03);

213 
	`SETREG
(
FTL_READ_PTR
, 
NUM_RD_BUFFERS
 + 1);

215 
	`SETREG
(
REMAPBANK0
, 
REMAP_BANK_INVALID
);

216 
	`SETREG
(
REMAPBANK1
, 
REMAP_BANK_INVALID
);

217 
	`SETREG
(
REMAPBANK2
, 
REMAP_BANK_INVALID
);

218 
	`SETREG
(
REMAPBANK3
, 
REMAP_BANK_INVALID
);

220 
rb™k
 = 0;Ñb™k < 
NUM_BANKS_MAX
;Ñbank++)

222 
	`SETREG
(
	`_FCP_ROW_H
(
rb™k
), 0xFFFFFFFF);

225 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

227 
	`SETREG
(
FCP_CMD
, 
FC_GENERIC
);

228 
	`SETREG
(
FCP_COL
, 0xFF);

229 
	`SETREG
(
FCP_OPTION
, 0);

230 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

233 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

235 
	`SETREG
(
FCP_CMD
, 
FC_WAIT
);

236 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

239 
	`Êash_föish
();

241 
	`Êash_˛ór_úq
();

243 #i‡
FLASH_TYPE
 =
MT29F64G08CFABA
 || FLASH_TYPE =
MT29F128G08CJABA
 || FLASH_TYPE =
JS29F32G08AAMDB


245 
	#OVER_DRIVE_2
 0

	)

246 
	#OVER_DRIVE_1
 1

	)

247 
	#DEFAULT_DRIVE
 2

	)

248 
	#UNDER_DRIVE
 3

	)

250 
	#L63B_OVER_DRIVE
 
OVER_DRIVE_2


	)

252 #i‡
L63B_OVER_DRIVE
 !
DEFAULT_DRIVE


254 #i‡
L63B_OVER_DRIVE
 =
OVER_DRIVE_2


255 
	`mem_£t_§am
(
g_ãmp_mem
, 0x00000000, (
UINT32
) * 2);

256 #ñi‡
L63B_OVER_DRIVE
 =
OVER_DRIVE_1


257 
	`mem_£t_§am
(
g_ãmp_mem
, 0x00000101, (
UINT32
));

258 
	`mem_£t_§am
(
g_ãmp_mem
 + (
UINT32
), 0x00000000, (UINT32));

259 #ñi‡
L63B_OVER_DRIVE
 =
DEFAULT_DRIVE


260 
	`mem_£t_§am
(
g_ãmp_mem
, 0x00000202, (
UINT32
));

261 
	`mem_£t_§am
(
g_ãmp_mem
 + (
UINT32
), 0x00000000, (UINT32));

263 
	`mem_£t_§am
(
g_ãmp_mem
, 0x00000303, (
UINT32
));

264 
	`mem_£t_§am
(
g_ãmp_mem
 + (
UINT32
), 0x00000000, (UINT32));

267 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

269 
	`SETREG
(
FCP_CMD
, 
FC_IN
);

270 
	`SETREG
(
FCP_DMA_ADDR
, 
g_ãmp_mem
);

271 
	`SETREG
(
FCP_DMA_CNT
, 8);

272 
	`SETREG
(
FCP_OPTION
, 
FO_B_W_DRDY
);

273 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

275 
	`SETREG
(
FCP_CMD
, 
FC_GENERIC
);

276 
	`SETREG
(
FCP_COL
, 0xEF);

277 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

279 
	`SETREG
(
FCP_CMD
, 
FC_GENERIC_ADDR
);

280 
	`SETREG
(
FCP_DMA_CNT
, 2);

281 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 0x10 << 16);

282 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 0x10 << 16);

283 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

285 
	`SETREG
(
FCP_CMD
, 
FC_IN
);

286 
	`SETREG
(
FCP_DMA_CNT
, 8);

287 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

289 
	`SETREG
(
FCP_CMD
, 
FC_WAIT
);

290 
	`SETREG
(
FCP_DMA_CNT
, 0);

291 
	`SETREG
(
FCP_COL
, 0xFF);

292 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

295 
	`Êash_föish
();

299 #i‡
CLOCK_SPEED
 > 165000000

300 c⁄° 
UINT32
 
ªad_cy˛e
 = 2;

302 c⁄° 
UINT32
 
ªad_cy˛e
 = 1;

305 c⁄° 
UINT32
 
time_∑øm
 = 
	`FLASH_SETUP
(
FLASH_PARAM_SETUP
Ë| 
	`FLASH_HOLD
(
CYCLE_PER_HOLD
 - 1Ë| 
	`FLASH_CLE_ALE_DLY
(1) |

306 
	`FLASH_READ_CYCLE_A
(
ªad_cy˛e
Ë| 
	`FLASH_READ_CYCLE_B
(read_cycle) |

307 
	`FLASH_READ_CYCLE_C
(
ªad_cy˛e
Ë| 
	`FLASH_READ_CYCLE_D
(read_cycle) |

308 
	`FLASH_OUT_ENA_DLY
(1Ë| 
	`FLASH_WHR
(15Ë| 
	`FLASH_ADL
(31Ë| 
	`FLASH_RHW
(31Ë| 
FLASH_ECC_ENABLE
;

310 
	`SETREG
(
FCONF_TIMECYCLE
, 
time_∑øm
);

311 
	}
}

	@target_spw/flash_wrapper.c

19 
	~"jasmöe.h
"

25 
UINT32
 
g_·l_ªad_buf_id
;

26 
UINT32
 
g_·l_wrôe_buf_id
;

27 
UINT32
 
g_b•_i§_Êag
;

30 
	$«nd_∑ge_ªad
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
buf_addr
)

32 
UINT32
 
row
;

34 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

35 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

36 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

39 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

41 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

42 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
);

43 
	`SETREG
(
FCP_DMA_ADDR
, 
buf_addr
);

44 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

46 
	`SETREG
(
FCP_COL
, 0);

47 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

48 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

50 
	`Êash_issue_cmd
(
b™k
, 
RETURN_WHEN_DONE
);

51 
	}
}

55 
	$«nd_∑ge_±ªad
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
, UINT32 c⁄° 
buf_addr
, UINT32 c⁄° 
issue_Êag
)

57 
UINT32
 
row
;

60 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

61 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

62 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

65 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

67 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

68 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
);

69 
	`SETREG
(
FCP_DMA_ADDR
, 
buf_addr
);

70 
	`SETREG
(
FCP_DMA_CNT
, 
num_£˘‹s
 * 
BYTES_PER_SECTOR
);

72 
	`SETREG
(
FCP_COL
, 
£˘_off£t
);

73 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

74 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

78 
	`Êash_issue_cmd
(
b™k
, 
issue_Êag
);

79 
	}
}

80 
	$«nd_∑ge_ªad_to_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
)

82 
UINT32
 
row
;

84 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

85 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

86 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

88 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

90 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

91 
	`SETREG
(
FCP_DMA_ADDR
, 
	`RD_BUF_PTR
(
g_·l_ªad_buf_id
));

92 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

94 
	`SETREG
(
FCP_COL
, 0);

95 #i‡
OPTION_FTL_TEST
 =
TRUE


96 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
);

98 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_SATA_R
);

100 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

101 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

103 
g_·l_ªad_buf_id
 = (g_·l_ªad_buf_id + 1Ë% 
NUM_RD_BUFFERS
;

105 #i‡
OPTION_FTL_TEST
 =
FALSE


109 
UINT32
 
ßè_id
 = 
	`GETREG
(
SATA_RBUF_PTR
);

111 i‡(
g_·l_ªad_buf_id
 !
ßè_id
)

116 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

117 
	}
}

119 
	$«nd_∑ge_±ªad_to_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
)

121 
UINT32
 
row
;

123 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

124 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

125 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

127 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

129 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

130 
	`SETREG
(
FCP_DMA_ADDR
, 
	`RD_BUF_PTR
(
g_·l_ªad_buf_id
));

131 
	`SETREG
(
FCP_DMA_CNT
, 
num_£˘‹s
 * 
BYTES_PER_SECTOR
);

133 
	`SETREG
(
FCP_COL
, 
£˘_off£t
);

134 #i‡
OPTION_FTL_TEST
 =
TRUE


135 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
);

137 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_SATA_R
);

139 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

140 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

142 
g_·l_ªad_buf_id
 = (g_·l_ªad_buf_id + 1Ë% 
NUM_RD_BUFFERS
;

144 #i‡
OPTION_FTL_TEST
 =
FALSE


148 
UINT32
 
ßè_id
 = 
	`GETREG
(
SATA_RBUF_PTR
);

150 i‡(
g_·l_ªad_buf_id
 !
ßè_id
)

155 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

156 
	}
}

157 
	$«nd_∑ge_¥ogøm
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
buf_addr
)

159 
UINT32
 
row
;

161 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

162 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

163 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

165 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

167 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN_PROG
);

168 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

169 
	`SETREG
(
FCP_DMA_ADDR
, 
buf_addr
);

170 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

171 
	`SETREG
(
FCP_COL
, 0);

172 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

173 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

175 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

176 
	}
}

177 
	$«nd_∑ge_±¥ogøm
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
, UINT32 c⁄° 
buf_addr
)

179 
UINT32
 
row
;

183 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

184 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

185 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

187 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

189 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN_PROG
);

190 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

191 
	`SETREG
(
FCP_DMA_ADDR
, 
buf_addr
);

192 
	`SETREG
(
FCP_DMA_CNT
, 
num_£˘‹s
 * 
BYTES_PER_SECTOR
);

193 
	`SETREG
(
FCP_COL
, 
£˘_off£t
);

194 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

195 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

197 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

198 
	}
}

199 
	$«nd_∑ge_¥ogøm_‰om_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
)

201 
UINT32
 
row
;

203 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

204 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

205 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

207 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

209 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN_PROG
);

210 #i‡
OPTION_FTL_TEST
 =
TRUE


211 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

213 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_SATA_W
);

215 
	`SETREG
(
FCP_DMA_ADDR
, 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
));

216 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

218 
	`SETREG
(
FCP_COL
, 0);

219 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

220 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

222 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

224 
g_·l_wrôe_buf_id
 = (g_·l_wrôe_buf_id + 1Ë% 
NUM_WR_BUFFERS
;

225 
	}
}

226 
	$«nd_∑ge_±¥ogøm_‰om_ho°
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
, UINT32 c⁄° 
∑ge_num
, UINT32 c⁄° 
£˘_off£t
, UINT32 c⁄° 
num_£˘‹s
)

228 
UINT32
 
row
;

230 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

231 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

232 
	`ASSERT
(
∑ge_num
 < 
PAGES_PER_BLK
);

234 
row
 = (
vblock
 * 
PAGES_PER_BLK
Ë+ 
∑ge_num
;

236 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN_PROG
);

237 #i‡
OPTION_FTL_TEST
 =
TRUE


238 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

240 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_SATA_W
);

242 
	`SETREG
(
FCP_DMA_ADDR
, 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
));

243 
	`SETREG
(
FCP_DMA_CNT
, 
num_£˘‹s
 * 
BYTES_PER_SECTOR
);

245 
	`SETREG
(
FCP_COL
, 
£˘_off£t
);

246 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
row
);

247 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
row
);

249 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

251 
g_·l_wrôe_buf_id
 = (g_·l_wrôe_buf_id + 1Ë% 
NUM_WR_BUFFERS
;

252 
	}
}

253 
	$«nd_∑ge_c›yback
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
§c_vblock
, UINT32 c⁄° 
§c_∑ge
,

254 
UINT32
 c⁄° 
d°_vblock
, UINT32 c⁄° 
d°_∑ge
)

256 
BOOL32
 
do_c›yback
;

258 
UINT32
 
§c_row
, 
d°_row
;

260 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

261 
	`ASSERT
(
§c_vblock
 < 
VBLKS_PER_BANK
);

262 
	`ASSERT
(
d°_vblock
 < 
VBLKS_PER_BANK
);

263 
	`ASSERT
(
§c_∑ge
 < 
PAGES_PER_BLK
);

264 
	`ASSERT
(
d°_∑ge
 < 
PAGES_PER_BLK
);

266 
§c_row
 = (
§c_vblock
 * 
PAGES_PER_BLK
Ë+ 
§c_∑ge
;

267 
d°_row
 = (
d°_vblock
 * 
PAGES_PER_BLK
Ë+ 
d°_∑ge
;

269 
do_c›yback
 = 
TRUE
;

271 #i‡
NAND_SPEC_DIE
 =
NAND_SPEC_DIE_2


273 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_3
 && 
OPTION_2_PLANE
 =
FALSE


275 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 4Ë!
d°_row
 / (PAGES_PER_BANK / 4))

276 
do_c›yback
 = 
FALSE
;

280 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 2Ë!
d°_row
 / (PAGES_PER_BANK / 2))

281 
do_c›yback
 = 
FALSE
;

287 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_3
 && 
OPTION_2_PLANE
 =
FALSE


289 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 2Ë!
d°_row
 / (PAGES_PER_BANK / 2))

290 
do_c›yback
 = 
FALSE
;

296 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_2
 && 
OPTION_2_PLANE
 =
FALSE


298 
UINT32
 
d°_vblk_off£t
 = 
d°_row
 / 
PAGES_PER_BLK
;

299 
UINT32
 
§c_vblk_off£t
 = 
§c_row
 / 
PAGES_PER_BLK
;

301 i‡(
d°_vblk_off£t
 % 
NUM_PLANES
 !
§c_vblk_off£t
 % NUM_PLANES)

303 
do_c›yback
 = 
FALSE
;

308 #i‡
FLASH_TYPE
 =
K9WAG08
 || FLASH_TYPE =
K9K8G08


310 i‡(
§c_row
 % 2 !
d°_row
 % 2)

311 
do_c›yback
 = 
FALSE
;

313 #ñi‡
FLASH_TYPE
 =
TH58NVG5S0DTG20
 && 
OPTION_2_PLANE
 =
FALSE


315 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 4Ë!
d°_row
 / (PAGES_PER_BANK / 4))

316 
do_c›yback
 = 
FALSE
;

320 i‡(
do_c›yback
)

322 
	`SETREG
(
FCP_CMD
, 
FC_COPYBACK
);

323 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

324 
	`SETREG
(
FCP_COL
, 0);

325 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
§c_row
);

326 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
§c_row
);

327 
	`SETREG
(
FCP_DST_ROW_H
, 
d°_row
);

328 
	`SETREG
(
FCP_DST_ROW_L
, 
d°_row
);

329 
	`SETREG
(
FCP_DST_COL
, 0);

331 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

336 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

337 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
);

338 
	`SETREG
(
FCP_DMA_ADDR
, 
	`COPY_BUF
(
b™k
));

339 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

340 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
§c_row
);

341 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
§c_row
);

342 
	`SETREG
(
FCP_COL
, 0);

343 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

344 
FLASH_POLL_WR
;

345 
FLASH_ISSUE
;

347 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN_PROG
);

348 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

349 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
d°_row
);

350 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
d°_row
);

351 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

352 
FLASH_POLL_WR
;

353 
FLASH_ISSUE
;

356 
	}
}

357 
	$«nd_∑ge_modifõd_c›yback
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
§c_vblock
, UINT32 c⁄° 
§c_∑ge
,

358 
UINT32
 c⁄° 
d°_vblock
, UINT32 c⁄° 
d°_∑ge
,

359 
UINT32
 c⁄° 
£˘_off£t
,

360 
UINT32
 
dma_addr
, UINT32 c⁄° 
dma_cou¡
)

363 
BOOL32
 
do_c›yback
;

364 
UINT32
 
§c_row
, 
d°_row
;

366 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

367 
	`ASSERT
(
§c_vblock
 < 
VBLKS_PER_BANK
);

368 
	`ASSERT
(
d°_vblock
 < 
VBLKS_PER_BANK
);

369 
	`ASSERT
(
§c_∑ge
 < 
PAGES_PER_BLK
);

370 
	`ASSERT
(
d°_∑ge
 < 
PAGES_PER_BLK
);

372 
§c_row
 = (
§c_vblock
 * 
PAGES_PER_BLK
Ë+ 
§c_∑ge
;

373 
d°_row
 = (
d°_vblock
 * 
PAGES_PER_BLK
Ë+ 
d°_∑ge
;

375 
do_c›yback
 = 
TRUE
;

377 #i‡
NAND_SPEC_DIE
 =
NAND_SPEC_DIE_2


379 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_3
 && 
OPTION_2_PLANE
 =
FALSE


381 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 4Ë!
d°_row
 / (PAGES_PER_BANK / 4))

382 
do_c›yback
 = 
FALSE
;

386 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 2Ë!
d°_row
 / (PAGES_PER_BANK / 2))

387 
do_c›yback
 = 
FALSE
;

393 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_3
 && 
OPTION_2_PLANE
 =
FALSE


395 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 2Ë!
d°_row
 / (PAGES_PER_BANK / 2))

396 
do_c›yback
 = 
FALSE
;

402 #i‡
NAND_SPEC_PLANE
 =
NAND_SPEC_PLANE_2
 && 
OPTION_2_PLANE
 =
FALSE


404 
UINT32
 
d°_vblk_off£t
 = 
d°_row
 / 
PAGES_PER_VBLK
;

405 
UINT32
 
§c_vblk_off£t
 = 
§c_row
 / 
PAGES_PER_VBLK
;

407 i‡(
d°_vblk_off£t
 % 
NUM_PLANES
 !
§c_vblk_off£t
 % NUM_PLANES)

409 
do_c›yback
 = 
FALSE
;

414 #i‡
FLASH_TYPE
 =
K9WAG08
 || FLASH_TYPE =
K9K8G08


415 i‡(
§c_row
 % 2 !
d°_row
 % 2)

416 
do_c›yback
 = 
FALSE
;

417 #ñi‡
FLASH_TYPE
 =
TH58NVG5S0DTG20
 && 
OPTION_2_PLANE
 =
FALSE


419 i‡(
§c_row
 / (
PAGES_PER_BANK
 / 4Ë!
d°_row
 / (PAGES_PER_BANK / 4))

420 
do_c›yback
 = 
FALSE
;

424 #i‡
NAND_SPEC_MODIFY_COPY
 =
FALSE


425 
do_c›yback
 = 
FALSE
;

428 i‡(
do_c›yback
)

430 
dma_addr
 -
£˘_off£t
 * 
BYTES_PER_SECTOR
;

432 
	`SETREG
(
FCP_CMD
, 
FC_MODIFY_COPYBACK
);

433 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

434 
	`SETREG
(
FCP_DMA_ADDR
, 
dma_addr
);

435 
	`SETREG
(
FCP_DMA_CNT
, 
dma_cou¡
);

436 
	`SETREG
(
FCP_COL
, 0);

437 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
§c_row
);

438 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
§c_row
);

439 
	`SETREG
(
FCP_DST_ROW_H
, 
d°_row
);

440 
	`SETREG
(
FCP_DST_ROW_L
, 
d°_row
);

441 
	`SETREG
(
FCP_DST_COL
, 
£˘_off£t
);

442 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

446 
UINT32
 
buf_addr
 = 
	`COPY_BUF
(
b™k
);

448 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

449 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
);

450 
	`SETREG
(
FCP_DMA_ADDR
, 
buf_addr
);

451 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

452 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
§c_row
);

453 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
§c_row
);

454 
	`SETREG
(
FCP_COL
, 0);

455 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

457 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN
);

458 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

459 
	`SETREG
(
FCP_DMA_CNT
, 
£˘_off£t
 * 
BYTES_PER_SECTOR
);

460 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
d°_row
);

461 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
d°_row
);

462 
	`SETREG
(
FCP_COL
, 0);

463 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

465 
	`SETREG
(
FCP_CMD
, 
FC_IN
);

466 
	`SETREG
(
FCP_DMA_ADDR
, 
dma_addr
 - 
£˘_off£t
 * 
BYTES_PER_SECTOR
);

467 
	`SETREG
(
FCP_DMA_CNT
, 
dma_cou¡
);

468 
	`SETREG
(
FCP_COL
, 
£˘_off£t
);

469 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

471 
	`SETREG
(
FCP_CMD
, 
FC_IN_PROG
);

472 
	`SETREG
(
FCP_DMA_ADDR
, 
buf_addr
);

473 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
 - 
£˘_off£t
 * 
BYTES_PER_SECTOR
 - 
dma_cou¡
);

474 
	`SETREG
(
FCP_COL
, 
£˘_off£t
 + 
dma_cou¡
 / 
BYTES_PER_SECTOR
);

475 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

477 
	}
}

478 
	$«nd_block_îa£
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
)

480 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

481 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

483 
	`SETREG
(
FCP_CMD
, 
FC_ERASE
);

484 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

485 
	`SETREG
(
FCP_OPTION
, 
FO_P
);

486 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
vblock
 * 
PAGES_PER_VBLK
);

487 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
vblock
 * 
PAGES_PER_VBLK
);

489 
	`Êash_issue_cmd
(
b™k
, 
RETURN_ON_ISSUE
);

492 
	}
}

493 
	$«nd_block_îa£_sync
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
vblock
)

495 
	`ASSERT
(
b™k
 < 
NUM_BANKS
);

496 
	`ASSERT
(
vblock
 < 
VBLKS_PER_BANK
);

498 
	`SETREG
(
FCP_CMD
, 
FC_ERASE
);

499 
	`SETREG
(
FCP_BANK
, 
	`REAL_BANK
(
b™k
));

500 
	`SETREG
(
FCP_OPTION
, 
FO_P
);

501 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
vblock
 * 
PAGES_PER_VBLK
);

502 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
vblock
 * 
PAGES_PER_VBLK
);

504 
	`Êash_issue_cmd
(
b™k
, 
RETURN_WHEN_DONE
);

505 
	}
}

	@target_spw/initialize.c

20 
	~"jasmöe.h
"

22 
	$öô_jasmöe
()

24 
UINT32
 
i
, 
b™k
;

25 
UINT32
 
Image$$ER_ZI$$ZI$$Ba£
;

26 
UINT32
 
Image$$ER_ZI$$ZI$$Lígth
;

30 
	`SETREG
(
CLKSñC⁄
, 
USE_BYPASS_CLK
);

32 
	`SETREG
(
PŒC⁄
, 
PLL_PD
);

33 
	`dñay
(600);

34 
	`SETREG
(
PŒC⁄
, 
PLL_CLK_CONFIG
 | 
PLL_PD
);

35 
	`dñay
(600);

36 
	`SETREG
(
PŒC⁄
, 
PLL_CLK_CONFIG
);

37 (
	`GETREG
(
PŒC⁄
Ë& 
PLL_LD
) == 0);

39 
	`SETREG
(
CLKSñC⁄
, 
USE_PLL_CLK
);

43 
	`SETREG
(
PMU_Re£tC⁄
, 
RESET_SDRAM
 | 
RESET_BM
 | 
RESET_SATA
 | 
RESET_FLASH
);

58 #i‡
OPTION_UART_DEBUG


59 
	`SETREG
(
GPIO_MOD
, 0);

60 
	`SETREG
(
GPIO_DIR
, 
BIT3
 | 
BIT4
 | 
BIT6
);

62 
	`SETREG
(
GPIO_MOD
, 7);

63 
	`SETREG
(
GPIO_DIR
, 
BIT2
 | 
BIT3
 | 
BIT4
 | 
BIT5
 | 
BIT6
);

66 
	`SETREG
(
GPIO_REG
, 0);

69 
	`mem_£t_§am
((
UINT32
Ë&
Image$$ER_ZI$$ZI$$Ba£
, 0x00000000, (UINT32Ë&
Image$$ER_ZI$$ZI$$Lígth
);

71 
	`SETREG
(
PHY_DEBUG
, 0x40000139);

72 (
	`GETREG
(
PHY_DEBUG
Ë& 
BIT30
) == 1);

74 
	`SETREG
(
SDRAM_INIT
, 
SDRAM_PARAM_MAIN_FW_INIT
);

75 
	`SETREG
(
SDRAM_REFRESH
, 
SDRAM_PARAM_MAIN_FW_REFRESH
);

76 
	`SETREG
(
SDRAM_TIMING
, 
SDRAM_PARAM_MAIN_FW_TIMING
);

77 
	`SETREG
(
SDRAM_MRS
, 
SDRAM_PARAM_MAIN_FW_MRS
);

78 
	`SETREG
(
SDRAM_CTRL
, 
SDRAM_INITIALIZE
);

79 
	`GETREG
(
SDRAM_STATUS
) & 0x00000010);

81 
i
 = 0; i < 
DRAM_SIZE
 / 
MU_MAX_BYTES
; i++)

83 
	`mem_£t_døm
(
DRAM_BASE
 + 
i
 * 
MU_MAX_BYTES
, 0x00000000, MU_MAX_BYTES);

86 #i‡
OPTION_UART_DEBUG


87 
	`u¨t_öô
();

88 
	`u¨t_¥öt
("WelcomeÅo OpenSSD");

91 
	`SETREG
(
SDRAM_ECC_MON
, 0xFFFFFFFF);

94 
	`SETREG
(
SDRAM_INTCTRL
, 
SDRAM_INT_ENABLE
);

97 
	`SETREG
(
SDRAM_INTSTATUS
, 0xFFFFFFFF);

100 
	`SETREG
(
APB_ICU_CON
, 
INTR_SATA
);

101 
	`SETREG
(
APB_INT_MSK
, 
INTR_SATA
 | 
INTR_FLASH
 | 
INTR_SDRAM
 | 
INTR_TIMER_1
 | 
INTR_TIMER_2
 | 
INTR_TIMER_3
);

104 
	`SETREG
(
APB_INT_STS
, 0xFFFFFFFF);

106 
	`Êash_ª£t
();

108 
	`SETREG
(
FCONF_PAUSE
, 0);

109 
	`SETREG
(
INTR_MASK
, 0);

111 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

113 
	`Êash_˛ór_úq
();

115 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

116 
	`SETREG
(
FCP_OPTION
, 0x06);

117 
	`SETREG
(
FCP_DMA_ADDR
, 
g_ãmp_mem
);

118 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_SECTOR
);

119 
	`SETREG
(
FCP_COL
, 0);

120 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
STAMP_PAGE_OFFSET
);

121 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
STAMP_PAGE_OFFSET
);

123 
	`Êash_issue_cmd
(
b™k
, 
RETURN_WHEN_DONE
);

125 i‡–(
	`BSP_INTR
(
b™k
) & 0xFE)== 0 )

129 #i‡
OPTION_FTL_TEST
 =
FALSE


130 
	`ßè_ª£t
();

133 
	`·l_›í
();

135 #i‡
OPTION_FTL_TEST
 =
TRUE


136 
	`·l_ã°
();

137 
	`·l_ã°
();

138 
	`Àd
(1);

141 
	}
}

	@target_spw/mem_util.c

20 
	~"jasmöe.h
"

22 
UINT8
 
	gg_ãmp_mem
[
BYTES_PER_SECTOR
];

24 
	#DEBUG_MEM_UTIL
 0

	)

26 #i‡
DEBUG_MEM_UTIL


27 vﬁ©ûê
UINT32
 
	gbusy
;

30 
	$_mem_c›y
(* c⁄° 
d°
, c⁄° * c⁄° 
§c
, 
UINT32
 c⁄° 
num_byãs
)

32 
UINT32
 
d
 = (UINT32Ë
d°
;

33 
UINT32
 
s
 = (UINT32Ë
§c
;

34 
BOOL32
 
was_dißbÀd
;

36 
	`ASSERT
(
d
 % (
UINT32
) == 0);

37 
	`ASSERT
(
s
 % (
UINT32
) == 0);

38 
	`ASSERT
(
num_byãs
 % (
UINT32
) == 0);

39 
	`ASSERT
(
num_byãs
 <
MU_MAX_BYTES
);

43 i‡(
d
 > 
DRAM_BASE
 && 
s
 > DRAM_BASE && ((
num_byãs
 % 
DRAM_ECC_UNIT
) != 0))

45 
	`ASSERT
(0);

47 
was_dißbÀd
 = 
	`dißbÀ_úq
();

49 #i‡
DEBUG_MEM_UTIL


50 
	`ASSERT
(
busy
 == 0);

51 
busy
 = 1;

54 
	`SETREG
(
MU_SRC_ADDR
, 
s
);

55 
	`SETREG
(
MU_DST_ADDR
, 
d
);

56 
	`SETREG
(
MU_SIZE
, 
num_byãs
);

57 
	`SETREG
(
MU_CMD
, 
MU_CMD_COPY
);

59 
	`GETREG
(
MU_RESULT
) == 0xFFFFFFFF);

61 #i‡
DEBUG_MEM_UTIL


62 
busy
 = 0;

65 i‡(!
was_dißbÀd
)

66 
	`íabÀ_úq
();

67 
	}
}

70 
UINT32
 
	$_mem_bmp_föd_§am
(c⁄° * c⁄° 
bôm≠
, 
UINT32
 c⁄° 
num_byãs
, UINT32 c⁄° 
vÆ
)

72 
UINT32
 
ªtvÆ
;

73 
BOOL32
 
was_dißbÀd
;

75 
	`ASSERT
(
num_byãs
 <
MU_MAX_BYTES
 &&Çum_bytes != 0);

76 
	`ASSERT
(
num_byãs
 % (
UINT32
) == 0);

77 
	`ASSERT
(
vÆ
 == 0 || val == 1);

78 
	`ASSERT
((
UINT32
Ë
bôm≠
 < 
DRAM_BASE
);

81 
was_dißbÀd
 = 
	`dißbÀ_úq
();

83 #i‡
DEBUG_MEM_UTIL


84 
	`ASSERT
(
busy
 == 0);

85 
busy
 = 1;

88 
	`SETREG
(
MU_SRC_ADDR
, 
bôm≠
);

89 
	`SETREG
(
MU_VALUE
, 
vÆ
);

90 
	`SETREG
(
MU_SIZE
, 
num_byãs
);

91 
	`SETREG
(
MU_CMD
, 
MU_CMD_FIND_SRAM
);

95 
ªtvÆ
 = 
	`GETREG
(
MU_RESULT
);

97 i‡(
ªtvÆ
 != 0xFFFFFFFF)

101 #i‡
DEBUG_MEM_UTIL


102 
busy
 = 0;

105 i‡(!
was_dißbÀd
)

106 
	`íabÀ_úq
();

108  
ªtvÆ
;

109 
	}
}

111 
UINT32
 
	$_mem_bmp_föd_døm
(c⁄° * c⁄° 
bôm≠
, 
UINT32
 c⁄° 
num_byãs
, UINT32 c⁄° 
vÆ
)

113 
UINT32
 
ªtvÆ
;

114 
BOOL32
 
was_dißbÀd
;

116 
	`ASSERT
(
num_byãs
 <
MU_MAX_BYTES
 &&Çum_bytes != 0);

117 
	`ASSERT
(
num_byãs
 % (
UINT32
) == 0);

118 
	`ASSERT
(
vÆ
 == 0 || val == 1);

119 
	`ASSERT
((
UINT32
Ë
bôm≠
 >
DRAM_BASE
);

121 
was_dißbÀd
 = 
	`dißbÀ_úq
();

123 #i‡
DEBUG_MEM_UTIL


124 
	`ASSERT
(
busy
 == 0);

125 
busy
 = 1;

128 
	`SETREG
(
MU_SRC_ADDR
, 
bôm≠
);

129 
	`SETREG
(
MU_VALUE
, 
vÆ
);

130 
	`SETREG
(
MU_SIZE
, 
num_byãs
);

131 
	`SETREG
(
MU_CMD
, 
MU_CMD_FIND_DRAM
);

135 
ªtvÆ
 = 
	`GETREG
(
MU_RESULT
);

137 i‡(
ªtvÆ
 != 0xFFFFFFFF)

141 #i‡
DEBUG_MEM_UTIL


142 
busy
 = 0;

145 i‡(!
was_dißbÀd
)

146 
	`íabÀ_úq
();

148  
ªtvÆ
;

149 
	}
}

151 
	$_mem_£t_§am
(
UINT32
 
addr
, UINT32 c⁄° 
vÆ
, UINT32 
num_byãs
)

153 
UINT32
 
size
;

155 
	`ASSERT
((
UINT32
)
addr
 % (UINT32) == 0);

156 
	`ASSERT
(
num_byãs
 % (
UINT32
) == 0);

157 
	`ASSERT
((
UINT32
Ë
addr
 + 
num_byãs
 <
SRAM_SIZE
);

159 #i‡
DEBUG_MEM_UTIL


160 
	`ASSERT
(
busy
 == 0);

161 
busy
 = 1;

164 
	`SETREG
(
MU_VALUE
, 
vÆ
);

168 
size
 = 
	`MIN
(
num_byãs
, 
MU_MAX_BYTES
);

170 
	`SETREG
(
MU_DST_ADDR
, 
addr
);

171 
	`SETREG
(
MU_SIZE
, 
size
);

172 
	`SETREG
(
MU_CMD
, 
MU_CMD_SET_REPT_SRAM
);

174 
addr
 +
size
;

175 
num_byãs
 -
size
;

177 
	`GETREG
(
MU_RESULT
) == 0xFFFFFFFF);

179 
num_byãs
 != 0);

181 #i‡
DEBUG_MEM_UTIL


182 
busy
 = 0;

184 
	}
}

187 
	$_mem_£t_døm
(
UINT32
 
addr
, UINT32 c⁄° 
vÆ
, UINT32 
num_byãs
)

189 
UINT32
 
size
;

191 
	`ASSERT
((
UINT32
)
addr
 % 
SDRAM_ECC_UNIT
 == 0);

192 
	`ASSERT
(
num_byãs
 % 
SDRAM_ECC_UNIT
 == 0);

193 
	`ASSERT
((
UINT32
Ë
addr
 >
DRAM_BASE
);

195 #i‡
DEBUG_MEM_UTIL


196 
	`ASSERT
(
busy
 == 0);

197 
busy
 = 1;

200 
	`SETREG
(
MU_VALUE
, 
vÆ
);

204 
size
 = 
	`MIN
(
num_byãs
, 
MU_MAX_BYTES
);

206 
	`SETREG
(
MU_DST_ADDR
, 
addr
);

207 
	`SETREG
(
MU_SIZE
, 
size
);

208 
	`SETREG
(
MU_CMD
, 
MU_CMD_SET_REPT_DRAM
);

210 
addr
 +
size
;

211 
num_byãs
 -
size
;

213 
	`GETREG
(
MU_RESULT
) == 0xFFFFFFFF);

215 
num_byãs
 != 0);

217 #i‡
DEBUG_MEM_UTIL


218 
busy
 = 0;

220 
	}
}

222 
UINT32
 
	$_mem_£¨ch_mö_max
(c⁄° * c⁄° 
addr
, 
UINT32
 c⁄° 
num_byãs_≥r_ôem
, UINT32 c⁄° 
num_ôems
, UINT32 c⁄° 
cmd
)

224 
UINT32
 
ªtvÆ
;

226 
	`ASSERT
((
UINT32
)
addr
 % (UINT32) == 0);

227 
	`ASSERT
(
num_ôems
 !0 && 
num_byãs_≥r_ôem
 *Çum_ôem†<
MU_MAX_BYTES
);

229 #i‡
DEBUG_MEM_UTIL


230 
	`ASSERT
(
busy
 == 0);

231 
busy
 = 1;

234 i‡(
num_byãs_≥r_ôem
 =(
UINT8
))

236 
	`SETREG
(
MU_UNITSTEP
, 
MU_UNIT_8
 | 1);

238 i‡(
num_byãs_≥r_ôem
 =(
UINT16
))

240 
	`SETREG
(
MU_UNITSTEP
, 
MU_UNIT_16
 | 2);

244 
	`SETREG
(
MU_UNITSTEP
, 
MU_UNIT_32
 | 4);

246 
	`SETREG
(
MU_SRC_ADDR
, 
addr
);

247 
	`SETREG
(
MU_SIZE
, 
num_ôems
);

248 
	`SETREG
(
MU_CMD
, 
cmd
);

252 
ªtvÆ
 = 
	`GETREG
(
MU_RESULT
);

254 i‡(
ªtvÆ
 != 0xFFFFFFFF)

258 #i‡
DEBUG_MEM_UTIL


259 
busy
 = 0;

262  
ªtvÆ
;

263 
	}
}

265 
UINT32
 
	$_mem_£¨ch_equ
(c⁄° * c⁄° 
addr
, 
UINT32
 c⁄° 
num_byãs_≥r_ôem
, UINT32 c⁄° 
num_ôems
, UINT32 c⁄° 
cmd
, UINT32 c⁄° 
vÆ
)

267 
UINT32
 
ªtvÆ
;

269 
	`ASSERT
((
UINT32
)
addr
 % (UINT32) == 0);

270 
	`ASSERT
(
num_byãs_≥r_ôem
 * 
num_ôems
 <
MU_MAX_BYTES
);

272 i‡(
num_ôems
 == 0)

277 #i‡
DEBUG_MEM_UTIL


278 
	`ASSERT
(
busy
 == 0);

279 
busy
 = 1;

282 i‡(
num_byãs_≥r_ôem
 =(
UINT8
))

284 
	`SETREG
(
MU_UNITSTEP
, 
MU_UNIT_8
 | 1);

286 i‡(
num_byãs_≥r_ôem
 =(
UINT16
))

288 
	`SETREG
(
MU_UNITSTEP
, 
MU_UNIT_16
 | 2);

292 
	`SETREG
(
MU_UNITSTEP
, 
MU_UNIT_32
 | 4);

295 
	`SETREG
(
MU_SRC_ADDR
, 
addr
);

296 
	`SETREG
(
MU_VALUE
, 
vÆ
);

297 
	`SETREG
(
MU_SIZE
, 
num_ôems
);

298 
	`SETREG
(
MU_CMD
, 
cmd
);

302 
ªtvÆ
 = 
	`GETREG
(
MU_RESULT
);

304 i‡(
ªtvÆ
 != 0xFFFFFFFF)

308 #i‡
DEBUG_MEM_UTIL


309 
busy
 = 0;

312  
ªtvÆ
;

313 
	}
}

315 
	$_wrôe_døm_32
(
UINT32
 c⁄° 
addr
, UINT32 c⁄° 
vÆ
)

317 
	`ASSERT
(
addr
 >
DRAM_BASE
 &&ádd∏< (DRAM_BASE + 
DRAM_SIZE
));

319 i‡(
addr
 % (
UINT32
) != 0)

322 
	`mem_c›y
(
addr
, &
vÆ
, (
UINT32
));

323 
	}
}

325 
	$_wrôe_døm_16
(
UINT32
 c⁄° 
addr
, 
UINT16
 c⁄° 
vÆ
)

327 
	`ASSERT
(
addr
 >
DRAM_BASE
 &&ádd∏< (DRAM_BASE + 
DRAM_SIZE
));

329 
UINT32
 
off£t
 = 
addr
 % 4;

330 
UINT32
 
Æig√d_addr
 = 
addr
 & 0xFFFFFFFC;

331 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
Æig√d_addr
 - DRAM_BASE)/128*132 + (aligned_addr - DRAM_BASE)%128;

332 
UINT32
 
ﬁd_vÆ
 = *(vﬁ©ûêUINT32*)
ªÆ_addr
;

333 
UINT32
 
√w_vÆ
 = (
ﬁd_vÆ
 & ~(0xFFFF << (
off£t
 * 8))Ë| (
vÆ
 << (offset * 8));

334 
	`mem_c›y
(
Æig√d_addr
, &
√w_vÆ
, (
UINT32
));

335 
	}
}

337 
	$_wrôe_døm_8
(
UINT32
 c⁄° 
addr
, 
UINT8
 c⁄° 
vÆ
)

339 
	`ASSERT
(
addr
 >
DRAM_BASE
 &&ádd∏< (DRAM_BASE + 
DRAM_SIZE
));

341 
UINT32
 
off£t
 = 
addr
 % 4;

342 
UINT32
 
Æig√d_addr
 = 
addr
 & 0xFFFFFFFC;

343 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
Æig√d_addr
 - DRAM_BASE)/128*132 + (aligned_addr - DRAM_BASE)%128;

344 
UINT32
 
ﬁd_vÆ
 = *(vﬁ©ûêUINT32*)
ªÆ_addr
;

345 
UINT32
 
√w_vÆ
 = (
ﬁd_vÆ
 & ~(0xFF << (
off£t
 * 8))Ë| (
vÆ
 << (offset * 8));

346 
	`mem_c›y
(
Æig√d_addr
, &
√w_vÆ
, (
UINT32
));

347 
	}
}

349 
	$_£t_bô_døm
(
UINT32
 c⁄° 
ba£_addr
, UINT32 c⁄° 
bô_off£t
)

351 
	`ASSERT
(
ba£_addr
 >
DRAM_BASE
 && ba£_add∏< (DRAM_BASE + 
DRAM_SIZE
));

353 
UINT32
 
vÆ
;

354 
UINT32
 
addr
 = 
ba£_addr
 + 
bô_off£t
 / 8;

355 
UINT32
 
Æig√d_addr
 = 
addr
 & 0xFFFFFFFC;

356 
UINT32
 
√w_bô_off£t
 = (
ba£_addr
*8 + 
bô_off£t
) % 32;

357 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
Æig√d_addr
 - DRAM_BASE)/128*132 + (aligned_addr - DRAM_BASE)%128;

359 
vÆ
 = *(vﬁ©ûê
UINT32
*)
ªÆ_addr
;

360 
vÆ
 |(1 << 
√w_bô_off£t
);

361 
	`mem_c›y
(
Æig√d_addr
, &
vÆ
, (
UINT32
));

362 
	}
}

364 
	$_˛r_bô_døm
(
UINT32
 c⁄° 
ba£_addr
, UINT32 c⁄° 
bô_off£t
)

366 
	`ASSERT
(
ba£_addr
 >
DRAM_BASE
 && ba£_add∏< (DRAM_BASE + 
DRAM_SIZE
));

368 
UINT32
 
vÆ
;

369 
UINT32
 
addr
 = 
ba£_addr
 + 
bô_off£t
 / 8;

370 
UINT32
 
Æig√d_addr
 = 
addr
 & 0xFFFFFFFC;

371 
UINT32
 
√w_bô_off£t
 = (
ba£_addr
*8 + 
bô_off£t
) % 32;

372 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
Æig√d_addr
 - DRAM_BASE)/128*132 + (aligned_addr - DRAM_BASE)%128;

374 
vÆ
 = *(vﬁ©ûê
UINT32
*)
ªÆ_addr
;

375 
vÆ
 &~(1 << 
√w_bô_off£t
);

376 
	`mem_c›y
(
Æig√d_addr
, &
vÆ
, (
UINT32
));

377 
	}
}

379 
BOOL32
 
	$_t°_bô_døm
(
UINT32
 c⁄° 
ba£_addr
, UINT32 c⁄° 
bô_off£t
)

381 
	`ASSERT
(
ba£_addr
 >
DRAM_BASE
 && ba£_add∏< (DRAM_BASE + 
DRAM_SIZE
));

383 
UINT32
 
vÆ
;

384 
UINT32
 
addr
 = 
ba£_addr
 + 
bô_off£t
 / 8;

385 
UINT32
 
Æig√d_addr
 = 
addr
 & 0xFFFFFFFC;

386 
UINT32
 
√w_bô_off£t
 = (
ba£_addr
*8 + 
bô_off£t
) % 32;

387 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
Æig√d_addr
 - DRAM_BASE)/128*132 + (aligned_addr - DRAM_BASE)%128;

388 
vÆ
 = *(vﬁ©ûê
UINT32
*)
ªÆ_addr
;

390  
vÆ
 & (1 << 
√w_bô_off£t
);

391 
	}
}

393 
UINT8
 
	$_ªad_døm_8
(
UINT32
 c⁄° 
addr
)

395 
	`ASSERT
(
addr
 >
DRAM_BASE
 &&ádd∏< (DRAM_BASE + 
DRAM_SIZE
));

397 
UINT32
 
Æig√d_addr
 = 
addr
 & 0xFFFFFFFC;

398 
UINT32
 
byã_off£t
 = 
addr
 % 4;

399 
UINT32
 
vÆ
;

400 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
Æig√d_addr
 - DRAM_BASE)/128*132 + (aligned_addr - DRAM_BASE)%128;

401 
vÆ
 = *(vﬁ©ûê
UINT32
*)
ªÆ_addr
;

403  (
UINT8
Ë(
vÆ
 >> (
byã_off£t
 * 8));

404 
	}
}

406 
UINT16
 
	$_ªad_døm_16
(
UINT32
 c⁄° 
addr
)

408 
	`ASSERT
(
addr
 >
DRAM_BASE
 &&ádd∏< (DRAM_BASE + 
DRAM_SIZE
));

410 
UINT32
 
Æig√d_addr
 = 
addr
 & 0xFFFFFFFC;

411 
UINT32
 
byã_off£t
 = 
addr
 % 4;

412 
UINT32
 
vÆ
;

413 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
Æig√d_addr
 - DRAM_BASE)/128*132 + (aligned_addr - DRAM_BASE)%128;

414 
vÆ
 = *(vﬁ©ûê
UINT32
*)
ªÆ_addr
;

416  (
UINT16
Ë(
vÆ
 >> (
byã_off£t
 * 8));

417 
	}
}

419 
UINT32
 
	$_ªad_døm_32
(
UINT32
 c⁄° 
addr
)

421 
	`ASSERT
(
addr
 >
DRAM_BASE
 &&ádd∏< (DRAM_BASE + 
DRAM_SIZE
));

422 
	`ASSERT
(
addr
 % (
UINT32
) == 0);

424 
UINT32
 
vÆ
;

425 
UINT32
 
ªÆ_addr
 = 
DRAM_BASE
 + (
addr
 - DRAM_BASE)/128*132 + (addr - DRAM_BASE)%128;

426 
vÆ
 = *(vﬁ©ûê
UINT32
*)
ªÆ_addr
;

428  
vÆ
;

429 
	}
}

431 
UINT32
 
	$_mem_cmp_§am
(c⁄° * c⁄° 
addr1
, c⁄° * c⁄° 
addr2
, c⁄° 
UINT32
 
num_byãs
)

433 
UINT8
 *
±r1
, *
±r2
;

434 
UINT8
 
vÆ1
, 
vÆ2
;

435 
UINT32
 
i
;

437 
	`ASSERT
((
UINT32
Ë
addr1
 < 
DRAM_BASE
);

438 
	`ASSERT
((
UINT32
Ë
addr2
 < 
DRAM_BASE
);

439 
	`ASSERT
(
num_byãs
 != 0);

441 
±r1
 = (
UINT8
 *)
addr1
;

442 
±r2
 = (
UINT8
 *)
addr2
;

444 
i
 = 0; i < 
num_byãs
; i++)

446 
vÆ1
 = *
±r1
++;

447 
vÆ2
 = *
±r2
++;

449 i‡(
vÆ1
 !
vÆ2
)

451  (
vÆ1
 > 
vÆ2
 ) ? 1 : -1;

455 
	}
}

457 
UINT32
 
	$_mem_cmp_døm
(c⁄° * c⁄° 
addr1
, c⁄° * c⁄° 
addr2
, c⁄° 
UINT32
 
num_byãs
)

459 
UINT8
 *
±r1
, *
±r2
;

460 
UINT8
 
vÆ1
, 
vÆ2
;

461 
UINT32
 
i
;

463 
	`ASSERT
((
UINT32
)
addr1
 >
DRAM_BASE
 && (UINT32Ôddr1 < (DRAM_BASE + 
DRAM_SIZE
));

464 
	`ASSERT
((
UINT32
)
addr2
 >
DRAM_BASE
 && (UINT32Ôddr2 < (DRAM_BASE + 
DRAM_SIZE
));

466 
	`ASSERT
(
num_byãs
 != 0);

468 
±r1
 = (
UINT8
 *)
addr1
;

469 
±r2
 = (
UINT8
 *)
addr2
;

471 
i
 = 0; i < 
num_byãs
; i++)

473 
vÆ1
 = 
	`ªad_døm_8
(
±r1
);

474 
vÆ2
 = 
	`ªad_døm_8
(
±r2
);

476 i‡(
vÆ1
 !
vÆ2
)

478  (
vÆ1
 > 
vÆ2
 ) ? 1 : -1;

480 
±r1
++;

481 
±r2
++;

484 
	}
}

	@target_spw/misc.c

19 
	~"jasmöe.h
"

21 
	$Àd
(
BOOL32
 
⁄
)

23 
UINT32
 
ãmp
;

25 
ãmp
 = 
	`GETREG
(
GPIO_REG
);

27 i‡(
⁄
)

29 
ãmp
 =Åemp | (1 << 6);

33 
ãmp
 =Åemp & ~(1 << 6);

36 
	`SETREG
(
GPIO_REG
, 
ãmp
);

37 
	}
}

39 
	$Àd_blök
()

43 
	`Àd
(1);

44 
	`dñay
(700000);

45 
	`Àd
(0);

46 
	`dñay
(700000);

48 
	}
}

50 #i‡
OPTION_ENABLE_ASSERT


51 vﬁ©ûê
UINT32
 
	gg_b¨rõr2
;

54 #ifde‡
__GNUC__


55 
	$swi_h™dÀr
(Ë
	`__©åibuã__
 ((
	`öãºu±
 ("SWI")));

56 
	$swi_h™dÀr
()

58 
__úq
 
	$swi_h™dÀr
()

61 #i‡
OPTION_ENABLE_ASSERT


63 
g_b¨rõr2
 = 0;

65 
g_b¨rõr2
 == 0)

67 
	`Àd
(1);

68 
	`dñay
(700000);

69 
	`Àd
(0);

70 
	`dñay
(700000);

74 
	}
}

76 
UINT32
 
	gg_sdøm_ecc_cou¡
;

77 
UINT32
 
	gg_sdøm_ecc_Áû_cou¡
;

78 
UINT32
 
	gg_timî_öãºu±_cou¡
;

80 #ifde‡
__GNUC__


81 
	$úq_h™dÀr
(Ë
	`__©åibuã__
 ((
	`öãºu±
 ("IRQ")));

82 
	$úq_h™dÀr
()

84 
__úq
 
	$úq_h™dÀr
()

87 
UINT32
 
öå_°©
 = 
	`GETREG
(
APB_INT_STS
);

89 i‡(
öå_°©
 & (
INTR_TIMER_1
 | 
INTR_TIMER_2
 | 
INTR_TIMER_3
))

91 
g_timî_öãºu±_cou¡
++;

93 
	`CLEAR_TIMER_INTR
(
TIMER_CH1
);

94 
	`CLEAR_TIMER_INTR
(
TIMER_CH2
);

95 
	`CLEAR_TIMER_INTR
(
TIMER_CH3
);

96 
	`SETREG
(
APB_INT_STS
, 
INTR_TIMER_1
 | 
INTR_TIMER_2
 | 
INTR_TIMER_3
);

98 i‡(
öå_°©
 & 
INTR_FLASH
)

100 
	`·l_i§
();

102 i‡(
öå_°©
 & 
INTR_SDRAM
)

104 
UINT32
 
sdøm_öãºu±
 = 
	`GETREG
(
SDRAM_INTSTATUS
);

106 
	`SETREG
(
SDRAM_INTSTATUS
, 0xFFFFFFFF);

109 
	`SETREG
(
APB_INT_STS
, 
INTR_SDRAM
);

111 i‡(
sdøm_öãºu±
 & 
SDRAM_INT_ECC_CORR
)

118 
g_sdøm_ecc_cou¡
++;

121 i‡(
sdøm_öãºu±
 & 
SDRAM_INT_ECC_FAIL
)

124 
g_sdøm_ecc_Áû_cou¡
++;

127 i‡(
sdøm_öãºu±
 & 
SDRAM_INT_ADDR_OF
)

130 
	`u¨t_¥ötf
("Error: SDRAM interrupt occred:áttemptÅoáccess beyond DRAMáddress boundary");

131 
	`Àd_blök
();

134 
	}
}

136 
	~<°dlib.h
>

140 
UINT32
 
	mîa£_¥og_Áû
;

141 
UINT32
 
	mªad_Áû
;

143 
	tã°_ªsu…_t
;

145 
ã°_ªsu…_t
 
	gg_ã°_ªsu…
[
NUM_BANKS
];

147 
	$ã°_«nd_blocks
()

152 
UINT32
 
b™k
, 
vblk_off£t
, 
∑ge_off£t
, 
d©a
, 
bad
;

154 
	#wrôe_buf„r_ba£
 
DRAM_BASE


	)

155 
	#ªad_buf„r_ba£
 (
DRAM_BASE
 + 
BYTES_PER_VBLK
)

	)

157 
	`dißbÀ_úq
();

158 
	`Êash_˛ór_úq
();

160 
	`mem_£t_§am
(
g_ã°_ªsu…
, 0, (g_test_result));

163 
	`SETREG
(
FCONF_PAUSE
, 0);

167 
	`§™d
(10);

169 
∑ge_off£t
 = 0;Öage_off£à< 
PAGES_PER_VBLK
;Öage_offset++)

171 
d©a
 = (
	`ønd
() & 0xFFFF) | (rand() << 16);

172 
	`mem_£t_døm
(
wrôe_buf„r_ba£
 + 
∑ge_off£t
 * 
BYTES_PER_PAGE
, 
d©a
, BYTES_PER_PAGE);

175 
vblk_off£t
 = 1; vblk_off£à< 
VBLKS_PER_BANK
; vblk_offset++)

179 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

181 
UINT32
 
rb™k
 = 
	`REAL_BANK
(
b™k
);

183 
	`SETREG
(
FCP_CMD
, 
FC_ERASE
);

184 
	`SETREG
(
FCP_BANK
, 
rb™k
);

185 
	`SETREG
(
FCP_OPTION
, 
FO_P
);

186 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
);

187 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
);

189 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

190 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

195 
∑ge_off£t
 = 0;Öage_off£à< 
PAGES_PER_VBLK
;Öage_offset++)

197 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

199 
UINT32
 
rb™k
 = 
	`REAL_BANK
(
b™k
);

201 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_IN_PROG
);

202 
	`SETREG
(
FCP_BANK
, 
rb™k
);

203 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
 | 
FO_B_W_DRDY
);

204 
	`SETREG
(
FCP_DMA_ADDR
, 
wrôe_buf„r_ba£
 + 
∑ge_off£t
 * 
BYTES_PER_PAGE
);

205 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

206 
	`SETREG
(
FCP_COL
, 0);

207 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
 + 
∑ge_off£t
);

208 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
 + 
∑ge_off£t
);

210 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

211 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

217 
bad
 = 0;

219 
	`GETREG
(
MON_CHABANKIDLE
) != 0);

221 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

223 i‡(
	`BSP_INTR
(
b™k
Ë& (
FIRQ_BADBLK_H
 | 
FIRQ_BADBLK_L
))

225 
bad
 |(1 << 
b™k
);

226 
	`CLR_BSP_INTR
(
b™k
, 0xFF);

227 
g_ã°_ªsu…
[
b™k
].
îa£_¥og_Áû
++;

234 
∑ge_off£t
 = 0;Öage_off£à< 
PAGES_PER_VBLK
;Öage_offset++)

236 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

238 
UINT32
 
rb™k
 = 
	`REAL_BANK
(
b™k
);

240 i‡(
bad
 & (1 << 
b™k
))

243 
	`SETREG
(
FCP_CMD
, 
FC_COL_ROW_READ_OUT
);

244 
	`SETREG
(
FCP_BANK
, 
rb™k
);

245 
	`SETREG
(
FCP_OPTION
, 
FO_P
 | 
FO_E
);

246 
	`SETREG
(
FCP_DMA_ADDR
, 
ªad_buf„r_ba£
 + 
b™k
 * 
BYTES_PER_PAGE
);

247 
	`SETREG
(
FCP_DMA_CNT
, 
BYTES_PER_PAGE
);

248 
	`SETREG
(
FCP_COL
, 0);

249 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
 + 
∑ge_off£t
);

250 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
 + 
∑ge_off£t
);

252 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

253 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

259 
	`GETREG
(
MON_CHABANKIDLE
) != 0);

261 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

263 i‡(
	`BSP_INTR
(
b™k
Ë& 
FIRQ_DATA_CORRUPT
)

265 
bad
 |(1 << 
b™k
);

266 
	`CLR_BSP_INTR
(
b™k
, 0xFF);

267 
g_ã°_ªsu…
[
b™k
].
ªad_Áû
++;

273 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++)

275 
UINT32
 
rb™k
 = 
	`REAL_BANK
(
b™k
);

277 i‡(
bad
 & (1 << 
b™k
))

280 
	`SETREG
(
FCP_CMD
, 
FC_ERASE
);

281 
	`SETREG
(
FCP_BANK
, 
rb™k
);

282 
	`SETREG
(
FCP_OPTION
, 
FO_P
);

283 
	`SETREG
(
	`FCP_ROW_L
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
);

284 
	`SETREG
(
	`FCP_ROW_H
(
b™k
), 
vblk_off£t
 * 
PAGES_PER_VBLK
);

286 (
	`GETREG
(
WR_STAT
) & 0x00000001) != 0);

287 
	`SETREG
(
FCP_ISSUE
, 
NULL
);

292 
	}
}

294 
	$°¨t_öãrvÆ_mósuªmít
(
UINT32
 c⁄° 
timî
, UINT32 c⁄° 
¥esˇÀ
)

308 
	`ASSERT
(
timî
 =
TIMER_CH1
 ||Åimî =
TIMER_CH2
 ||Åimî =
TIMER_CH3
);

309 
	`ASSERT
(
¥esˇÀ
 =
TIMER_PRESCALE_0
 ||ÖªsˇÀ =
TIMER_PRESCALE_1
 ||ÖªsˇÀ =
TIMER_PRESCALE_2
);

311 
	`SET_TIMER_CONTROL
(
timî
, 0);

312 
	`CLEAR_TIMER_INTR
(
timî
);

313 
	`SET_TIMER_LOAD
(
timî
, 0xFFFFFFFF);

314 
	`SET_TIMER_CONTROL
(
timî
, 
TM_ENABLE
 | 
TM_BIT_32
 | 
TM_MODE_PRD
 | 
¥esˇÀ
);

318 
	}
}

320 
	$°¨t_timî
(
UINT32
 c⁄° 
timî
, UINT32 c⁄° 
¥esˇÀ
, UINT32 c⁄° 
öô_vÆ
)

322 
	`ASSERT
(
timî
 =
TIMER_CH1
 ||Åimî =
TIMER_CH2
 ||Åimî =
TIMER_CH3
);

323 
	`ASSERT
(
¥esˇÀ
 =
TIMER_PRESCALE_0
 ||ÖªsˇÀ =
TIMER_PRESCALE_1
 ||ÖªsˇÀ =
TIMER_PRESCALE_2
);

325 
	`SET_TIMER_CONTROL
(
timî
, 0);

326 
	`CLEAR_TIMER_INTR
(
timî
);

327 
	`SET_TIMER_LOAD
(
timî
, 
öô_vÆ
);

328 
	`SET_TIMER_CONTROL
(
timî
, 
TM_ENABLE
 | 
TM_BIT_32
 | 
TM_MODE_PRD
 | 
TM_INTR
 | 
¥esˇÀ
);

329 
	}
}

332 #i‡
OPTION_UART_DEBUG


334 
	~<°dio.h
>

336 * 
	tˇddr_t
;

339 
ˇddr_t
 
_sbrk
 ( 
ö¸
 );

341 
	$±imî_°¨t
()

343 
	`°¨t_öãrvÆ_mósuªmít
(
TIMER_CH1
, 
TIMER_PRESCALE_0
);

344 
	}
}

345 
	$±imî_°›_™d_u¨t_¥öt
()

347 
UINT32
 
πime
;

348 
buf
[21];

350 
πime
 = 0xFFFFFFFF - 
	`GET_TIMER_VALUE
(
TIMER_CH1
);

352 
πime
 = (
UINT32
)((
UINT64
Ïtimê* 2 * 1000000 * 
	`PRESCALE_TO_DIV
(
TIMER_PRESCALE_0
Ë/ 
CLOCK_SPEED
);

353 
	`•rötf
(
buf
, "%u", 
πime
);

354 
	`u¨t_¥öt
(
buf
);

355 
	}
}

356 
	g__HEAP_START
[
BYTES_PER_SECTOR
];

358 
ˇddr_t
 
	$_sbrk
 ( 
ö¸
 )

360 *
hóp
 = 
NULL
;

361 *
¥ev_hóp
;

363 i‡(
hóp
 =
NULL
) {

364 
hóp
 = (*)&
__HEAP_START
;

366 
¥ev_hóp
 = 
hóp
;

369 
hóp
 +
ö¸
;

371  (
ˇddr_t
Ë
¥ev_hóp
;

372 
	}
}

	@target_spw/misc.h

19 #i‚de‡
MISC_H


20 
	#MISC_H


	)

22 
Àd
(
BOOL32
 
⁄
);

23 
Àd_blök
();

24 
ã°_«nd_blocks
();

25 
°¨t_öãrvÆ_mósuªmít
(
UINT32
 c⁄° 
timî
, UINT32 c⁄° 
¥esˇÀ
);

26 
°¨t_timî
(
UINT32
 c⁄° 
timî
, UINT32 c⁄° 
¥esˇÀ
, UINT32 c⁄° 
öô_vÆ
);

27 #i‡
OPTION_UART_DEBUG


28 
±imî_°¨t
();

29 
±imî_°›_™d_u¨t_¥öt
();

	@target_spw/shashtbl.c

23 
	~"jasmöe.h
"

25 
SHASHTBL
 
	gg_shashtbl
[
NUM_BANKS
];

34 
UINT32
 
	$hashfunc_RJ
(
UINT32
 c⁄° 
key
)

36 
UINT32
 
hash
 = 
key
;

38 
hash
 = (hash + 0x7ed55d16) + (hash << 12);

39 
hash
 = (hash ^ 0xc761c23c) ^ (hash >> 19);

40 
hash
 = (hash + 0x165667b1) + (hash << 5);

41 
hash
 = (hash + 0xd3a2646c) ^ (hash << 9);

42 
hash
 = (hash + 0xfd7046c5) + (hash << 3);

43 
hash
 = (hash ^ 0xb55a4f09) ^ (hash >> 16);

45  
hash
;

46 
	}
}

47 
	$shashtbl_öô
()

49 
UINT32
 
b™k
 = 0; b™k < 
NUM_BANKS
; bank++) {

50 
g_shashtbl
[
b™k
].
num_ñmts
 = 0;

51 
g_shashtbl
[
b™k
].
‰ì_node_poﬁ
 = 
NULL
;

53 
	`mem_£t_døm
(
HASH_NODE_ADDR
, 
NULL
, 
HASH_NODE_BYTES
);

54 
	`mem_£t_døm
(
HASH_BUCKET_ADDR
, 
NULL
, 
HASH_BUCKET_BYTES
);

55 
	}
}

56 
	$shashtbl_ö£π
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
key
, UINT32 c⁄° 
d©a
)

58 
hashnode_±r
 
√w_node
;

59 
UINT32
 
node_idx
 = 
g_shashtbl
[
b™k
].
num_ñmts
;

60 
UINT32
 
hash_vÆ
 = 
	`hashfunc_RJ
(
key
Ë% 
HASH_BUCKET_SIZE
;

62 
	`ASSERT
(
	`shashtbl_gë
(
b™k
, 
key
Ë=
INVALID
);

63 
	`ASSERT
(
node_idx
 < (
LOG_BLK_PER_BANK
 * 
PAGES_PER_BANK
));

64 
	`ASSERT
(
d©a
 < (
LOG_BLK_PER_BANK
 * 
PAGES_PER_BANK
));

66 i‡(
g_shashtbl
[
b™k
].
‰ì_node_poﬁ
 =
NULL
) {

67 
	`ASSERT
(
g_shashtbl
[
b™k
].
num_ñmts
 < (
LOG_BLK_PER_BANK
 * 
PAGES_PER_BANK
));

68 
√w_node
 = (
hashnode_±r
)(
HASH_NODE_ADDR
 + ((
b™k
 * (
LOG_BLK_PER_BANK
 + 
ISOL_BLK_PER_BANK
Ë* 
PAGES_PER_BLK
Ë+ 
node_idx
Ë* (
hashnode
));

70 
g_shashtbl
[
b™k
].
num_ñmts
++;

73 
√w_node
 = 
g_shashtbl
[
b™k
].
‰ì_node_poﬁ
;

74 
g_shashtbl
[
b™k
].
‰ì_node_poﬁ
 = (
hashnode_±r
)
	`ªad_døm_32
(&
√w_node
->
√xt
);

76 
	`ASSERT
((
UINT32
)
√w_node
 > 
DRAM_BASE
);

78 
hashnode_±r
 
äodïå
 = (hashnode_±r)
	`ªad_døm_32
(
HASH_BUCKET_ADDR
 + ((
b™k
 * 
HASH_BUCKET_SIZE
Ë+ 
hash_vÆ
) * (hashnode_ptr));

79 
hashnode
 
ãmp_node
 = {
key
, 
d©a
, 
äodïå
};

82 
	`mem_c›y
(
√w_node
, &
ãmp_node
, (
hashnode
));

83 
	`wrôe_døm_32
(
HASH_BUCKET_ADDR
 + (((
b™k
 * 
HASH_BUCKET_SIZE
Ë+ 
hash_vÆ
Ë* (
hashnode_±r
)), 
√w_node
);

84 
	}
}

85 
UINT32
 
	$shashtbl_gë
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
key
)

87 
hashnode_±r
 
node
;

88 
UINT32
 
hash_vÆ
;

90 
hash_vÆ
 = 
	`hashfunc_RJ
(
key
Ë% 
HASH_BUCKET_SIZE
;

91 
node
 = (
hashnode_±r
)
	`ªad_døm_32
(
HASH_BUCKET_ADDR
 + ((
b™k
 * 
HASH_BUCKET_SIZE
 + 
hash_vÆ
) * (hashnode_ptr)));

93 
node
) {

94 if(
	`ªad_døm_32
(
node
Ë=
key
) {

95  
	`ªad_døm_32
(&
node
->
d©a
);

97 
node
 = (
hashnode_±r
)
	`ªad_døm_32
(&node->
√xt
);

99  
INVALID
;

100 
	}
}

101 
	$shashtbl_ªmove
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
key
)

103 
hashnode_±r
 
node
;

104 
hashnode_±r
 
¥evnode
 = 
NULL
;

105 
UINT32
 
hash_vÆ
;

107 
hash_vÆ
 = 
	`hashfunc_RJ
(
key
Ë% 
HASH_BUCKET_SIZE
;

108 
node
 = (
hashnode_±r
)
	`ªad_døm_32
(
HASH_BUCKET_ADDR
 + ((
b™k
 * 
HASH_BUCKET_SIZE
 + 
hash_vÆ
) * (hashnode_ptr)));

111 
node
) {

112 if(
	`ªad_døm_32
(
node
Ë=
key
) {

113 if(
¥evnode
) {

114 
	`wrôe_døm_32
(&
¥evnode
->
√xt
, 
	`ªad_døm_32
(&
node
->next));

117 
hashnode_±r
 
äode
 = (hashnode_±r)
	`ªad_døm_32
(&
node
->
√xt
);

118 
	`wrôe_døm_32
(
HASH_BUCKET_ADDR
 + ((
b™k
 * 
HASH_BUCKET_SIZE
 + 
hash_vÆ
Ë* (
hashnode_±r
)), (
UINT32
)
äode
);

121 
	`wrôe_døm_32
(&
node
->
√xt
, 
g_shashtbl
[
b™k
].
‰ì_node_poﬁ
);

122 
g_shashtbl
[
b™k
].
‰ì_node_poﬁ
 = 
node
;

123 
	`ASSERT
(
	`shashtbl_gë
(
b™k
, 
key
Ë=
INVALID
);

126 
¥evnode
 = 
node
;

127 
node
 = (
hashnode_±r
)
	`ªad_døm_32
(&node->
√xt
);

129 
	`ASSERT
(0);

130 
	}
}

131 
	$shashtbl_upd©e
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
key
, UINT32 c⁄° 
√w_vÆ
)

133 
	`ASSERT
(
√w_vÆ
 !
INVALID
);

135 
hashnode_±r
 
node
;

136 
UINT32
 
hash_vÆ
;

137 #i‡
OPTION_ENABLE_ASSERT


138 
UINT32
 
föd_Êag
 = 
FALSE
;

140 
hash_vÆ
 = 
	`hashfunc_RJ
(
key
Ë% 
HASH_BUCKET_SIZE
;

141 
node
 = (
hashnode_±r
)
	`ªad_døm_32
(
HASH_BUCKET_ADDR
 + ((
b™k
 * 
HASH_BUCKET_SIZE
 + 
hash_vÆ
) * (hashnode_ptr)));

144 
node
) {

145 if(
	`ªad_døm_32
(
node
Ë=
key
) {

147 
	`wrôe_døm_32
(&
node
->
d©a
, 
√w_vÆ
);

148 #i‡
OPTION_ENABLE_ASSERT


149 
föd_Êag
 = 
TRUE
;

153 
node
 = (
hashnode_±r
)
	`ªad_døm_32
(&node->
√xt
);

155 
	`ASSERT
(
föd_Êag
 =
TRUE
);

156 
	}
}

	@target_spw/shashtbl.h

23 #i‚de‡
_SHASHTBL_H


24 
	#_SHASHTBL_H


	)

27 
	s_hashnode
 {

28 
UINT32
 
	mkey
;

29 
UINT32
 
	md©a
;

30 
_hashnode
* 
	m√xt
;

31 }
	thashnode
;

32 
hashnode
* 
	thashnode_±r
;

35 
	s_shashtbl
 {

36 
UINT32
 
	mnum_ñmts
;

37 
hashnode_±r
 
	m‰ì_node_poﬁ
;

38 }
	tSHASHTBL
;

44 
shashtbl_öô
();

45 
shashtbl_ö£π
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
key
, UINT32 c⁄° 
d©a
);

46 
shashtbl_ªmove
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
key
);

47 
shashtbl_upd©e
(
UINT32
 c⁄° 
b™k
, UINT32 c⁄° 
key
, UINT32 c⁄° 
√w_vÆ
);

48 
UINT32
 
shashtbl_gë
(UINT32 c⁄° 
b™k
, UINT32 c⁄° 
key
);

	@target_spw/target.h

20 #i‚de‡
TARGET_H


21 
	#TARGET_H


	)

23 #i‡
CLOCK_SPEED
 == 25000000

24 
	#PLL_CLK_CONFIG
 
PLL_25MHZ


	)

25 #ñi‡
CLOCK_SPEED
 == 30000000

26 
	#PLL_CLK_CONFIG
 
PLL_30MHZ


	)

27 #ñi‡
CLOCK_SPEED
 == 50000000

28 
	#PLL_CLK_CONFIG
 
PLL_50MHZ


	)

29 #ñi‡
CLOCK_SPEED
 == 60000000

30 
	#PLL_CLK_CONFIG
 
PLL_60MHZ


	)

31 #ñi‡
CLOCK_SPEED
 == 75000000

32 
	#PLL_CLK_CONFIG
 
PLL_75MHZ


	)

33 #ñi‡
CLOCK_SPEED
 == 100000000

34 
	#PLL_CLK_CONFIG
 
PLL_100MHZ


	)

35 #ñi‡
CLOCK_SPEED
 == 133000000

36 
	#PLL_CLK_CONFIG
 
PLL_133MHZ


	)

37 #ñi‡
CLOCK_SPEED
 == 150000000

38 
	#PLL_CLK_CONFIG
 
PLL_150MHZ


	)

39 #ñi‡
CLOCK_SPEED
 == 155000000

40 
	#PLL_CLK_CONFIG
 
PLL_155MHZ


	)

41 #ñi‡
CLOCK_SPEED
 == 160000000

42 
	#PLL_CLK_CONFIG
 
PLL_160MHZ


	)

43 #ñi‡
CLOCK_SPEED
 == 165000000

44 
	#PLL_CLK_CONFIG
 
PLL_165MHZ


	)

45 #ñi‡
CLOCK_SPEED
 == 170000000

46 
	#PLL_CLK_CONFIG
 
PLL_170MHZ


	)

47 #ñi‡
CLOCK_SPEED
 == 175000000

48 
	#PLL_CLK_CONFIG
 
PLL_175MHZ


	)

49 #ñi‡
CLOCK_SPEED
 == 180000000

50 
	#PLL_CLK_CONFIG
 
PLL_180MHZ


	)

53 
	#DRAM_BASE
 0x40000000

	)

54 
	#FREG_BASE
 0x60000000

55 
	#MREG_BASE
 0x50000000

56 
	#BS_BASE
 0x70000000

57 
	#GPIO_BASE
 0x83000000

58 
	#SRAM_BASE
 0x10000000

59 
	#ROM_BASE
 0x10000000

60 

	)

61 
	#SETREG
(
ADDR
, 
VAL
Ë*(vﬁ©ûê
UINT32
*)(ADDRË(UINT32)(VAL)

	)

62 
	#GETREG
(
ADDR
Ë(*(vﬁ©ûê
UINT32
*)(ADDR))

	)

64 
	#SRAM_SIZE
 (96*1024)

	)

66 #i‡
NAND_SPEC_SPEED
 =
NAND_SPEC_VERY_FAST


67 
	#PS_PER_FLASH_CYCLE
 20000

68 #ñi‡
NAND_SPEC_SPEED
 =
NAND_SPEC_FAST


	)

69 
	#PS_PER_FLASH_CYCLE
 25000

	)

70 #ñi‡
NAND_SPEC_SPEED
 =
NAND_SPEC_SLOW


71 
	#PS_PER_FLASH_CYCLE
 30000

	)

72 #ñi‡
NAND_SPEC_SPEED
 =
NAND_SPEC_DULL


73 
	#PS_PER_FLASH_CYCLE
 50000

	)

76 
	#PS_PER_CLOCK_CYCLE
 (1000000 / (
CLOCK_SPEED
 / 1000000))

	)

77 
	#PS_PER_HALF_CYCLE
 (
PS_PER_CLOCK_CYCLE
 / 2)

	)

79 #i‡
NAND_SPEC_SPEED
 =
NAND_SPEC_VERY_FAST


80 #i‡
PS_PER_CLOCK_CYCLE
 >= 10000

81 
	#CYCLE_PER_HOLD
 1

	)

83 
	#CYCLE_PER_HOLD
 2

	)

85 #ñi‡
NAND_SPEC_SPEED
 =
NAND_SPEC_DULL


86 
	#CYCLE_PER_HOLD
 ((15000 + 
PS_PER_CLOCK_CYCLE
 - 1Ë/ PS_PER_CLOCK_CYCLE)

	)

87 #ñi‡
PS_PER_CLOCK_CYCLE
 >= 12000

88 
	#CYCLE_PER_HOLD
 1

	)

90 
	#CYCLE_PER_HOLD
 2

	)

93 
	#PS_PER_HOLD
 (
PS_PER_CLOCK_CYCLE
 * 
CYCLE_PER_HOLD
)

	)

95 #i‡
PS_PER_FLASH_CYCLE
 < 
PS_PER_HOLD


96 
	#PS_PER_SETUP
 
PS_PER_CLOCK_CYCLE


	)

98 
	#PS_PER_SETUP
 (
PS_PER_FLASH_CYCLE
 - 
PS_PER_HOLD
)

	)

101 
	#_HALF_CYCLE_PER_SETUP
 ((
PS_PER_SETUP
 + 
PS_PER_HALF_CYCLE
 - 1Ë/ PS_PER_HALF_CYCLE)

	)

103 #i‡
_HALF_CYCLE_PER_SETUP
 == 1

104 
	#HALF_CYCLE_PER_SETUP
 2

105 

	)

106 #ñi‡
_HALF_CYCLE_PER_SETUP
 == 3

107 
	#HALF_CYCLE_PER_SETUP
 4

108 

	)

110 
	#HALF_CYCLE_PER_SETUP
 
_HALF_CYCLE_PER_SETUP


	)

114 
	#FLASH_PARAM_SETUP
 (
HALF_CYCLE_PER_SETUP
 - 2)

	)

116 
	#PLL_25MHZ
 (
	`PLL_F
(40-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(3))

117 
	#PLL_30MHZ
 (
	`PLL_F
(48-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(3))

118 
	#PLL_50MHZ
 (
	`PLL_F
(40-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(2))

119 
	#PLL_60MHZ
 (
	`PLL_F
(48-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(2))

120 
	#PLL_75MHZ
 (
	`PLL_F
(60-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(2))

121 
	#PLL_100MHZ
 (
	`PLL_F
(36-1Ë| 
	`PLL_R
(9-1Ë| 
	`PLL_OD
(1))

122 
	#PLL_133MHZ
 (
	`PLL_F
(48-1Ë| 
	`PLL_R
(9-1Ë| 
	`PLL_OD
(1))

123 
	#PLL_150MHZ
 (
	`PLL_F
(54-1Ë| 
	`PLL_R
(9-1Ë| 
	`PLL_OD
(1))

124 
	#PLL_155MHZ
 (
	`PLL_F
(56-1Ë| 
	`PLL_R
(9-1Ë| 
	`PLL_OD
(1))

125 
	#PLL_160MHZ
 (
	`PLL_F
(64-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(1))

126 
	#PLL_165MHZ
 (
	`PLL_F
(66-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(1))

127 
	#PLL_170MHZ
 (
	`PLL_F
(68-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(1))

128 
	#PLL_175MHZ
 (
	`PLL_F
(63-1Ë| 
	`PLL_R
(9-1Ë| 
	`PLL_OD
(1))

129 
	#PLL_180MHZ
 (
	`PLL_F
(72-1Ë| 
	`PLL_R
(10-1Ë| 
	`PLL_OD
(1))

130 

	)

131 
	#CLOCK_DIV_0001
 0

	)

132 
	#CLOCK_DIV_0002
 1

	)

133 
	#CLOCK_DIV_0032
 5

	)

134 
	#CLOCK_DIV_1024
 10

	)

135 
	#CLOCK_DIV_PLL
 0xFF

	)

137 
	#CLOCK_DIV_0001_SPEED
 50000000

	)

138 
	#CLOCK_DIV_0002_SPEED
 (
CLOCK_DIV_0001_SPEED
 >> 
CLOCK_DIV_0002
)

	)

139 
	#CLOCK_DIV_0032_SPEED
 (
CLOCK_DIV_0001_SPEED
 >> 
CLOCK_DIV_0032
)

	)

140 
	#CLOCK_DIV_1024_SPEED
 (
CLOCK_DIV_0001_SPEED
 >> 
CLOCK_DIV_1024
)

	)

142 
	~"≥ri.h
"

143 
	~"sdøm.h
"

145 #i‚de‡
PROGRAM_INSTALLER


151 
	#EQ_SIZE
 128

	)

152 
	#EQ_MARGIN
 4

	)

159 #ifde‡
__GNUC__


161 
UINT32
 
dißbÀ_úq
();

162 
íabÀ_úq
();

163 
UINT32
 
dißbÀ_fiq
();

164 
íabÀ_fiq
();

168 
	#íabÀ_úq
 
__íabÀ_úq


169 
	#dißbÀ_úq
 
__dißbÀ_úq


	)

170 
	#íabÀ_fiq
 
__íabÀ_fiq


	)

171 
	#dißbÀ_fiq
 
__dißbÀ_fiq


	)

175 
íabÀ_öãºu±
();

176 
dißbÀ_öãºu±
();

178 #i‡
OPTION_ENABLE_ASSERT


179 
	#ASSERT
(
X
Ë\

	)

181 i‡(!(
	gX
)) \

183 
u¨t_¥ötf
("as£πi⁄ faû: %s,Üöe# %d", 
__FILE__
, 
__LINE__
); \

184 
Àd_blök
(); \

189 
	#ASSERT
(
X
)

	)

	@target_spw/uart.c

20 
	~"jasmöe.h
"

22 #i‡
OPTION_UART_DEBUG


24 
	#TXFIFO_FREE_CNT
 ((
	`GETREG
(
UART_FIFOCNT
) >> 6) & 0x03F)

25 
	#RXFIFO_PENDING_CNT
 (
	`GETREG
(
UART_FIFOCNT
) & 0x03F)

26 

	)

27 
	$u¨t_txbyã
(
UINT8
 
d©a
)

29 
TXFIFO_FREE_CNT
 =
UART_TXFIFO_FULL
);

30 
	`SETREG
(
UART_FIFODATA
, (
UINT32
)
d©a
);

31 
	}
}

33 
UINT8
 
	$u¨t_rxbyã
()

35 
RXFIFO_PENDING_CNT
 =
UART_RXFIFO_EMPTY
);

36  
	`GETREG
(
UART_FIFODATA
);

37 
	}
}

39 
	$u¨t_öô
()

41 
UINT32
 
u¨t_˘æ
;

42 
UINT32
 
˛kdiv_baudøã
;

44 
	`SETREG
(
UART_FIFOCTRL
, 0x03);

46 
	`ASSERT
((
	`GETREG
(
UART_FIFOCNT
) == 0x800));

48 
u¨t_˘æ
 = (
WORDLEN_8BIT
 << 0)

49 | (
ONE_STOPBIT
 << 2)

50 | (
NO_PARITY
 << 3)

58 
	`SETREG
(
UART_CTRL
, 
u¨t_˘æ
);

60 
˛kdiv_baudøã
 = 
	`GETREG
(
UART_BAUDRATE
) & 0xFFFF0000;

61 
˛kdiv_baudøã
 |(
UINT32
Ë(1 << 21Ë* (
UART_COMMBAUDRATE
 / 100Ë/ (
CLOCK_SPEED
/200) + 1;

62 
	`SETREG
(
UART_BAUDRATE
, 
˛kdiv_baudøã
);

63 
	`SETREG
(
UART_FIFOCTRL
, 0x00000000);

65 
u¨t_˘æ
 = uart_ctrl | (1 << 6);

66 
	`SETREG
(
UART_CTRL
, 
u¨t_˘æ
);

67 
	}
}

68 
	$u¨t_¥öt
(* 
°rög
)

72 
	`u¨t_txbyã
(*
°rög
);

74 
°rög
++;

76 i‡(*
°rög
 == '\0')

80 
	`u¨t_txbyã
('\r');

81 
	`u¨t_txbyã
('\n');

82 
	}
}

83 
	~<°dio.h
>

85 * 
	tˇddr_t
;

86 
ˇddr_t
 
_sbrk
 ( 
ö¸
 );

88 
	$u¨t_¥öt_32
(
UINT32
 
time
)

90 
buf
[21];

92 
	`•rötf
(
buf
, "%u", 
time
);

95 
	`u¨t_¥öt
(
buf
);

96 
	}
}

97 
	$u¨t_¥öt_hex
(
UINT32
 
num
)

99 
°r
[8];

100 
UINT8
 
ªmaö
=0;

101 
UINT8
 
˙t
 = 0;

103 
˙t
 < 8) {

104 
ªmaö
 = 
num
%16;

105 
num
 =Çum/16;

106 i‡(
ªmaö
<10)

107 
°r
[
˙t
]=
ªmaö
+48;

109 
°r
[
˙t
]=
ªmaö
+55;

110 
˙t
++;

112 
˙t
--;

113 
	`u¨t_txbyã
('0');

114 
	`u¨t_txbyã
('x');

118 
	`u¨t_txbyã
(
°r
[
˙t
]);

119 i‡(
˙t
 == 0) {

122 
˙t
--;

125 
	`u¨t_txbyã
('\r');

126 
	`u¨t_txbyã
('\n');

127 
	}
}

128 
	~<°d¨g.h
>

129 
	$u¨t_¥ötf
(c⁄° * 
msg
, ...)

131 
	`fÊush
(
°dout
);

133 
out
[256];

134 
va_li°
 
≠
;

135 
	`va_°¨t
(
≠
, 
msg
);

136 
Àn
 = 
	`v¢¥ötf
(
out
, (out), 
msg
, 
≠
);

137 
	`va_íd
(
≠
);

138 
out
[
Àn
] = '\0';

139 
	`u¨t_¥öt
(
out
);

140 
	}
}

	@tc/tc_synth.c

22 
	~"jasmöe.h
"

24 #i‡
OPTION_FTL_TEST
 =
TRUE


26 
	~<°dlib.h
>

28 
	#IO_LIMIT
 (
NUM_LSECTORS
)

	)

29 
	#RANDOM_SEED
 (
IO_LIMIT
)

	)

30 
	#NUM_PSECTORS_4KB
 ((4 * 1024Ë/ 512)

	)

31 
	#NUM_PSECTORS_8KB
 (
NUM_PSECTORS_4KB
 << 1)

	)

32 
	#NUM_PSECTORS_16KB
 (
NUM_PSECTORS_8KB
 << 1)

	)

33 
	#NUM_PSECTORS_32KB
 (
NUM_PSECTORS_16KB
 << 1)

	)

34 
	#NUM_PSECTORS_64KB
 (
NUM_PSECTORS_32KB
 << 1)

	)

35 
	#NUM_PSECTORS_128KB
 ((128 * 1024Ë/ 512)

	)

36 
	#NUM_PSECTORS_256KB
 ((256 * 1024Ë/ 512)

	)

38 
UINT32
 
g_·l_ªad_buf_id
;

39 
UINT32
 
g_·l_wrôe_buf_id
;

41 
tc_wrôe_£q
(c⁄° 
UINT32
 
°¨t_l¢
, c⁄° UINT32 
io_num
, c⁄° UINT32 
£˘‹_size
);

42 
tc_wrôe_ønd
(c⁄° 
UINT32
 
°¨t_l¢
, c⁄° UINT32 
io_num
, c⁄° UINT32 
£˘‹_size
);

43 
fûlup_d©a•a˚
();

44 
agög_wôh_rw
(
UINT32
 
io_˙t
);

117 
	$·l_ã°
()

119 
	`u¨t_¥öt
("start ftlÅest...");

121 
	`tc_wrôe_£q
(0, 128, 
NUM_PSECTORS_32KB
);

125 
	}
}

126 
	$agög_wôh_rw
(
UINT32
 
io_˙t
)

128 
UINT32
 
lba
;

129 
UINT32
 c⁄° 
num_£˘‹s
 = 
SECTORS_PER_PAGE
 * 
NUM_BANKS
;

130 
	`§™d
(
RANDOM_SEED
);

132 
	`u¨t_¥ötf
("startáging withÑandom writes");

133 
io_˙t
 > 0) {

135 
lba
 = 
	`ønd
(Ë% 
IO_LIMIT
;

136 }
lba
 >(
NUM_LSECTORS
 - 
num_£˘‹s
));

138 
lba
 =Üb®/ 
SECTORS_PER_PAGE
 * SECTORS_PER_PAGE;

139 
	`·l_wrôe
(
lba
, 
num_£˘‹s
);

141 
io_˙t
--;

143 
	`u¨t_¥ötf
("complete!");

144 
	}
}

146 
	$fûlup_d©a•a˚
()

148 
UINT32
 
lba
 = 0;

149 
UINT32
 c⁄° 
num_£˘‹s
 = 
SECTORS_PER_PAGE
 * 
NUM_BANKS
;

151 
	`u¨t_¥ötf
("start fillÉntire data space");

152 
lba
 < (
NUM_LSECTORS
 - 
num_£˘‹s
))

154 
	`·l_wrôe
(
lba
, 
num_£˘‹s
);

155 
lba
 +
num_£˘‹s
;

157 
	`u¨t_¥ötf
("complete!");

158 
	}
}

159 
	$tc_wrôe_£q
(c⁄° 
UINT32
 
°¨t_l¢
, c⁄° UINT32 
io_num
, c⁄° UINT32 
£˘‹_size
)

161 
UINT32
 
i
, 
j
, 
wr_buf_addr
, 
rd_buf_addr
, 
d©a
;

162 
UINT32
 
lba
, 
num_£˘‹s
 = 
£˘‹_size
;

163 
UINT32
 
io_˙t
 = 
io_num
;

164 
UINT32
 c⁄° 
°¨t_lba
 = 
°¨t_l¢
;

167 
	`Àd
(0);

170 
UINT32
 
lo›
 = 0;Üoop < 5;Üoop++)

172 
wr_buf_addr
 = 
WR_BUF_ADDR
;

173 
d©a
 = 0;

174 
lba
 = 
°¨t_lba
;

176 
	`u¨t_¥öt_32
(
lo›
); 
	`u¨t_¥öt
("");

178 
i
 = 0; i < 
io_˙t
; i++)

180 
wr_buf_addr
 = 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
Ë+ ((
lba
 % 
SECTORS_PER_PAGE
Ë* 
BYTES_PER_SECTOR
);

181 
j
 = 0; j < 
num_£˘‹s
; j++)

183 
	`mem_£t_døm
(
wr_buf_addr
, 
d©a
, 
BYTES_PER_SECTOR
);

185 
wr_buf_addr
 +
BYTES_PER_SECTOR
;

187 i‡(
wr_buf_addr
 >
WR_BUF_ADDR
 + 
WR_BUF_BYTES
)

189 
wr_buf_addr
 = 
WR_BUF_ADDR
;

191 
d©a
++;

194 
	`u¨t_¥ötf
("Wrôêã°Ü≤ %d\n", 
lba
);

195 
	`·l_wrôe_block
(
lba
, 
num_£˘‹s
);

198 
lba
 +
num_£˘‹s
;

200 i‡(
lba
 >(
UINT32
)
NUM_LSECTORS
)

202 
	`u¨t_¥öt
("adjustÜba because of out ofÜba");

203 
lba
 = 0;

208 
rd_buf_addr
 = 
RD_BUF_ADDR
;

209 
d©a
 = 0;

210 
lba
 = 
°¨t_lba
;

211 
num_£˘‹s
 = 
	`MIN
“um_£˘‹s, 
NUM_RD_BUFFERS
 * 
SECTORS_PER_PAGE
);

213 
i
 = 0; i < 
io_˙t
; i++)

215 
rd_buf_addr
 = 
	`RD_BUF_PTR
(
g_·l_ªad_buf_id
Ë+ ((
lba
 % 
SECTORS_PER_PAGE
Ë* 
BYTES_PER_SECTOR
);

217 
	`u¨t_¥ötf
("RódÅe°Ü≤ %d", 
lba
);

218 
	`·l_ªad_block
(
lba
, 
num_£˘‹s
);

220 
	`Êash_föish
();

223 
j
 = 0; j < 
num_£˘‹s
; j++)

225 
UINT32
 
ßm∂e
 = 
	`ªad_døm_32
(
rd_buf_addr
);

227 i‡(
ßm∂e
 !
d©a
)

229 
	`u¨t_¥ötf
("·»ã° faû...io#: %d, %d", 
lba
, 
num_£˘‹s
);

230 
	`u¨t_¥ötf
("ßm∂êd©®%d should bê%d", 
ßm∂e
, 
d©a
);

231 
	`Àd_blök
();

234 
rd_buf_addr
 +
BYTES_PER_SECTOR
;

236 i‡(
rd_buf_addr
 >
RD_BUF_ADDR
 + 
RD_BUF_BYTES
)

238 
rd_buf_addr
 = 
RD_BUF_ADDR
;

240 
d©a
++;

243 
lba
 +
num_£˘‹s
;

245 i‡(
lba
 >
IO_LIMIT
 + 
num_£˘‹s
)

247 
lba
 = 0;

251 
	`·l_Êush
();

252 
	}
}

253 
	$tc_wrôe_ønd
(c⁄° 
UINT32
 
°¨t_l¢
, c⁄° UINT32 
io_num
, c⁄° UINT32 
£˘‹_size
)

255 
UINT32
 
i
, 
j
, 
wr_buf_addr
, 
rd_buf_addr
, 
d©a
, 
r_d©a
;

256 
UINT32
 
lba
, 
num_£˘‹s
 = 
£˘‹_size
;

257 
UINT32
 
io_˙t
 = 
io_num
;

260 
	`Àd
(0);

261 
	`§™d
(
RANDOM_SEED
);

263 
UINT32
 
lo›
 = 0;Üoop < 1;Üoop++) {

264 
wr_buf_addr
 = 
WR_BUF_ADDR
;

265 
d©a
 = 0;

266 
	`u¨t_¥ötf
("ã°Üo› c¡: %d", 
lo›
);

268 
i
 = 0; i < 
io_˙t
; i++) {

270 
lba
 = 
	`ønd
(Ë% 
IO_LIMIT
;

271 }
lba
 + 
num_£˘‹s
 >
IO_LIMIT
);

273 
wr_buf_addr
 = 
	`WR_BUF_PTR
(
g_·l_wrôe_buf_id
Ë+ ((
lba
 % 
SECTORS_PER_PAGE
Ë* 
BYTES_PER_SECTOR
);

274 
r_d©a
 = 
d©a
;

276 
j
 = 0; j < 
num_£˘‹s
; j++) {

277 
	`mem_£t_døm
(
wr_buf_addr
, 
d©a
, 
BYTES_PER_SECTOR
);

279 
wr_buf_addr
 +
BYTES_PER_SECTOR
;

281 i‡(
wr_buf_addr
 >
WR_BUF_ADDR
 + 
WR_BUF_BYTES
) {

282 
wr_buf_addr
 = 
WR_BUF_ADDR
;

284 
d©a
++;

287 
	`·l_wrôe
(
lba
, 
num_£˘‹s
);

289 
rd_buf_addr
 = 
	`RD_BUF_PTR
(
g_·l_ªad_buf_id
Ë+ ((
lba
 % 
SECTORS_PER_PAGE
Ë* 
BYTES_PER_SECTOR
);

291 
	`·l_ªad
(
lba
, 
num_£˘‹s
);

294 
	`Êash_föish
();

296 
j
 = 0; j < 
num_£˘‹s
; j++) {

297 
UINT32
 
ßm∂e
 = 
	`ªad_døm_32
(
rd_buf_addr
);

299 i‡(
ßm∂e
 !
r_d©a
) {

300 
	`u¨t_¥ötf
("·»ã° faû...io#: %d, %d", 
lba
, 
num_£˘‹s
);

301 
	`u¨t_¥ötf
("ßm∂êd©®%d should bê%d", 
ßm∂e
, 
r_d©a
);

302 
	`Àd_blök
();

304 
rd_buf_addr
 +
BYTES_PER_SECTOR
;

306 i‡(
rd_buf_addr
 >
RD_BUF_ADDR
 + 
RD_BUF_BYTES
) {

307 
rd_buf_addr
 = 
RD_BUF_ADDR
;

309 
r_d©a
++;

313 
	`·l_Êush
();

314 
	}
}

	@/usr/include/stdio.h

23 #i‚de‡
_STDIO_H


25 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	~<bôs/ty≥s.h
>

36 
	#__√ed_FILE


	)

37 
	#__√ed___FILE


	)

41 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_SVID
 || deföed 
__USE_POSIX
 \

51 || 
deföed
 
	g__USE_BSD
 || deföed 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

52 || 
deföed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_deföed
 1

	)

58 #unde‡
__√ed_FILE


61 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_deföed
 1

	)

68 #unde‡
__√ed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


77 #ifde‡
__GNUC__


78 #i‚de‡
_VA_LIST_DEFINED


79 
_G_va_li°
 
	tva_li°
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<°d¨g.h
>

87 #ifde‡
__USE_XOPEN2K8


88 #i‚de‡
__off_t_deföed


89 #i‚de‡
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_deföed


	)

96 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_deföed


	)

101 #i‚de‡
__ssize_t_deföed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_deföed


	)

108 
__BEGIN_NAMESPACE_STD


109 #i‚de‡
__USE_FILE_OFFSET64


110 
_G_Âos_t
 
	tÂos_t
;

112 
_G_Âos64_t
 
	tÂos_t
;

114 
__END_NAMESPACE_STD


115 #ifde‡
__USE_LARGEFILE64


116 
_G_Âos64_t
 
	tÂos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #i‚de‡
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #i‚de‡
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifde‡
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


151 
	#P_tmpdú
 "/tmp"

	)

164 
	~<bôs/°dio_lim.h
>

168 
_IO_FILE
 *
°dö
;

169 
_IO_FILE
 *
°dout
;

170 
_IO_FILE
 *
°dîr
;

172 
	#°dö
 
°dö


	)

173 
	#°dout
 
°dout


	)

174 
	#°dîr
 
°dîr


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$ªmove
 (c⁄° *
__fûíame
Ë
__THROW
;

180 
	$ª«me
 (c⁄° *
__ﬁd
, c⁄° *
__√w
Ë
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifde‡
__USE_ATFILE


185 
	$ª«mót
 (
__ﬁdfd
, c⁄° *
__ﬁd
, 
__√wfd
,

186 c⁄° *
__√w
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #i‚de‡
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

197 #ifde‡
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

200 
	#tmpfûe
 
tmpfûe64


	)

204 #ifde‡
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

209 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifde‡
__USE_MISC


215 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

219 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


227 *
	$ãm≤am
 (c⁄° *
__dú
, c⁄° *
__pfx
)

228 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`f˛o£
 (
FILE
 *
__°ªam
);

242 
	`fÊush
 (
FILE
 *
__°ªam
);

243 
__END_NAMESPACE_STD


245 #ifde‡
__USE_MISC


252 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

255 #ifde‡
__USE_GNU


262 
	`f˛o£Æl
 ();

266 
__BEGIN_NAMESPACE_STD


267 #i‚de‡
__USE_FILE_OFFSET64


272 
FILE
 *
	$f›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

273 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

278 
FILE
 *
	$‰e›í
 (c⁄° *
__ª°ri˘
 
__fûíame
,

279 c⁄° *
__ª°ri˘
 
__modes
,

280 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

282 #ifde‡
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
f›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

284 c⁄° *
__ª°ri˘
 
__modes
), 
f›í64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (c⁄° *
__ª°ri˘
 
__fûíame
,

287 c⁄° *
__ª°ri˘
 
__modes
,

288 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

289 
__wur
;

291 
	#f›í
 
f›í64


	)

292 
	#‰e›í
 
‰e›í64


	)

295 
__END_NAMESPACE_STD


296 #ifde‡
__USE_LARGEFILE64


297 
FILE
 *
	$f›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

298 c⁄° *
__ª°ri˘
 
__modes
Ë
__wur
;

299 
FILE
 *
	$‰e›í64
 (c⁄° *
__ª°ri˘
 
__fûíame
,

300 c⁄° *
__ª°ri˘
 
__modes
,

301 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fd›í
 (
__fd
, c⁄° *
__modes
Ë
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

313 c⁄° *
__ª°ri˘
 
__modes
,

314 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

317 #ifde‡
__USE_XOPEN2K8


319 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, c⁄° *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

337 
__modes
, 
size_t
 
__n
Ë
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

344 
size_t
 
__size
Ë
__THROW
;

347 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

357 c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

362 
	`¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...);

364 
	$•rötf
 (*
__ª°ri˘
 
__s
,

365 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

371 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

372 
_G_va_li°
 
__¨g
);

377 
	`v¥ötf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

379 
	$v•rötf
 (*
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

380 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

387 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

388 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

390 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

391 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

392 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifde‡
__USE_GNU


399 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, c⁄° *__ª°ri˘ 
__f
,

400 
_G_va_li°
 
__¨g
)

401 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

402 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

403 c⁄° *
__ª°ri˘
 
__fmt
, ...)

404 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

405 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

406 c⁄° *
__ª°ri˘
 
__fmt
, ...)

407 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

410 #ifde‡
__USE_XOPEN2K8


412 
	$vd¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
,

413 
_G_va_li°
 
__¨g
)

414 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

415 
	$d¥ötf
 (
__fd
, c⁄° *
__ª°ri˘
 
__fmt
, ...)

416 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

426 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

431 
	$sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

433 
	$ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

434 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

436 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

437 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

438 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

439 #ifde‡
__REDIRECT


443 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

444 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

445 
__isoc99_fsˇnf
Ë
__wur
;

446 
	`__REDIRECT
 (
sˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

447 
__isoc99_sˇnf
Ë
__wur
;

448 
	`__REDIRECT_NTH
 (
ssˇnf
, (c⁄° *
__ª°ri˘
 
__s
,

449 c⁄° *
__ª°ri˘
 
__f‹m©
, ...),

450 
__isoc99_ssˇnf
);

452 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

453 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

454 
	$__isoc99_sˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

455 
	$__isoc99_ssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

456 c⁄° *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

457 
	#fsˇnf
 
__isoc99_fsˇnf


	)

458 
	#sˇnf
 
__isoc99_sˇnf


	)

459 
	#ssˇnf
 
__isoc99_ssˇnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, c⁄° *__ª°ri˘ 
__f‹m©
,

472 
_G_va_li°
 
__¨g
)

473 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

479 
	$vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

480 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

483 
	$vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

484 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

485 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

487 #i‡!
deföed
 
__USE_GNU
 \

488 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

489 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

490 #ifde‡
__REDIRECT


494 
	`__REDIRECT
 (
vfsˇnf
,

495 (
FILE
 *
__ª°ri˘
 
__s
,

496 c⁄° *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

497 
__isoc99_vfsˇnf
)

498 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

499 
	`__REDIRECT
 (
vsˇnf
, (c⁄° *
__ª°ri˘
 
__f‹m©
,

500 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

501 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

502 
	`__REDIRECT_NTH
 (
vssˇnf
,

503 (c⁄° *
__ª°ri˘
 
__s
,

504 c⁄° *
__ª°ri˘
 
__f‹m©
,

505 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

506 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

508 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

509 c⁄° *
__ª°ri˘
 
__f‹m©
,

510 
_G_va_li°
 
__¨g
Ë
__wur
;

511 
	$__isoc99_vsˇnf
 (c⁄° *
__ª°ri˘
 
__f‹m©
,

512 
_G_va_li°
 
__¨g
Ë
__wur
;

513 
	$__isoc99_vssˇnf
 (c⁄° *
__ª°ri˘
 
__s
,

514 c⁄° *
__ª°ri˘
 
__f‹m©
,

515 
_G_va_li°
 
__¨g
Ë
__THROW
;

516 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

517 
	#vsˇnf
 
__isoc99_vsˇnf


	)

518 
	#vssˇnf
 
__isoc99_vssˇnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fgëc
 (
FILE
 *
__°ªam
);

532 
	`gëc
 (
FILE
 *
__°ªam
);

538 
	`gëch¨
 ();

539 
__END_NAMESPACE_STD


543 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

545 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


550 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

551 
	`gëch¨_u∆ocked
 ();

554 #ifde‡
__USE_MISC


561 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

565 
__BEGIN_NAMESPACE_STD


573 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

574 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putch¨
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

587 #ifde‡
__USE_MISC


594 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

597 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


602 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 
	`putch¨_u∆ocked
 (
__c
);

607 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 \

608 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

610 
	`gëw
 (
FILE
 *
__°ªam
);

613 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

623 
__wur
;

625 #i‡!
deföed
 
__USE_ISOC11
 \

626 || (
deföed
 
__˝lu•lus
 && __cplusplus <= 201103L)

638 *
	$gës
 (*
__s
Ë
__wur
 
__©åibuã_dïªˇãd__
;

640 
__END_NAMESPACE_STD


642 #ifde‡
__USE_GNU


649 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

650 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

668 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

669 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

670 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

678 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

679 
size_t
 *
__ª°ri˘
 
__n
,

680 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`Âuts
 (c⁄° *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

695 
	`puts
 (c⁄° *
__s
);

702 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

709 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

715 
size_t
 
	`fwrôe
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

716 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifde‡
__USE_GNU


726 
	`Âuts_u∆ocked
 (c⁄° *
__ª°ri˘
 
__s
,

727 
FILE
 *
__ª°ri˘
 
__°ªam
);

730 #ifde‡
__USE_MISC


737 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

739 
size_t
 
	`fwrôe_u∆ocked
 (c⁄° *
__ª°ri˘
 
__±r
, size_à
__size
,

740 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

754 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

759 
	`ªwöd
 (
FILE
 *
__°ªam
);

760 
__END_NAMESPACE_STD


767 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


768 #i‚de‡
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

778 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

780 #ifde‡
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#·ñlo
 
·ñlo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #i‚de‡
__USE_FILE_OFFSET64


798 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

803 
	`f£ços
 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
);

805 #ifde‡
__REDIRECT


806 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

807 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

808 
	`__REDIRECT
 (
f£ços
,

809 (
FILE
 *
__°ªam
, c⁄° 
Âos_t
 *
__pos
), 
f£ços64
);

811 
	#fgëpos
 
fgëpos64


	)

812 
	#f£ços
 
f£ços64


	)

815 
__END_NAMESPACE_STD


817 #ifde‡
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

819 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

820 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

821 
	`f£ços64
 (
FILE
 *
__°ªam
, c⁄° 
Âos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

830 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifde‡
__USE_MISC


835 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

836 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

837 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`≥º‹
 (c⁄° *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<bôs/sys_îæi°.h
>

856 #ifdef 
__USE_POSIX


858 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

861 #ifde‡
__USE_MISC


863 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

867 #i‡(
deföed
 
__USE_POSIX2
 || deföed 
__USE_SVID
 || deföed 
__USE_BSD
 || \

868 
deföed
 
__USE_MISC
)

873 
FILE
 *
	$p›í
 (c⁄° *
__comm™d
, c⁄° *
__modes
Ë
__wur
;

879 
	`p˛o£
 (
FILE
 *
__°ªam
);

883 #ifdef 
__USE_POSIX


885 *
	$˘îmid
 (*
__s
Ë
__THROW
;

889 #ifde‡
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob°ack
;

899 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

900 c⁄° *
__ª°ri˘
 
__f‹m©
, ...)

901 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

902 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

903 c⁄° *
__ª°ri˘
 
__f‹m©
,

904 
_G_va_li°
 
__¨gs
)

905 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

909 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


913 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

917 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

920 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

923 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


927 
	#__√ed_gë›t


	)

928 
	~<gë›t.h
>

933 #ifde‡
__USE_EXTERN_INLINES


934 
	~<bôs/°dio.h
>

936 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


937 
	~<bôs/°dio2.h
>

939 #ifde‡
__LDBL_COMPAT


940 
	~<bôs/°dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #i‚def 
_STDLIB_H


24 
	~<„©uªs.h
>

27 
	#__√ed_size_t


	)

28 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


29 
	#__√ed_wch¨_t


	)

30 
	#__√ed_NULL


	)

32 
	~<°ddef.h
>

34 
	g__BEGIN_DECLS


36 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


37 
	#_STDLIB_H
 1

	)

39 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


41 
	~<bôs/waôÊags.h
>

42 
	~<bôs/waô°©us.h
>

44 #ifde‡
__USE_BSD


49 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


50 
	#__WAIT_INT
(
°©us
) \

51 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

52 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

54 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

62 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
waô
 *
	m__u±r
;

70 *
	m__ùå
;

71 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

85 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

90 #ifde‡
__WIFCONTINUED


91 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquŸ
;

100 
	mªm
;

101 } 
	tdiv_t
;

104 #i‚de‡
__ldiv_t_deföed


107 
	mquŸ
;

108 
	mªm
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_deföed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


115 
__BEGIN_NAMESPACE_C99


117 
__exãnsi⁄__
 struct

119 
	mquŸ
;

120 
	mªm
;

121 } 
	tŒdiv_t
;

122 
	#__Œdiv_t_deföed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

139 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (c⁄° *
__≈å
)

145 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

147 
	$©oi
 (c⁄° *
__≈å
)

148 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

150 
	$©ﬁ
 (c⁄° *
__≈å
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

152 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__exãnsi⁄__
 
	$©ﬁl
 (c⁄° *
__≈å
)

158 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$°πod
 (c⁄° *
__ª°ri˘
 
__≈å
,

165 **
__ª°ri˘
 
__íd±r
)

166 
__THROW
 
	`__n⁄nuŒ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$°πof
 (c⁄° *
__ª°ri˘
 
__≈å
,

173 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

175 
	$°πﬁd
 (c⁄° *
__ª°ri˘
 
__≈å
,

176 **
__ª°ri˘
 
__íd±r
)

177 
__THROW
 
	`__n⁄nuŒ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$°πﬁ
 (c⁄° *
__ª°ri˘
 
__≈å
,

184 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

185 
__THROW
 
	`__n⁄nuŒ
 ((1));

187 
	$°πoul
 (c⁄° *
__ª°ri˘
 
__≈å
,

188 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

189 
__THROW
 
	`__n⁄nuŒ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifde‡
__USE_BSD


194 
__exãnsi⁄__


195 
	$°πoq
 (c⁄° *
__ª°ri˘
 
__≈å
,

196 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

197 
__THROW
 
	`__n⁄nuŒ
 ((1));

199 
__exãnsi⁄__


200 
	$°πouq
 (c⁄° *
__ª°ri˘
 
__≈å
,

201 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

202 
__THROW
 
	`__n⁄nuŒ
 ((1));

205 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__exãnsi⁄__


209 
	$°πﬁl
 (c⁄° *
__ª°ri˘
 
__≈å
,

210 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

211 
__THROW
 
	`__n⁄nuŒ
 ((1));

213 
__exãnsi⁄__


214 
	$°πouŒ
 (c⁄° *
__ª°ri˘
 
__≈å
,

215 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

216 
__THROW
 
	`__n⁄nuŒ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifde‡
__USE_GNU


235 
	~<xloˇÀ.h
>

239 
	$°πﬁ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

240 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

241 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

243 
	$°πoul_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

244 **
__ª°ri˘
 
__íd±r
,

245 
__ba£
, 
__loˇÀ_t
 
__loc
)

246 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

248 
__exãnsi⁄__


249 
	$°πﬁl_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

250 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

251 
__loˇÀ_t
 
__loc
)

252 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

254 
__exãnsi⁄__


255 
	$°πouŒ_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

256 **
__ª°ri˘
 
__íd±r
,

257 
__ba£
, 
__loˇÀ_t
 
__loc
)

258 
__THROW
 
	`__n⁄nuŒ
 ((1, 4));

260 
	$°πod_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

261 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

262 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

264 
	$°πof_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

265 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

266 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

268 
	$°πﬁd_l
 (c⁄° *
__ª°ri˘
 
__≈å
,

269 **
__ª°ri˘
 
__íd±r
,

270 
__loˇÀ_t
 
__loc
)

271 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

275 #ifde‡
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__exã∫_ölöe
 

278 
	`__NTH
 (
	$©oi
 (c⁄° *
__≈å
))

280  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

281 
	}
}

282 
__exã∫_ölöe
 

283 
__NTH
 (
	$©ﬁ
 (c⁄° *
__≈å
))

285  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__exãnsi⁄__
 
__exã∫_ölöe
 

292 
__NTH
 (
	$©ﬁl
 (c⁄° *
__≈å
))

294  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

308 
	$a64l
 (c⁄° *
__s
)

309 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

313 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


314 
	~<sys/ty≥s.h
>

321 
	$øndom
 (Ë
__THROW
;

324 
	$§™dom
 (
__£ed
Ë
__THROW
;

330 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

331 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

335 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

338 #ifde‡
__USE_MISC


343 
	søndom_d©a


345 
öt32_t
 *
Âå
;

346 
öt32_t
 *
Ωå
;

347 
öt32_t
 *
°©e
;

348 
ønd_ty≥
;

349 
ønd_deg
;

350 
ønd_£p
;

351 
öt32_t
 *
íd_±r
;

354 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

355 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

357 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

358 
__THROW
 
	`__n⁄nuŒ
 ((2));

360 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

361 
size_t
 
__°©ñí
,

362 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

363 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

365 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

366 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

367 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$ønd
 (Ë
__THROW
;

376 
	$§™d
 (
__£ed
Ë
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifde‡
__USE_POSIX


381 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

385 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


389 
	$dønd48
 (Ë
__THROW
;

390 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

393 
	$Ã™d48
 (Ë
__THROW
;

394 
	$ƒ™d48
 (
__xsubi
[3])

395 
__THROW
 
	`__n⁄nuŒ
 ((1));

398 
	$mønd48
 (Ë
__THROW
;

399 
	$jønd48
 (
__xsubi
[3])

400 
__THROW
 
	`__n⁄nuŒ
 ((1));

403 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__n⁄nuŒ
 ((1));

406 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

408 #ifde‡
__USE_MISC


412 
	sdønd48_d©a


414 
__x
[3];

415 
__ﬁd_x
[3];

416 
__c
;

417 
__öô
;

418 
__exãnsi⁄__
 
__a
;

423 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

424 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

425 
	$î™d48_r
 (
__xsubi
[3],

426 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

427 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

430 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

431 *
__ª°ri˘
 
__ªsu…
)

432 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

433 
	$ƒ™d48_r
 (
__xsubi
[3],

434 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

435 *
__ª°ri˘
 
__ªsu…
)

436 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

439 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

440 *
__ª°ri˘
 
__ªsu…
)

441 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

442 
	$jønd48_r
 (
__xsubi
[3],

443 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

444 *
__ª°ri˘
 
__ªsu…
)

445 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

448 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

449 
__THROW
 
	`__n⁄nuŒ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

454 
	$lc⁄g48_r
 (
__∑øm
[7],

455 
dønd48_d©a
 *
__buf„r
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

462 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


463 
	#__mÆloc_™d_ˇŒoc_deföed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

468 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

469 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

483 
	$‰ì
 (*
__±r
Ë
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$c‰ì
 (*
__±r
Ë
__THROW
;

491 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


492 
	~<Æloˇ.h
>

495 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

496 || 
deföed
 
__USE_BSD


498 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

501 #ifde‡
__USE_XOPEN2K


503 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

504 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

507 #ifde‡
__USE_ISOC11


509 *
	$Æig√d_Æloc
 (
size_t
 
__Æignmít
, size_à
__size
)

510 
__THROW
 
__©åibuã_mÆloc__
 
	`__©åibuã_Æloc_size__
 ((2)Ë
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

519 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

521 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


523 #ifde‡
__˝lu•lus


524 "C++" 
	`©_quick_exô
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

527 
	`©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

536 
__THROW
 
	`__n⁄nuŒ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

545 #i‡
deföed
 
__USE_ISOC11
 || deföed 
__USE_ISOCXX11


549 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

551 
__END_NAMESPACE_STD


553 #ifde‡
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$gëív
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

565 
__END_NAMESPACE_STD


567 #ifde‡
__USE_GNU


570 *
	$£cuª_gëív
 (c⁄° *
__«me
)

571 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

574 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


578 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

581 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


584 
	$£ãnv
 (c⁄° *
__«me
, c⁄° *
__vÆue
, 
__ª∂a˚
)

585 
__THROW
 
	`__n⁄nuŒ
 ((2));

588 
	$un£ãnv
 (c⁄° *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$˛óªnv
 (Ë
__THROW
;

599 #i‡
deföed
 
__USE_MISC
 \

600 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
)

606 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

609 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 \

610 || 
deföed
 
__USE_XOPEN2K8


619 #i‚de‡
__USE_FILE_OFFSET64


620 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

622 #ifde‡
__REDIRECT


623 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

624 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

626 
	#mk°emp
 
mk°emp64


	)

629 #ifde‡
__USE_LARGEFILE64


630 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

634 #ifde‡
__USE_MISC


641 #i‚de‡
__USE_FILE_OFFSET64


642 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

644 #ifde‡
__REDIRECT


645 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

646 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

648 
	#mk°emps
 
mk°emps64


	)

651 #ifde‡
__USE_LARGEFILE64


652 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

653 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

657 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K8


663 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

666 #ifde‡
__USE_GNU


673 #i‚de‡
__USE_FILE_OFFSET64


674 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

676 #ifde‡
__REDIRECT


677 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

678 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

680 
	#mko°emp
 
mko°emp64


	)

683 #ifde‡
__USE_LARGEFILE64


684 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

693 #i‚de‡
__USE_FILE_OFFSET64


694 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

695 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

697 #ifde‡
__REDIRECT


698 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

699 
__Êags
), 
mko°emps64
)

700 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

702 
	#mko°emps
 
mko°emps64


	)

705 #ifde‡
__USE_LARGEFILE64


706 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

707 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy°em
 (c⁄° *
__comm™d
Ë
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ˇn⁄iˇlize_fûe_«me
 (c⁄° *
__«me
)

725 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

728 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


734 *
	$ªÆ∑th
 (c⁄° *
__ª°ri˘
 
__«me
,

735 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

740 #i‚de‡
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com∑r_‚_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

748 #ifde‡
__USE_GNU


749 (*
	t__com∑r_d_‚_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¨ch
 (c⁄° *
__key
, c⁄° *
__ba£
,

756 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

757 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

759 #ifde‡
__USE_EXTERN_INLINES


760 
	~<bôs/°dlib-b£¨ch.h
>

765 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

766 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

767 #ifde‡
__USE_GNU


768 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

769 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

770 
	`__n⁄nuŒ
 ((1, 4));

775 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

776 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

777 
__END_NAMESPACE_STD


779 #ifde‡
__USE_ISOC99


780 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

781 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__numî
, 
__díom
)

790 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

792 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

793 
__END_NAMESPACE_STD


795 #ifde‡
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

798 
__díom
)

799 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

800 
__END_NAMESPACE_C99


804 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

805 || 
deföed
 
__USE_SVID


812 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

813 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

818 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

819 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

824 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

825 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

828 #ifde‡
__USE_MISC


830 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

831 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

832 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

833 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

834 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

835 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

836 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

837 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

842 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

843 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

844 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

846 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

847 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

850 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

851 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

852 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

854 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

855 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

856 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbÀn
 (c⁄° *
__s
, 
size_t
 
__n
Ë
__THROW
;

866 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

867 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

870 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
;

874 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

875 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

877 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

878 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifde‡
__USE_SVID


888 
	$Ωm©ch
 (c⁄° *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

892 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


899 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

900 *c⁄° *
__ª°ri˘
 
__tokís
,

901 **
__ª°ri˘
 
__vÆuï
)

902 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

906 #ifde‡
__USE_XOPEN


908 
	$£tkey
 (c⁄° *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

914 #ifde‡
__USE_XOPEN2KXSI


916 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

919 #ifde‡
__USE_XOPEN


924 
	$gø¡±
 (
__fd
Ë
__THROW
;

928 
	$u∆ock±
 (
__fd
Ë
__THROW
;

933 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

936 #ifde‡
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

941 
__THROW
 
	`__n⁄nuŒ
 ((2));

944 
	`gë±
 ();

947 #ifde‡
__USE_BSD


951 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

952 
__THROW
 
	`__n⁄nuŒ
 ((1));

955 
	~<bôs/°dlib-Êﬂt.h
>

958 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


959 
	~<bôs/°dlib.h
>

961 #ifde‡
__LDBL_COMPAT


962 
	~<bôs/°dlib-ldbl.h
>

966 #unde‡
__√ed_mÆloc_™d_ˇŒoc


968 
__END_DECLS


	@/usr/include/time.h

22 #i‚def 
_TIME_H


24 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

25 ! 
deföed
 
	g__√ed_time•ec
)

26 
	#_TIME_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__√ed_size_t


	)

36 
	#__√ed_NULL


	)

37 
	~<°ddef.h
>

41 
	~<bôs/time.h
>

44 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


45 #i‚de‡
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

53 
	#__˛ock_t_deföed
 1

	)

55 
	~<bôs/ty≥s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__˛ock_t
 
	t˛ock_t
;

60 
	g__END_NAMESPACE_STD


61 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

66 #unde‡
__√ed_˛ock_t


68 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

69 
	#__time_t_deföed
 1

	)

71 
	~<bôs/ty≥s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #unde‡
__√ed_time_t


84 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

85 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

86 
	#__˛ockid_t_deföed
 1

	)

88 
	~<bôs/ty≥s.h
>

91 
__˛ockid_t
 
	t˛ockid_t
;

94 #unde‡
__˛ockid_time_t


96 #i‡!
deföed
 
__timî_t_deföed
 && \

97 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

98 
	#__timî_t_deföed
 1

	)

100 
	~<bôs/ty≥s.h
>

103 
__timî_t
 
	ttimî_t
;

106 #unde‡
__√ed_timî_t


109 #i‡(!
deföed
 
__time•ec_deföed
 \

110 && ((
deföed
 
_TIME_H
 \

111 && (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
 \

112 || 
deföed
 
__USE_ISOC11
)) \

113 || 
deföed
 
__√ed_time•ec
))

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
__sysˇŒ_¶⁄g_t
 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 c⁄° *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 c⁄° *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 #ifde‡
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

195 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

196 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

199 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

205 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

206 c⁄° *
__ª°ri˘
 
__f‹m©
,

207 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifde‡
__USE_XOPEN


213 *
	$°Ωtime
 (c⁄° *
__ª°ri˘
 
__s
,

214 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

215 
__THROW
;

218 #ifde‡
__USE_XOPEN2K8


221 
	~<xloˇÀ.h
>

223 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

224 c⁄° *
__ª°ri˘
 
__f‹m©
,

225 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 #ifde‡
__USE_GNU


230 *
	$°Ωtime_l
 (c⁄° *
__ª°ri˘
 
__s
,

231 c⁄° *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

232 
__loˇÀ_t
 
__loc
Ë
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

243 
tm
 *
	$loˇ…ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

244 
__END_NAMESPACE_STD


246 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

250 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

254 
tm
 *
	$loˇ…ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

255 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$as˘ime
 (c⁄° 
tm
 *
__ç
Ë
__THROW
;

264 *
	$˘ime
 (c⁄° 
time_t
 *
__timî
Ë
__THROW
;

265 
__END_NAMESPACE_STD


267 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


272 *
	$as˘ime_r
 (c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

273 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
	$˘ime_r
 (c⁄° 
time_t
 *
__ª°ri˘
 
__timî
,

277 *
__ª°ri˘
 
__buf
Ë
__THROW
;

282 *
__tz«me
[2];

283 
__daylight
;

284 
__timez⁄e
;

287 #ifdef 
__USE_POSIX


289 *
tz«me
[2];

293 
	$tz£t
 (Ë
__THROW
;

296 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


297 
daylight
;

298 
timez⁄e
;

301 #ifde‡
__USE_SVID


304 
	$°ime
 (c⁄° 
time_t
 *
__whí
Ë
__THROW
;

310 
	#__i¶óp
(
yór
) \

311 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

314 #ifde‡
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

322 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

325 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

329 #ifde‡
__USE_POSIX199309


334 
	`«no¶ìp
 (c⁄° 
time•ec
 *
__ªque°ed_time
,

335 
time•ec
 *
__ªmaöög
);

339 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

342 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

345 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, c⁄° 
time•ec
 *
__ç
)

346 
__THROW
;

348 #ifde‡
__USE_XOPEN2K


353 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

354 c⁄° 
time•ec
 *
__ªq
,

355 
time•ec
 *
__ªm
);

358 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

363 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

364 
sigevít
 *
__ª°ri˘
 
__evp
,

365 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

368 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

371 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

372 c⁄° 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

373 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

376 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

377 
__THROW
;

380 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

384 #ifde‡
__USE_ISOC11


386 
	$time•ec_gë
 (
time•ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__n⁄nuŒ
 ((1));

391 #ifde‡
__USE_XOPEN_EXTENDED


403 
gëd©e_îr
;

412 
tm
 *
	`gëd©e
 (c⁄° *
__°rög
);

415 #ifde‡
__USE_GNU


426 
	`gëd©e_r
 (c⁄° *
__ª°ri˘
 
__°rög
,

427 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

430 
__END_DECLS


	@/usr/include/alloca.h

18 #i‚def 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<„©uªs.h
>

23 
	#__√ed_size_t


	)

24 
	~<°ddef.h
>

26 
	g__BEGIN_DECLS


29 #unde‡
Æloˇ


32 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

34 #ifdef 
__GNUC__


35 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #i‚def 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #unde‡
__USE_ISOC11


102 #unde‡
__USE_ISOC99


103 #unde‡
__USE_ISOC95


104 #unde‡
__USE_ISOCXX11


105 #unde‡
__USE_POSIX


106 #unde‡
__USE_POSIX2


107 #unde‡
__USE_POSIX199309


108 #unde‡
__USE_POSIX199506


109 #unde‡
__USE_XOPEN


110 #unde‡
__USE_XOPEN_EXTENDED


111 #unde‡
__USE_UNIX98


112 #unde‡
__USE_XOPEN2K


113 #unde‡
__USE_XOPEN2KXSI


114 #unde‡
__USE_XOPEN2K8


115 #unde‡
__USE_XOPEN2K8XSI


116 #unde‡
__USE_LARGEFILE


117 #unde‡
__USE_LARGEFILE64


118 #unde‡
__USE_FILE_OFFSET64


119 #unde‡
__USE_BSD


120 #unde‡
__USE_SVID


121 #unde‡
__USE_MISC


122 #unde‡
__USE_ATFILE


123 #unde‡
__USE_GNU


124 #unde‡
__USE_REENTRANT


125 #unde‡
__USE_FORTIFY_LEVEL


126 #unde‡
__KERNEL_STRICT_NAMES


130 #i‚de‡
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

143 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

150 #ifde‡
_GNU_SOURCE


151 #unde‡
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #unde‡
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #unde‡
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #unde‡
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #unde‡
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #unde‡
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #unde‡
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #unde‡
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #unde‡
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #unde‡
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #unde‡
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #unde‡
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #i‡(
deföed
 
_DEFAULT_SOURCE
 \

180 || (!
deföed
 
	g__STRICT_ANSI__
 \

181 && !
deföed
 
	g_ISOC99_SOURCE
 \

182 && !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 \

183 && !
deföed
 
	g_XOPEN_SOURCE
 \

184 && !
deföed
 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
))

185 #unde‡
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #unde‡
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #unde‡
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #i‡(
deföed
 
_ISOC11_SOURCE
 \

195 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

201 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC11_SOURCE
 \

207 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #i‡((
deföed
 
__˝lu•lus
 && __cplusplus >= 201103L) \

216 || 
deföed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifde‡
_DEFAULT_SOURCE


224 #i‡!
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #unde‡
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #unde‡
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #unde‡
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #unde‡
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #unde‡
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #unde‡
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

285 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #unde‡
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #unde‡
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifde‡
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifde‡
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifde‡
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #i‡
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<°dc-¥edef.h
>

360 #unde‡
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

369 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

372 #i‚de‡
__ASSEMBLER__


373 #i‚de‡
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

388 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

389 && 
deföed
 
	g__exã∫_ölöe


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/°ubs.h
>

	@/usr/include/getopt.h

19 #i‚de‡
_GETOPT_H


21 #i‚de‡
__√ed_gë›t


22 
	#_GETOPT_H
 1

	)

32 #i‡!
deföed
 
__GNU_LIBRARY__


33 
	~<˘y≥.h
>

36 #i‚de‡
__THROW


37 #i‚de‡
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

40 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__˝lu•lus


57 *
›èrg
;

71 
›töd
;

76 
›ãº
;

80 
›t›t
;

82 #i‚de‡
__√ed_gë›t


104 
	s›ti⁄


106 c⁄° *
	g«me
;

109 
	ghas_¨g
;

110 *
	gÊag
;

111 
	gvÆ
;

116 
	#no_¨gumít
 0

	)

117 
	#ªquúed_¨gumít
 1

	)

118 
	#›ti⁄Æ_¨gumít
 2

	)

146 #ifde‡
__GNU_LIBRARY__


150 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

151 
__THROW
;

153 #i‡
deföed
 
__√ed_gë›t
 && deföed 
__USE_POSIX2
 \

154 && !
deföed
 
	g__USE_POSIX_IMPLICITLY
 && !deföed 
	g__USE_GNU


158 #ifde‡
__REDIRECT


159 
__REDIRECT_NTH
 (
gë›t
, (
___¨gc
, *c⁄° *
___¨gv
,

160 c⁄° *
__sh‹t›ts
),

161 
__posix_gë›t
);

163 
__posix_gë›t
 (
___¨gc
, *c⁄° *
___¨gv
,

164 c⁄° *
__sh‹t›ts
Ë
__THROW
;

165 
	#gë›t
 
__posix_gë›t


	)

169 
gë›t
 ();

172 #i‚de‡
__√ed_gë›t


173 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

174 c⁄° *
__sh‹t›ts
,

175 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

176 
__THROW
;

177 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

178 c⁄° *
__sh‹t›ts
,

179 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

180 
__THROW
;

184 #ifdef 
__˝lu•lus


189 #unde‡
__√ed_gë›t


	@/usr/include/libio.h

28 #i‚de‡
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_c⁄fig.h
>

33 
	#_IO_Âos_t
 
_G_Âos_t


	)

34 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li°
 
_G_va_li°


	)

45 
	#_IO_wöt_t
 
wöt_t


	)

48 
	#__√ed___va_li°


	)

49 
	~<°d¨g.h
>

50 #ifde‡
__GNUC_VA_LIST


51 #unde‡
_IO_va_li°


52 
	#_IO_va_li°
 
__gnuc_va_li°


	)

55 #i‚de‡
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #i‚de‡
EOF


62 
	#EOF
 (-1)

	)

64 #i‚de‡
NULL


65 #i‡
deföed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuŒ
)

	)

69 #i‡!
deföed
(
__˝lu•lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifde‡
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifde‡
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifde‡
_IO_MTSAFE_IO


148 #i‡
deföed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<bôs/°dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¨kî
 {

161 
_IO_m¨kî
 *
	m_√xt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

169 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

170 
	mpublic
:

171 
°ªamm¨kî
(
°ªambuf
 *
sb
);

172 ~
°ªamm¨kî
();

173 
ßvög
(Ë{  
	m_•os
 == -2; }

174 
dñè
(
°ªamm¨kî
&);

175 
dñè
();

180 
	e__codecvt_ªsu…


182 
	m__codecvt_ok
,

183 
	m__codecvt_∑πül
,

184 
	m__codecvt_îr‹
,

185 
	m__codecvt_noc⁄v


188 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

194 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

195 
	m__mb°©e_t
 *,

196 c⁄° 
	mwch¨_t
 *,

197 c⁄° 
	mwch¨_t
 *,

198 c⁄° 
	mwch¨_t
 **, *,

200 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

201 
	m__mb°©e_t
 *, *,

203 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

204 
	m__mb°©e_t
 *,

206 c⁄° **, 
	mwch¨_t
 *,

207 
	mwch¨_t
 *, wchar_t **);

208 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

211 c⁄° *, c⁄° *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

214 
_IO_ic⁄v_t
 
	m__cd_ö
;

215 
_IO_ic⁄v_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¨_t
 *
	m_IO_ªad_±r
;

222 
wch¨_t
 *
	m_IO_ªad_íd
;

223 
wch¨_t
 *
	m_IO_ªad_ba£
;

224 
wch¨_t
 *
	m_IO_wrôe_ba£
;

225 
wch¨_t
 *
	m_IO_wrôe_±r
;

226 
wch¨_t
 *
	m_IO_wrôe_íd
;

227 
wch¨_t
 *
	m_IO_buf_ba£
;

228 
wch¨_t
 *
	m_IO_buf_íd
;

230 
wch¨_t
 *
	m_IO_ßve_ba£
;

231 
wch¨_t
 *
	m_IO_backup_ba£
;

233 
wch¨_t
 *
	m_IO_ßve_íd
;

235 
__mb°©e_t
 
	m_IO_°©e
;

236 
__mb°©e_t
 
	m_IO_œ°_°©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¨_t
 
	m_sh‹tbuf
[1];

241 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

245 
	s_IO_FILE
 {

246 
	m_Êags
;

247 
	#_IO_fûe_Êags
 
_Êags


	)

251 * 
	m_IO_ªad_±r
;

252 * 
	m_IO_ªad_íd
;

253 * 
	m_IO_ªad_ba£
;

254 * 
	m_IO_wrôe_ba£
;

255 * 
	m_IO_wrôe_±r
;

256 * 
	m_IO_wrôe_íd
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_íd
;

260 *
	m_IO_ßve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_ßve_íd
;

264 
_IO_m¨kî
 *
	m_m¨kîs
;

266 
_IO_FILE
 *
	m_chaö
;

268 
	m_fûío
;

270 
	m_blksize
;

272 
	m_Êags2
;

274 
_IO_off_t
 
	m_ﬁd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cﬁumn
;

279 sig√d 
	m_vèbÀ_off£t
;

280 
	m_sh‹tbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifde‡
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com∂ëe


290 
_IO_FILE
 
	m_fûe
;

292 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_‰ìªs_li°
;

299 *
	m_‰ìªs_buf
;

300 
size_t
 
	m_‰ìªs_size
;

302 *
	m__∑d1
;

303 *
	m__∑d2
;

304 *
	m__∑d3
;

305 *
	m__∑d4
;

306 
size_t
 
	m__∑d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

314 #i‚de‡
__˝lu•lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_∂us
;

320 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

321 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

322 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

323 #i‚de‡
_LIBC


324 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

325 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

326 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

328 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

329 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

330 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

338 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

346 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, c⁄° *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_˛o£_‚
 (*
	t__cookõ
);

361 #ifde‡
_GNU_SOURCE


363 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

364 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

365 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

366 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

371 
__io_ªad_‚
 *
	mªad
;

372 
__io_wrôe_‚
 *
	mwrôe
;

373 
__io_£ek_‚
 *
	m£ek
;

374 
__io_˛o£_‚
 *
	m˛o£
;

375 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

376 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

378 
	g_IO_cookõ_fûe
;

381 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

382 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

386 #ifde‡
__˝lu•lus


390 
__undîÊow
 (
_IO_FILE
 *);

391 
__uÊow
 (
_IO_FILE
 *);

392 
__ovîÊow
 (
_IO_FILE
 *, );

393 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

395 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

396 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

399 #i‡ 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

402 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

405 
	#_IO_gëc_u∆ocked
(
_Â
) \

406 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

407 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

408 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

409 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

410 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

411 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

412 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

413 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

414 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

415 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

417 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_gëwc_u∆ocked
(
_Â
) \

419 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

420 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

421 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

422 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

423 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

424 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

425 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

426 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

427 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

428 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

431 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

432 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

434 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

436 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

437 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

439 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

443 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

445 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

446 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

447 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

449 #ifde‡
_IO_MTSAFE_IO


450 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

451 
	#_IO_Êockfûe
(
_Â
) \

452 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

453 
	#_IO_fu∆ockfûe
(
_Â
) \

454 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

456 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

457 
	#_IO_Êockfûe
(
_Â
Ë

	)

458 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

459 
	#_IO_·rylockfûe
(
_Â
Ë

	)

460 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

461 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

464 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

465 
_IO_va_li°
, *
__ª°ri˘
);

466 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

467 
_IO_va_li°
);

468 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

476 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

478 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

479 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

480 #i‡
__GNUC__
 >= 2

483 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


484 
	~<shlib-com∑t.h
>

485 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

487 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

488 c⁄° 
_IO_°dö_u£d
;

489 
wók_exã∫
 (
_IO_°dö_u£d
);

492 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


493 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

497 
	#_IO_fwide
(
__Â
, 
__mode
) \

498 ({ 
__ªsu…
 = (
__mode
); \

499 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

501 i‡((
__Â
)->
_mode
 == 0) \

503 (
__Â
)->
_mode
 = -1; \

504 
__ªsu…
 = (
__Â
)->
_mode
; \

506 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

507 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

509 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

510 
__ªsu…
; })

	)

513 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

514 
_IO_va_li°
, *
__ª°ri˘
);

515 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

516 
_IO_va_li°
);

517 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

518 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

521 #ifde‡
__LDBL_COMPAT


522 
	~<bôs/libio-ldbl.h
>

525 #ifde‡
__˝lu•lus


	@/usr/include/xlocale.h

20 #i‚de‡
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loˇÀ_°ru˘


30 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

33 c⁄° *
	m__˘y≥_b
;

34 c⁄° *
	m__˘y≥_tﬁowî
;

35 c⁄° *
	m__˘y≥_touµî
;

38 c⁄° *
	m__«mes
[13];

39 } *
	t__loˇÀ_t
;

42 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

23 
__off_t
 
	m__pos
;

24 
__mb°©e_t
 
	m__°©e
;

25 } 
	t_G_Âos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos64_t
;

31 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gc⁄v.h
>

35 
__gc⁄v_öfo
 
	m__cd
;

38 
__gc⁄v_öfo
 
	m__cd
;

39 
__gc⁄v_°ï_d©a
 
	m__d©a
;

40 } 
	m__comböed
;

41 } 
	t_G_ic⁄v_t
;

46 
	#_G_va_li°
 
__gnuc_va_li°


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/ctype.h

22 #i‚def 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 
	g__BEGIN_DECLS


30 #i‚de‡
_ISbô


39 
	~<ídün.h
>

40 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


41 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

43 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

48 
	m_ISuµî
 = 
_ISbô
 (0),

49 
	m_ISlowî
 = 
_ISbô
 (1),

50 
	m_ISÆpha
 = 
_ISbô
 (2),

51 
	m_ISdigô
 = 
_ISbô
 (3),

52 
	m_ISxdigô
 = 
_ISbô
 (4),

53 
	m_IS•a˚
 = 
_ISbô
 (5),

54 
	m_IS¥öt
 = 
_ISbô
 (6),

55 
	m_ISgøph
 = 
_ISbô
 (7),

56 
	m_ISbœnk
 = 
_ISbô
 (8),

57 
	m_IS˙ål
 = 
_ISbô
 (9),

58 
	m_ISpun˘
 = 
_ISbô
 (10),

59 
	m_ISÆnum
 = 
_ISbô
 (11)

79 c⁄° **
	$__˘y≥_b_loc
 ()

80 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

81 c⁄° 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

83 c⁄° 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

87 #i‚de‡
__˝lu•lus


88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

90 #ñi‡
deföed
 
__USE_EXTERN_INLINES


91 
	#__is˘y≥_f
(
ty≥
) \

92 
__exã∫_ölöe
 \

93 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

95  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

96 
	}

	)
}

99 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

100 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

102 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__ex˘y≥
 (
iß um
);

111 
__ex˘y≥
 (
ißÕha
);

112 
__ex˘y≥
 (
is˙ål
);

113 
__ex˘y≥
 (
isdigô
);

114 
__ex˘y≥
 (
i¶owî
);

115 
__ex˘y≥
 (
isgøph
);

116 
__ex˘y≥
 (
i•röt
);

117 
__ex˘y≥
 (
i•un˘
);

118 
__ex˘y≥
 (
is•a˚
);

119 
__ex˘y≥
 (
isuµî
);

120 
__ex˘y≥
 (
isxdigô
);

124 
	$tﬁowî
 (
__c
Ë
__THROW
;

127 
	$touµî
 (
__c
Ë
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__ex˘y≥
 (
isbœnk
);

138 
__END_NAMESPACE_C99


141 #ifde‡
__USE_GNU


143 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

146 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


150 
	$ißscii
 (
__c
Ë
__THROW
;

154 
	$tﬂscii
 (
__c
Ë
__THROW
;

158 
	`__ex˘y≥
 (
_touµî
);

159 
	`__ex˘y≥
 (
_tﬁowî
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

164 (
__exãnsi⁄__
 \

165 ({ 
__ªs
; \

166 i‡( (
c
) > 1) \

168 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

174 
__ªs
 = 
f
 
¨gs
; \

177 
__ªs
 = (
a
)[(Ë(
c
)]; \

178 
__ªs
; 
	}
}))

	)

180 #i‡!
deföed
 
__NO_CTYPE


181 #ifde‡
__is˘y≥_f


182 
	$__is˘y≥_f
 (
Ænum
)

183 
	$__is˘y≥_f
 (
Æpha
)

184 
	$__is˘y≥_f
 (
˙ål
)

185 
	$__is˘y≥_f
 (
digô
)

186 
	$__is˘y≥_f
 (
lowî
)

187 
	$__is˘y≥_f
 (
gøph
)

188 
	$__is˘y≥_f
 (
¥öt
)

189 
	$__is˘y≥_f
 (
pun˘
)

190 
	$__is˘y≥_f
 (
•a˚
)

191 
	$__is˘y≥_f
 (
uµî
)

192 
	$__is˘y≥_f
 (
xdigô
)

193 #ifde‡
__USE_ISOC99


194 
	$__is˘y≥_f
 (
bœnk
)

196 #ñi‡
deföed
 
__is˘y≥


197 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

198 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

199 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

200 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

201 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

202 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

203 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

204 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

205 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

206 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

207 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

208 #ifde‡
__USE_ISOC99


209 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

213 #ifde‡
__USE_EXTERN_INLINES


214 
__exã∫_ölöe
 

215 
	`__NTH
 (
	$tﬁowî
 (
__c
))

217  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

218 
	}
}

220 
__exã∫_ölöe
 

221 
__NTH
 (
	$touµî
 (
__c
))

223  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

224 
	}
}

227 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


228 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

229 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

232 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


233 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

234 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

236 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

237 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

243 #ifde‡
__USE_XOPEN2K8


257 
	~<xloˇÀ.h
>

261 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

262 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

264 
	#__ex˘y≥_l
(
«me
) \

265 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

271 
__ex˘y≥_l
 (
iß um_l
);

272 
__ex˘y≥_l
 (
ißÕha_l
);

273 
__ex˘y≥_l
 (
is˙ål_l
);

274 
__ex˘y≥_l
 (
isdigô_l
);

275 
__ex˘y≥_l
 (
i¶owî_l
);

276 
__ex˘y≥_l
 (
isgøph_l
);

277 
__ex˘y≥_l
 (
i•röt_l
);

278 
__ex˘y≥_l
 (
i•un˘_l
);

279 
__ex˘y≥_l
 (
is•a˚_l
);

280 
__ex˘y≥_l
 (
isuµî_l
);

281 
__ex˘y≥_l
 (
isxdigô_l
);

283 
__ex˘y≥_l
 (
isbœnk_l
);

287 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

288 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

291 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

292 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


295 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

296 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

297 
	#__touµî_l
(
c
, 
loˇÀ
) \

298 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

299 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

300 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

304 #i‚de‡
__NO_CTYPE


305 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

306 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

307 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

308 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

309 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

310 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

311 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

312 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

313 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

314 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

315 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

317 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

319 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


320 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

321 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

324 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

325 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

326 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

327 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

328 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

329 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

330 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

331 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

332 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

333 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

334 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

336 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

338 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


339 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

340 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/stdc-predef.h

18 #i‚def 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifde‡
__GCC_IEC_559


37 #i‡
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifde‡
__GCC_IEC_559_COMPLEX


45 #i‡
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/endian.h

18 #i‚def 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<„©uªs.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<bôs/ídün.h
>

40 #i‚de‡
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

53 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

58 #i‡
deföed
 
__USE_BSD
 && !deföed 
__ASSEMBLER__


60 
	~<bôs/byãsw≠.h
>

62 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


63 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

64 
	#htﬁe16
(
x
Ë(x)

	)

65 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

66 
	#À16toh
(
x
Ë(x)

	)

68 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

69 
	#htﬁe32
(
x
Ë(x)

	)

70 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

71 
	#À32toh
(
x
Ë(x)

	)

73 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

74 
	#htﬁe64
(
x
Ë(x)

	)

75 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

76 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/gconv.h

22 #i‚de‡
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<„©uªs.h
>

26 
	#__√ed_mb°©e_t


	)

27 
	#__√ed_wöt_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gc⁄v_°ï
;

65 
	g__gc⁄v_°ï_d©a
;

66 
	g__gc⁄v_lﬂded_obje˘
;

67 
	g__gc⁄v_å™s_d©a
;

71 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

79 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

80 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

84 (*
	t__gc⁄v_å™s_f˘
Ë(
	t__gc⁄v_°ï
 *,

85 
	t__gc⁄v_°ï_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gc⁄v_å™s_c⁄ãxt_f˘
) (*, const *,

97 (*
	t__gc⁄v_å™s_quîy_f˘
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gc⁄v_å™s_öô_f˘
) (**, const *);

102 (*
	t__gc⁄v_å™s_íd_f˘
) (*);

104 
	s__gc⁄v_å™s_d©a


107 
__gc⁄v_å™s_f˘
 
__å™s_f˘
;

108 
__gc⁄v_å™s_c⁄ãxt_f˘
 
__å™s_c⁄ãxt_f˘
;

109 
__gc⁄v_å™s_íd_f˘
 
__å™s_íd_f˘
;

110 *
__d©a
;

111 
__gc⁄v_å™s_d©a
 *
__√xt
;

116 
	s__gc⁄v_°ï


118 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

119 c⁄° *
__mod«me
;

121 
__cou¡î
;

123 *
__‰om_«me
;

124 *
__to_«me
;

126 
__gc⁄v_f˘
 
__f˘
;

127 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

128 
__gc⁄v_öô_f˘
 
__öô_f˘
;

129 
__gc⁄v_íd_f˘
 
__íd_f˘
;

133 
__mö_√eded_‰om
;

134 
__max_√eded_‰om
;

135 
__mö_√eded_to
;

136 
__max_√eded_to
;

139 
__°©eful
;

141 *
__d©a
;

146 
	s__gc⁄v_°ï_d©a


148 *
__outbuf
;

149 *
__outbu„nd
;

153 
__Êags
;

157 
__övoˇti⁄_cou¡î
;

161 
__öã∫Æ_u£
;

163 
__mb°©e_t
 *
__°©ï
;

164 
__mb°©e_t
 
__°©e
;

168 
__gc⁄v_å™s_d©a
 *
__å™s
;

173 
	s__gc⁄v_öfo


175 
size_t
 
__n°ïs
;

176 
__gc⁄v_°ï
 *
__°ïs
;

177 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

178 } *
	t__gc⁄v_t
;

	@/usr/include/wchar.h

23 #i‚de‡
_WCHAR_H


25 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<„©uªs.h
>

30 #ifde‡
_WCHAR_H


32 
	#__√ed___FILE


	)

33 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_FILE


	)

36 
	~<°dio.h
>

38 
	#__√ed___va_li°


	)

39 
	~<°d¨g.h
>

41 
	~<bôs/wch¨.h
>

44 
	#__√ed_size_t


	)

45 
	#__√ed_wch¨_t


	)

46 
	#__√ed_NULL


	)

48 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


49 #unde‡
__√ed_wöt_t


50 
	#__√ed_wöt_t


	)

51 
	~<°ddef.h
>

55 #i‚de‡
_WINT_T


60 
	#_WINT_T


	)

61 
	twöt_t
;

65 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
deföed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twöt_t
;

69 
	g__END_NAMESPACE_STD


74 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
____mb°©e_t_deföed


80 
	#____mb°©e_t_deföed
 1

	)

84 
	m__cou¡
;

87 #ifde‡
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wöt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__vÆue
;

94 } 
	t__mb°©e_t
;

96 #unde‡
__√ed_mb°©e_t


101 #ifde‡
_WCHAR_H


103 #i‚de‡
__mb°©e_t_deföed


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb°©e_t_deföed
 1

	)

111 #ifde‡
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

115 #i‚de‡
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #i‚de‡
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


128 
	~<w˘y≥.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

150 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

151 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

156 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

158 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

159 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
)

164 
__THROW
 
__©åibuã_puª__
;

166 
	$wc¢cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©åibuã_puª__
;

168 
__END_NAMESPACE_STD


170 #ifde‡
__USE_XOPEN2K8


172 
	$wcsˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

175 
	$wc¢ˇ£cmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

176 
size_t
 
__n
Ë
__THROW
;

180 
	~<xloˇÀ.h
>

182 
	$wcsˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

183 
__loˇÀ_t
 
__loc
Ë
__THROW
;

185 
	$wc¢ˇ£cmp_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

186 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscﬁl
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
Ë
__THROW
;

196 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

197 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifde‡
__USE_XOPEN2K8


206 
	$wcscﬁl_l
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

207 
__loˇÀ_t
 
__loc
Ë
__THROW
;

212 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
,

213 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

216 
wch¨_t
 *
	$wcsdup
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

224 "C++" c⁄° 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

227 
wch¨_t
 *
	$wcschr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

228 
__THROW
 
__©åibuã_puª__
;

231 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

233 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

234 "C++" c⁄° 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

235 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

237 
wch¨_t
 *
	$wc§chr
 (c⁄° 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

238 
__THROW
 
__©åibuã_puª__
;

240 
__END_NAMESPACE_STD


242 #ifde‡
__USE_GNU


245 
wch¨_t
 *
	$wcsch∫ul
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__wc
)

246 
__THROW
 
__©åibuã_puª__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ªje˘
)

253 
__THROW
 
__©åibuã_puª__
;

256 
size_t
 
	$wcs•n
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

257 
__THROW
 
__©åibuã_puª__
;

259 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

261 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

262 "C++" c⁄° 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
,

263 c⁄° 
wch¨_t
 *
__ac˚±
)

264 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

266 
wch¨_t
 *
	$wc•brk
 (c⁄° 
wch¨_t
 *
__wcs
, c⁄° wch¨_à*
__ac˚±
)

267 
__THROW
 
__©åibuã_puª__
;

270 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

272 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

273 "C++" c⁄° 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
,

274 c⁄° 
wch¨_t
 *
__√edÀ
)

275 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

277 
wch¨_t
 *
	$wcs°r
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

278 
__THROW
 
__©åibuã_puª__
;

282 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

283 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

284 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

287 
size_t
 
	$wc¶í
 (c⁄° 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

288 
__END_NAMESPACE_STD


290 #ifde‡
__USE_XOPEN


292 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

294 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

295 "C++" c⁄° 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
,

296 c⁄° 
wch¨_t
 *
__√edÀ
)

297 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

299 
wch¨_t
 *
	$wcswcs
 (c⁄° 
wch¨_t
 *
__hay°ack
, c⁄° wch¨_à*
__√edÀ
)

300 
__THROW
 
__©åibuã_puª__
;

304 #ifde‡
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Àn
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

307 
__THROW
 
__©åibuã_puª__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

316 "C++" c⁄° 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

320 
wch¨_t
 *
	$wmemchr
 (c⁄° 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©åibuã_puª__
;

325 
	$wmemcmp
 (c⁄° 
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©åibuã_puª__
;

329 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

330 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

334 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifde‡
__USE_GNU


344 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

345 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

357 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

361 
	$mbsöô
 (c⁄° 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

365 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

366 c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

367 
mb°©e_t
 *
__ª°ri˘
 
__p
Ë
__THROW
;

370 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

371 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

374 
size_t
 
	$__mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

375 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

376 
size_t
 
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

377 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifde‡
__USE_EXTERN_INLINES


386 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

387 
__exã∫_ölöe
 
wöt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

392 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

393 
__exã∫_ölöe
 

394 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

395 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

396 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

398 
__exã∫_ölöe
 
size_t


399 
__NTH
 (
	$mbæí
 (c⁄° *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

400 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

401 {  (
__ps
 !
NULL


402 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

409 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

410 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

414 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

415 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

416 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

424 c⁄° **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

425 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

429 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

430 c⁄° 
wch¨_t
 **
__ª°ri˘
 
__§c
,

431 
size_t
 
__nwc
, size_à
__Àn
,

432 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

437 #ifde‡
__USE_XOPEN


439 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

443 
	$wcswidth
 (c⁄° 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc°od
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

451 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifde‡
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc°of
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

458 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

459 
	$wc°ﬁd
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

460 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc°ﬁ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

469 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

473 
	$wc°oul
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

474 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifde‡
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__exãnsi⁄__


483 
	$wc°ﬁl
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

484 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

485 
__THROW
;

489 
__exãnsi⁄__


490 
	$wc°ouŒ
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

491 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

492 
__ba£
Ë
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifde‡
__USE_GNU


499 
__exãnsi⁄__


500 
	$wc°oq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

501 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

502 
__THROW
;

506 
__exãnsi⁄__


507 
	$wc°ouq
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

508 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

509 
__ba£
Ë
__THROW
;

512 #ifde‡
__USE_GNU


526 
	~<xloˇÀ.h
>

530 
	$wc°ﬁ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

531 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

532 
__loˇÀ_t
 
__loc
Ë
__THROW
;

534 
	$wc°oul_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

535 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

536 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

538 
__exãnsi⁄__


539 
	$wc°ﬁl_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

540 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

541 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

543 
__exãnsi⁄__


544 
	$wc°ouŒ_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

545 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

546 
__ba£
, 
__loˇÀ_t
 
__loc
)

547 
__THROW
;

549 
	$wc°od_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

550 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

551 
__THROW
;

553 
	$wc°of_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

554 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

555 
__THROW
;

557 
	$wc°ﬁd_l
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

558 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

559 
__loˇÀ_t
 
__loc
Ë
__THROW
;

563 #ifde‡
__USE_XOPEN2K8


566 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

567 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

571 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

572 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

583 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

594 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

595 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

601 
	`w¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

604 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

605 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

606 
__THROW
 ;

612 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

613 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

614 
__gnuc_va_li°
 
__¨g
)

620 
	`vw¥ötf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

621 
__gnuc_va_li°
 
__¨g
)

625 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

626 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

627 
__gnuc_va_li°
 
__¨g
)

628 
__THROW
 ;

635 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

636 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

642 
	`wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

645 
	$swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

646 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

647 
__THROW
 ;

649 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

650 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

651 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

652 #ifde‡
__REDIRECT


656 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

657 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

658 
__isoc99_fwsˇnf
)

660 
	`__REDIRECT
 (
wsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

661 
__isoc99_wsˇnf
)

663 
	`__REDIRECT_NTH
 (
swsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

664 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

665 ...), 
__isoc99_swsˇnf
)

668 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

669 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

670 
	`__isoc99_wsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

671 
	$__isoc99_swsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

672 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

673 
__THROW
;

674 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

675 
	#wsˇnf
 
__isoc99_wsˇnf


	)

676 
	#swsˇnf
 
__isoc99_swsˇnf


	)

680 
__END_NAMESPACE_STD


683 #ifde‡
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

690 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

691 
__gnuc_va_li°
 
__¨g
)

697 
	`vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

698 
__gnuc_va_li°
 
__¨g
)

701 
	$vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

702 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

703 
__gnuc_va_li°
 
__¨g
)

704 
__THROW
 ;

706 #i‡!
deföed
 
__USE_GNU
 \

707 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

708 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

709 #ifde‡
__REDIRECT


710 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

711 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

712 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

714 
	`__REDIRECT
 (
vwsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

715 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

717 
	`__REDIRECT_NTH
 (
vswsˇnf
, (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

718 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

719 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

722 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

723 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

724 
__gnuc_va_li°
 
__¨g
);

725 
	`__isoc99_vwsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

726 
__gnuc_va_li°
 
__¨g
);

727 
	$__isoc99_vswsˇnf
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__s
,

728 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

729 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

730 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

731 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

732 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

746 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

752 
wöt_t
 
	`gëwch¨
 ();

759 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

760 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

766 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

774 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

775 
__FILE
 *
__ª°ri˘
 
__°ªam
);

781 
	`Âutws
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

782 
__FILE
 *
__ª°ri˘
 
__°ªam
);

789 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

790 
__END_NAMESPACE_STD


793 #ifde‡
__USE_GNU


801 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

802 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

810 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

818 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

827 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

828 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

837 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

838 
__FILE
 *
__ª°ri˘
 
__°ªam
);

846 
	`Âutws_u∆ocked
 (c⁄° 
wch¨_t
 *
__ª°ri˘
 
__ws
,

847 
__FILE
 *
__ª°ri˘
 
__°ªam
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

856 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

857 c⁄° 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifde‡
__USE_GNU


861 
	~<xloˇÀ.h
>

865 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

866 c⁄° 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

867 c⁄° 
tm
 *
__ª°ri˘
 
__ç
,

868 
__loˇÀ_t
 
__loc
Ë
__THROW
;

877 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


878 
	#__√ed_iswxxx


	)

879 
	~<w˘y≥.h
>

883 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__f‹tify_fun˘i⁄


884 
	~<bôs/wch¨2.h
>

887 #ifde‡
__LDBL_COMPAT


888 
	~<bôs/wch¨-ldbl.h
>

891 
__END_DECLS


899 #unde‡
__√ed_mb°©e_t


900 #unde‡
__√ed_wöt_t


	@/usr/include/wctype.h

23 #i‚de‡
_WCTYPE_H


25 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 #i‚de‡
__√ed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__√ed_wöt_t


	)

33 
	~<wch¨.h
>

37 #i‚de‡
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #unde‡
__√ed_iswxxx


46 #i‚de‡
__iswxxx_deföed


47 
	#__iswxxx_deföed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	tw˘y≥_t
;

53 
	g__END_NAMESPACE_C99


55 #i‚de‡
_ISwbô


60 
	~<ídün.h
>

61 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


62 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

64 
	#_ISwbô
(
bô
) \

65 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

73 
	m__ISwuµî
 = 0,

74 
	m__ISwlowî
 = 1,

75 
	m__ISwÆpha
 = 2,

76 
	m__ISwdigô
 = 3,

77 
	m__ISwxdigô
 = 4,

78 
	m__ISw•a˚
 = 5,

79 
	m__ISw¥öt
 = 6,

80 
	m__ISwgøph
 = 7,

81 
	m__ISwbœnk
 = 8,

82 
	m__ISw˙ål
 = 9,

83 
	m__ISwpun˘
 = 10,

84 
	m__ISwÆnum
 = 11,

86 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

87 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

88 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

89 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

90 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

91 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

92 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

93 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

94 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

95 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

96 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

97 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

117 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

120 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

124 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

128 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

133 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

136 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

141 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

146 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

151 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

156 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

161 #ifde‡
__USE_ISOC99


162 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

171 
w˘y≥_t
 
	$w˘y≥
 (c⁄° *
__¥›îty
Ë
__THROW
;

175 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 c⁄° 
	t__öt32_t
 *
	tw˘øns_t
;

187 
__END_NAMESPACE_C99


188 #ifde‡
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

197 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifde‡
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
w˘øns_t
 
	$w˘øns
 (c⁄° *
__¥›îty
Ë
__THROW
;

221 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifde‡
__USE_XOPEN2K8


226 
	~<xloˇÀ.h
>

230 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

236 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

239 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

243 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

247 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

252 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

255 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

260 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

265 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

270 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

275 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

280 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
w˘y≥_t
 
	$w˘y≥_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

285 
__THROW
;

289 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

290 
__THROW
;

298 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

301 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

305 
w˘øns_t
 
	$w˘øns_l
 (c⁄° *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

306 
__THROW
;

309 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

310 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
48
943
ftl_greedy/ftl.c
ftl_greedy/ftl.h
include/bank.h
include/flash.h
include/jasmine.h
include/mem_util.h
include/nand.h
include/peri.h
include/rom.h
include/sata.h
include/sata_cmd.h
include/sata_registers.h
include/sdram.h
include/uart.h
installer/ata_7.h
installer/installer.c
installer/ntddstor.h
sata/sata_cmd.c
sata/sata_identify.c
sata/sata_isr.c
sata/sata_main.c
sata/sata_table.c
target_spw/flash.c
target_spw/flash_wrapper.c
target_spw/initialize.c
target_spw/mem_util.c
target_spw/misc.c
target_spw/misc.h
target_spw/shashtbl.c
target_spw/shashtbl.h
target_spw/target.h
target_spw/uart.c
tc/tc_synth.c
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/time.h
/usr/include/alloca.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/ctype.h
/usr/include/stdc-predef.h
/usr/include/endian.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
